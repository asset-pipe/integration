[
{"id":"1892a34e5d6b4ed6f915a394a6edd0a10cae9cfcc462d96105af4532898b7521","source":"\"use strict\";\nvar types_1 = require('../types');\nfunction push(entry) {\n    if (!window[types_1.WINDOW_KEY]) {\n        window[types_1.WINDOW_KEY] = [];\n    }\n    return window[types_1.WINDOW_KEY].push(entry);\n}\n;\nfunction getContextConfig(key, value) {\n    if (typeof key === 'object') {\n        return key;\n    }\n    return (_a = {}, _a[key] = value, _a);\n    var _a;\n}\nexports.__esModule = true;\nexports[\"default\"] = {\n    trackPage: trackPage,\n    trackEvent: trackEvent,\n    trackEventLater: trackEventLater,\n    setPageContext: setPageContext,\n    getApi: getApi\n};\nfunction trackPage(config) {\n    return push([types_1.PAGE, config]);\n}\nexports.trackPage = trackPage;\n;\nfunction trackEvent(config) {\n    return push([types_1.EVENT, config]);\n}\nexports.trackEvent = trackEvent;\n;\nfunction trackEventLater(config) {\n    return push([types_1.EVENT_LATER, config]);\n}\nexports.trackEventLater = trackEventLater;\n;\nfunction setPageContext(key, value) {\n    return push([types_1.CONFIG, getContextConfig(key, value)]);\n}\nexports.setPageContext = setPageContext;\n;\nfunction getApi(callback) {\n    return push([types_1.GET_API, callback]);\n}\nexports.getApi = getApi;\n;\nfunction _getBeacons() {\n    return window[types_1.WINDOW_KEY];\n}\nexports._getBeacons = _getBeacons;\n;\n//# sourceMappingURL=index.js.map","deps":{"../types":"666a79f70f79475f4f34b8ad874671992c0eaa51c6d5eeee28b38597d00cb5bf"},"file":"/home/node/src/node_modules/@finn-no/analytics/lib/client/index.js","index":1,"indexDeps":{"../types":2}}
,
{"id":"666a79f70f79475f4f34b8ad874671992c0eaa51c6d5eeee28b38597d00cb5bf","source":"\"use strict\";\nexports.WINDOW_KEY = '__analyticsQueue';\nexports.EVENT = 'event';\nexports.PAGE = 'page';\nexports.CONFIG = 'config';\nexports.EVENT_LATER = 'event-later';\nexports.GET_API = 'get-api';\n//# sourceMappingURL=types.js.map","deps":{},"file":"/home/node/src/node_modules/@finn-no/analytics/lib/types.js","index":2,"indexDeps":{}}
,
{"id":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a","source":"'use strict';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar index = createCommonjsModule(function (module, exports) {\n'use strict';\n\nexports.escape = function (input) {\n\treturn input.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n};\n\nexports.unescape = function (input) {\n\treturn input.replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&#39;/g, '\\'').replace(/&quot;/g, '\"').replace(/&amp;/g, '&');\n};\n\nexports.escapeTag = function (input) {\n\tvar output = input[0];\n\tfor (var i = 1; i < arguments.length; i++) {\n\t\toutput = output + exports.escape(arguments[i]) + input[i];\n\t}\n\treturn output;\n};\n\nexports.unescapeTag = function (input) {\n\tvar output = input[0];\n\tfor (var i = 1; i < arguments.length; i++) {\n\t\toutput = output + exports.unescape(arguments[i]) + input[i];\n\t}\n\treturn output;\n};\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\n/**\n * Create an element.\n *\n * @param {boolean} safeContent If content is safe to fully unescape\n * @param {String} name The element type name, plus optional classes\n * @param {Object} attributes The element's attributes\n * @param {...any} content The element's content\n */\nfunction createElement(safeContent, name, attributes) {\n    if (typeof name != 'string') {\n        throw new TypeError('The name argument must be a string');\n    }\n\n    var defaultNamespace = document.documentElement.namespaceURI;\n\n    // Handle class names shortcut\n\n    var _name$split = name.split('.'),\n        _name$split2 = _toArray(_name$split),\n        qName = _name$split2[0],\n        classes = _name$split2.slice(1);\n\n    var _getNamespaceParts = getNamespaceParts(qName),\n        _getNamespaceParts$na = _getNamespaceParts.namespace,\n        namespace = _getNamespaceParts$na === undefined ? defaultNamespace : _getNamespaceParts$na,\n        localName = _getNamespaceParts.localName;\n\n    var ele = document.createElementNS(namespace, localName);\n\n    if (classes.length) {\n        var _ele$classList;\n\n        (_ele$classList = ele.classList).add.apply(_ele$classList, _toConsumableArray(classes));\n    }\n\n    if (attributes != null) {\n        if ((typeof attributes === 'undefined' ? 'undefined' : _typeof(attributes)) != 'object') {\n            throw new TypeError('The attributes argument must be an object');\n        }\n\n        if (attributes instanceof Node) {\n            throw new TypeError('The attributes argument cannot be a Node. Did you forget to pass attributes?');\n        }\n\n        Object.entries(attributes).forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                qName = _ref2[0],\n                value = _ref2[1];\n\n            if (value !== null && value !== false) {\n                if (value === true) {\n                    value = ''; // Treat as boolean attribute\n                }\n\n                var _getNamespaceParts2 = getNamespaceParts(qName),\n                    _namespace = _getNamespaceParts2.namespace,\n                    _localName = _getNamespaceParts2.localName;\n\n                if (_localName.startsWith('on') && typeof value == 'function') {\n                    ele.addEventListener(_localName.slice(2), value);\n                    return;\n                }\n\n                // setAttributeNS() with the HTML namespace doesn't set IDL attributes\n                if (_namespace) {\n                    ele.setAttributeNS(_namespace, _localName, value);\n                } else {\n                    ele.setAttribute(_localName, value);\n                }\n            }\n        });\n    }\n\n    for (var _len = arguments.length, content = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        content[_key - 3] = arguments[_key];\n    }\n\n    content.filter(function (value) {\n        return value !== null;\n    }).reduce(function (prev, curr) {\n        return prev.concat(curr);\n    }, []) // flatten\n    .forEach(function (value) {\n        return ele.appendChild(toNode(value));\n    });\n    ele.normalize();\n\n    function toNode(value) {\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n            case 'boolean':\n            case 'number':\n                return document.createTextNode(value.toString());\n            case 'string':\n                value = handleEscapedChars(value);\n                return document.createTextNode(value.toString());\n\n            case 'undefined':\n                return document.createTextNode('undefined');\n\n            default:\n                if (value instanceof Node) {\n                    return value;\n                }\n        }\n\n        throw new TypeError('Argument of type \\'' + (typeof value === 'undefined' ? 'undefined' : _typeof(value)) + '\\' cannot be used as content.');\n    }\n\n    function handleEscapedChars(v) {\n        var regExpInEscapedChar = /&#.*;/;\n        if (safeContent && regExpInEscapedChar.test(v)) {\n            var tmpEle = document.createElement('span');\n            tmpEle.innerHTML = v;\n            return tmpEle.textContent;\n        } else {\n            return index.unescape(v);\n        }\n    }\n\n    function getNamespace(prefix) {\n        switch (prefix) {\n            case 'html':\n                return 'http://www.w3.org/1999/xhtml';\n            case 'svg':\n                return 'http://www.w3.org/2000/svg';\n            case 'xlink':\n                return 'http://www.w3.org/1999/xlink';\n        }\n    }\n\n    function getNamespaceParts(qName) {\n        if (qName.indexOf(':') !== -1) {\n            var _qName$split = qName.split(':'),\n                _qName$split2 = _slicedToArray(_qName$split, 2),\n                prefix = _qName$split2[0],\n                _localName2 = _qName$split2[1];\n\n            var _namespace2 = getNamespace(prefix);\n            if (!_namespace2) {\n                throw Error('No namespace found for prefix \"' + prefix + '\"');\n            }\n            return { namespace: _namespace2, localName: _localName2 };\n        }\n\n        return { localName: qName };\n    }\n    return ele;\n}\n\n/* eslint-env node */\nmodule.exports = createElement.bind(null, false);\n// only use createElementFromSafeContent when content is from a secure source\nmodule.exports.createElementFromSafeContent = createElement.bind(null, true);\n//# sourceMappingURL=index.js.map\n","deps":{},"file":"/home/node/src/node_modules/@finn-no/create-element/index.js","index":3,"indexDeps":{}}
,
{"id":"2d888a058b5991d476e21196c58439ca95eab56812354f1dc7e6e8aacfdde797","source":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = search;\n\nvar _suggestionsDropdown = require('@finn-no/suggestions-dropdown');\n\nvar _suggestionsDropdown2 = _interopRequireDefault(_suggestionsDropdown);\n\nvar _createElement = require('@finn-no/create-element');\n\nvar _createElement2 = _interopRequireDefault(_createElement);\n\nvar _analytics = require('@finn-no/analytics');\n\nvar _analytics2 = _interopRequireDefault(_analytics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction search(form, streamingSuggestUrl, suggestUrl, client) {\n    var isGlobal = form.hasAttribute('data-global');\n    var isDropdown = form.hasAttribute('data-is-dropdown');\n    var where = form.getAttribute('data-where');\n    var beta = form.getAttribute('data-beta');\n    var searchKeys = form.getAttribute('data-search-keys') || '';\n    var spinnerEle = form.querySelector('[data-spinner]');\n    var options = getRenderOptions();\n    var inputEle = form.elements.q;\n    var noHitsEle = (0, _createElement2.default)('div.r-pam.t4.centerify', null, 'Ingen treff');\n\n    var bapOpenFiltersOverlayEnabled = form.hasAttribute('data-bap-open-filters-overlay-enabled');\n\n    var req = void 0;\n    var canceler = void 0; // XHR abort\n    var dropdownEle = void 0;\n    var lastTerm = '';\n    var items = [];\n\n    inputEle.addEventListener('input', trackInput);\n\n    var suggestionsDropdown = void 0;\n    if ('EventSource' in window) {\n        suggestionsDropdown = new _suggestionsDropdown2.default(inputEle, streamFetch, streamAbort, options);\n\n        // Buffer the streaming results to avoid re-rendering too often\n        render = throttle(render, 50);\n    } else {\n        suggestionsDropdown = new _suggestionsDropdown2.default(inputEle, fetch, abort, options);\n    }\n\n    if (isGlobal) {\n        inputEle.selectionStart = inputEle.value.length;\n        suggestionsDropdown.fetch(inputEle.value, suggestionsDropdown.show);\n    }\n\n    function streamFetch(term, onsuccess) {\n        // if (term.trim() == lastTerm.trim()) {\n        //     return;\n        // }\n        lastTerm = term;\n\n        streamAbort();\n\n        var url = createFetchUrl(streamingSuggestUrl, term);\n\n        try {\n            req = new EventSource(url, { withCredentials: true });\n        } catch (e) {\n            // e.g. no CORS\n            suggestionsDropdown.fetch = fetch;\n            suggestionsDropdown.abort = abort;\n            fetch(term, onsuccess);\n            return;\n        }\n\n        req.addEventListener('message', function (e) {\n            if (e.data === '') {\n                if (items.length === 0) {\n                    handleEmptyResult();\n                }\n                streamAbort();\n                return;\n            }\n\n            try {\n                items.push(JSON.parse(e.data));\n            } catch (e) {\n                return;\n            }\n\n            if (isGlobal) {\n                noHitsEle.remove();\n            }\n            var groups = groupItems(items);\n            sortResultsInGroups(groups);\n            sortGroups(groups);\n            render(groups, onsuccess);\n        });\n    }\n\n    function fetch(term, onsuccess) {\n        // if (term.trim() == lastTerm.trim()) {\n        //     return;\n        // }\n        lastTerm = term;\n\n        abort();\n\n        var xhr = new XMLHttpRequest();\n\n        xhr.open('GET', createFetchUrl(suggestUrl, term));\n        xhr.setRequestHeader('Accept', 'application/json');\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        xhr.withCredentials = true;\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === XMLHttpRequest.DONE && xhr.responseText) {\n                var _items = JSON.parse(xhr.responseText);\n\n                if (_items.length === 0) {\n                    handleEmptyResult();\n                } else {\n                    if (isGlobal) {\n                        noHitsEle.remove();\n                    }\n                    var groups = groupItems(_items);\n                    sortResultsInGroups(groups);\n                    sortGroups(groups);\n                    render(groups, onsuccess);\n                }\n            }\n        };\n\n        xhr.send();\n\n        canceler = function canceler() {\n            return xhr.abort();\n        };\n    }\n\n    function createFetchUrl(base, term) {\n        var url = new URL(base);\n\n        url.searchParams.set('dropdown', !isGlobal);\n        url.searchParams.set('searchKeys', searchKeys);\n        url.searchParams.set('client', client);\n        url.searchParams.set('beta', beta);\n        url.searchParams.set('where', where);\n        url.searchParams.set('term', term);\n\n        return url.href;\n    }\n\n    function handleEmptyResult() {\n        suggestionsDropdown.hide();\n        if (isGlobal) {\n            form.querySelector('[data-dropdown-insertion]').append(noHitsEle);\n        }\n    }\n\n    function streamAbort() {\n        if (req) {\n            req.close();\n            reset();\n        }\n    }\n\n    function abort() {\n        if (canceler) {\n            canceler();\n            reset();\n            canceler = null;\n        }\n    }\n\n    function reset() {\n        req = null;\n        if (items.length > 0) {\n            setStatus(items.length + ' forslag');\n            items.length = 0;\n        }\n        hideSpinner();\n    }\n\n    function setStatus(text) {\n        if (suggestionsDropdown.setStatus) {\n            suggestionsDropdown.setStatus(text);\n        }\n    }\n\n    function groupItems(items) {\n        var groups = [];\n        items.forEach(function (item) {\n            var group = groups.filter(function (group) {\n                return group.groupingHeader === item.groupingHeader;\n            })[0];\n            if (!group) {\n                group = {\n                    type: item.resultType,\n                    groupingHeader: item.groupingHeader,\n                    description: item.groupingHeader,\n                    groupOrder: item.groupOrder,\n                    itemOrder: item.itemOrder,\n                    results: []\n                };\n                groups.push(group);\n            }\n\n            var linkExists = group.results.some(function (result) {\n                return result.url && item.url && result.url.toLowerCase() === item.url.toLowerCase();\n            });\n\n            // We only display one item with the same title in a group\n            if (!linkExists) {\n                group.results.push(item);\n            }\n        });\n        return groups;\n    }\n\n    function sortGroups(groups) {\n        groups.sort(function (a, b) {\n            return b.groupOrder - a.groupOrder;\n        });\n    }\n\n    function sortResultsInGroups(groups) {\n        groups.forEach(function (group) {\n            group.results.sort(function (a, b) {\n                return b.itemOrder - a.itemOrder;\n            });\n        });\n    }\n\n    function render(groups, onsuccess) {\n        dropdownEle = (0, _createElement2.default)('div.t4', null, groups.map(renderGroupData));\n        dropdownEle.classList.toggle('dropdown', isDropdown);\n        dropdownEle.addEventListener('touchmove', function () {\n            inputEle.blur();\n        });\n        onsuccess(dropdownEle);\n        if (items.length === 0) {\n            setStatus(groups.map(function (group) {\n                return group.results.length;\n            }).reduce(function (a, b) {\n                return a + b;\n            }, 0) + ' forslag');\n        }\n    }\n\n    function renderGroupData(group) {\n        if (where === 'BROWSE') {\n            switch (group.type) {\n                case 'COMPANYPROFILE':\n                    return renderGroupCompanyProfile(group);\n\n                case 'SEARCH_FINN':\n                    return renderGroupSearchFinn(group);\n\n                case 'AD':\n                    return renderGroupAd(group);\n\n                default:\n                    return renderGroup(group);\n            }\n        }\n\n        switch (group.type) {\n            case 'AD':\n                return renderGroupAd(group);\n\n            case 'COMMAND':\n                return renderGroupCommand(group);\n\n            case 'SEARCH_FINN':\n                return renderGroupSearchFinn(group);\n\n            default:\n                return renderGroup(group);\n        }\n    }\n\n    function renderGroup(group) {\n        return (0, _createElement2.default)('div.dropdown-section.r-pvm', { 'data-group-type': group.type }, (0, _createElement2.default)('h2.man.dropdown-heading.phs.truncate.licorice', null, group.description),\n        // role=presentation here is because of a VoiceOver bug which doesn't read items unless we do this\n        (0, _createElement2.default)('ol.man.dropdown-result-list', { role: 'presentation' }, group.results.map(renderResult)));\n    }\n\n    function renderResult(result, index) {\n        var title = [];\n        if (result.titleSupplement) {\n            if (result.title) {\n                if (result.secondaryTitle) {\n                    title.push(result.secondaryTitle, '–');\n                }\n                title.push(result.titleSupplement, result.title);\n            } else {\n                title.push(result.titleSupplement);\n                if (result.secondaryTitle) {\n                    title.push(result.secondaryTitle);\n                }\n            }\n        } else if (result.title) {\n            if (result.secondaryTitle) {\n                title.push(result.secondaryTitle, '–');\n            }\n            title.push(result.title);\n        } else if (result.secondaryTitle) {\n            title.push(result.secondaryTitle);\n        }\n        var ariaTitle = [result.groupingHeader, title.join(' '), result.info1, result.info2].filter(function (v) {\n            return v != null;\n        }).join(', ');\n        return (0, _createElement2.default)('li.phs.dropdown-item', { 'aria-label': ariaTitle }, (0, _createElement2.default)('a.dropdown-link', {\n            'href': result.url,\n            'data-automation-id': 'global_search_suggestion',\n            'data-group-index': index,\n            'data-track': JSON.stringify(result.data.track),\n            'aria-label': ariaTitle\n        }, renderTitle(result.title, result.titleSupplement, result.secondaryTitle), result.info1 ? renderInfo1(result.info1) : null, ' ', result.info2 ? renderInfo2(result.info2) : null));\n    }\n\n    function renderGroupAd(group) {\n        return (0, _createElement2.default)('div.dropdown-section.r-pvm', { 'data-group-type': group.type }, (0, _createElement2.default)('ol.man.dropdown-result-list', { role: 'presentation', style: 'width: 100%' }, group.results.map(renderResultAd)));\n    }\n\n    function renderResultAd(result, index) {\n        return (0, _createElement2.default)('li.phs.dropdown-item', null, (0, _createElement2.default)('a.dropdown-link.dropdown-link-ad', {\n            'href': result.url,\n            'data-automation-id': 'global_search_suggestion',\n            'data-group-index': index,\n            'data-choose-me': result.chooseMe,\n            'data-track': JSON.stringify(result.data.track)\n        }, (0, _createElement2.default)('div.autocomplete-result-image.flex-no-shrink.mvt', null, (0, _createElement2.default)('img.blockify', {\n            src: result.imgUrl.replace('mmo', 'dynamic/300x225c'),\n            width: '100',\n            height: '75'\n        })), (0, _createElement2.default)('div.autocomplete-result-text.plm.truncate', null, renderTitle(result.title, result.titleSupplement), renderInfo1(result.info1))));\n    }\n\n    function renderGroupCompanyProfile(group) {\n        var groupingHeader = group.groupingHeader ? group.groupingHeader : 'Bedriftsprofiler';\n        return (0, _createElement2.default)('div.dropdown-section.r-pvm', { 'data-group-type': group.type }, (0, _createElement2.default)('h2.man.dropdown-heading.phs.truncate.licorice', null, groupingHeader), (0, _createElement2.default)('ol.man.dropdown-result-list', { role: 'presentation', style: 'width: 100%' }, group.results.map(renderResultCompanyProfile)));\n    }\n\n    function renderResultCompanyProfile(result, index) {\n        return (0, _createElement2.default)('li.phs.dropdown-item', null, (0, _createElement2.default)('a.dropdown-link.dropdown-link-ad', {\n            'href': result.url,\n            'data-group-index': index,\n            'data-track': JSON.stringify(result.data.track)\n        }, (0, _createElement2.default)('div.autocomplete-result-image.flex-no-shrink.bat.mvt.relative', { style: 'width: 100px; height: 75px; background: #fff;' }, (0, _createElement2.default)('img.blockify.centered-element', {\n            src: result.imgUrl.replace('640w', '240w'),\n            style: 'max-height: 100%; padding: 5px;'\n        })), (0, _createElement2.default)('div.autocomplete-result-text.plm.truncate', null, renderTitle(result.title, result.titleSupplement), result.info1 ? renderInfo1(result.info1) : null, result.info2 ? renderInfo2(result.info2) : null)));\n    }\n\n    function renderGroupCommand(group) {\n        return (0, _createElement2.default)('div.dropdown-section.r-pvm', null, [(0, _createElement2.default)('h2.man.dropdown-heading.phs.truncate.licorice', null, group.description), (0, _createElement2.default)('ol.man.dropdown-result-list', { role: 'presentation' }, group.results.map(renderResultCommand))]);\n    }\n\n    function renderResultCommand(result) {\n        return (0, _createElement2.default)('li.phs.truncate.dropdown-item', null, renderTitle(result.title, result.titleSupplement), renderInfo1(result.info1));\n    }\n\n    function renderGroupSearchFinn(group) {\n        return (0, _createElement2.default)('div.dropdown-section.r-pvm', { 'data-group-type': group.type }, (0, _createElement2.default)('ol.man.dropdown-result-list', { role: 'presentation' }, group.results.map(renderResultSearchFinn)));\n    }\n\n    function renderResultSearchFinn(result, index) {\n        var url = new URL(result.url);\n        return (0, _createElement2.default)('li.phs.dropdown-item', null, (0, _createElement2.default)('a.dropdown-link', {\n            'href': url.href,\n            'data-group-index': index,\n            'data-track': JSON.stringify(result.data.track)\n        }, (0, _createElement2.default)('svg:svg.valign-middle', { width: '18', height: '18', viewBox: '19.5 119.5 62 62' }, (0, _createElement2.default)('svg:path', {\n            d: 'M65.8 146.083c0-10.823-8.778-19.6-19.616-19.6-10.83 0-19.614 8.776-19.614 19.6 0 ' + '10.84 8.784 19.616 19.614 19.616 10.837 0 19.615-8.778 19.615-19.617z',\n            fill: 'none'\n        }), (0, _createElement2.default)('svg:path', {\n            d: 'M80.982 175.818l-13.92-13.924c3.336-4.393 5.316-9.867 5.316-15.812 0-14.457-11.725' + '-26.177-26.195-26.177-14.457 0-26.184 11.72-26.184 26.177 0 14.472 11.726 26.196 ' + '26.183 26.196 5.93 0 11.408-1.983 15.794-5.307L75.9 180.894l5.082-5.075zM26.57 ' + '146.083c0-10.823 8.784-19.6 19.614-19.6 10.835 0 19.615 8.776 19.615 19.6 0 ' + '10.84-8.778 19.616-19.616 19.616-10.83 0-19.614-8.778-19.614-19.617z',\n            fill: '#9ba8b1'\n        })), ' ', (0, _createElement2.default)('span.valign-middle.autocomplete-result-text.licorice', { 'data-title': '' }, renderHighlightedTerm(result.titleSupplement))));\n    }\n\n    function renderTitle(text, prefix, secondaryTitle) {\n        text = text || '';\n        if (prefix) {\n            return (0, _createElement2.default)('span.licorice', { 'title': prefix + text, 'data-title': '' }, renderHighlightedTerm(prefix), text ? renderMainTitle(text, secondaryTitle) : null);\n        }\n        return (0, _createElement2.default)('span', { 'title': (secondaryTitle ? secondaryTitle + (text ? ' – ' : '') : '') + text, 'data-title': '' }, secondaryTitle ? secondaryTitle + (text ? ' – ' : '') : null, text);\n    }\n\n    function renderMainTitle(text, secondaryTitle) {\n        var mainTitle = (secondaryTitle ? secondaryTitle + ' \\u2013 ' : '') + text;\n        return (0, _createElement2.default)('span.primary-blue', null, mainTitle);\n    }\n\n    function renderInfo1(text) {\n        return (0, _createElement2.default)('p.man.licorice.smalltext.truncate', { title: text }, renderHighlightedTerm(text));\n    }\n\n    function renderInfo2(text) {\n        return (0, _createElement2.default)('span.licorice.smalltext', null, text);\n    }\n\n    function renderHighlightedTerm(text) {\n        // Turn \"Term Term1 \" into /(^|\\s)(Term1|Term)/, the terms being escaped.\n        // `(^|\\s)` is added to only highlight beginning of words.\n        var pattern = '(^|\\\\s)(' + lastTerm.trim().split(/\\s+/)\n        // Sort by length (longest first) since the matching is eager, e.g.:\n        //  Bad:  \"t t1\".match(/t|t1/gi) -> [\"t\", \"t\"]\n        //  Good: \"t t1\".match(/t1|t/gi) -> [\"t\", \"t1\"]\n        .sort(function (term1, term2) {\n            return term2.length - term1.length;\n        }).map(escapeRegExp).join('|') + ')';\n        var termsRegExp = new RegExp(pattern, 'gi');\n        var termsToHighlight = text.match(termsRegExp);\n        if (!termsToHighlight) {\n            return [text];\n        }\n\n        termsToHighlight = termsToHighlight.map(function (s) {\n            return s.trim();\n        }); // some matches might include whitespace\n\n        return text.split(termsRegExp).filter(Boolean).reduce(function (prev, curr) {\n            return prev.concat(termsToHighlight.indexOf(curr) === -1 ? curr : (0, _createElement2.default)('b', null, curr));\n        }, []);\n    }\n\n    function getRenderOptions() {\n        return {\n            updateValue: false,\n            hideOnDeactivation: isDropdown,\n            selectedClass: 'bg-ice',\n            dropdownClass: 'dropdown-container',\n            insertionElement: form.querySelector('[data-dropdown-insertion]'),\n            timeout: 0,\n            onsubmit: function onsubmit(item, ele) {\n                if (!item || item.length < 1) {\n                    return;\n                }\n\n                if (!dropdownEle) {\n                    form.submit();\n                    return;\n                }\n\n                var chooseMeEle = dropdownEle.querySelector('[data-choose-me]');\n                if (!ele && chooseMeEle) {\n                    trackPickedItem(dropdownEle, chooseMeEle);\n                    trackViewedItems(dropdownEle);\n                    var url = new URL(chooseMeEle.href);\n                    if (bapOpenFiltersOverlayEnabled) {\n                        url.searchParams.set('filters', '');\n                    }\n                    window.location = url.href;\n                    return true;\n                }\n\n                var a = ele && ele.querySelector('a');\n                if (a && a.href) {\n                    trackPickedItem(dropdownEle, a);\n                    trackViewedItems(dropdownEle);\n                    var _url = new URL(a.href);\n                    if (bapOpenFiltersOverlayEnabled) {\n                        _url.searchParams.set('filters', '');\n                    }\n                    window.location = _url.href;\n                    return true;\n                }\n\n                trackSubmit();\n                form.submit();\n            },\n            onclose: function onclose() {\n                if (render.cancel) {\n                    render.cancel();\n                }\n            },\n            contentGetter: function contentGetter(ele) {\n                return (ele.querySelector('[data-title]') || ele).textContent;\n            }\n        };\n    }\n\n    function hideSpinner() {\n        if (spinnerEle) {\n            spinnerEle.remove();\n        }\n    }\n\n    function trackSubmit() {\n        _analytics2.default.trackEventLater({\n            analyticsName: 'search.search-for-something.executed',\n            eventFlags: 'success',\n            stringValue: getTrackingLocation(where, searchKeys) + ',type:freetext'\n        });\n    }\n\n    function trackInput(event) {\n        _analytics2.default.trackEvent({\n            analyticsName: 'search.search-for-something.typed',\n            eventFlags: 'start',\n            stringValue: getTrackingLocation(where, searchKeys)\n        });\n        event.target.removeEventListener('input', trackInput);\n    }\n\n    function trackPickedItem(dropdownEle, ele) {\n        var index = Array.from(dropdownEle.querySelectorAll('[data-track]')).indexOf(ele);\n        var data = JSON.parse(ele.getAttribute('data-track'));\n        var groupIndex = JSON.parse(ele.getAttribute('data-group-index'));\n        data['searchfront.index'] = index + 1;\n        data['searchfront.groupindex'] = parseInt(groupIndex) + 1;\n        _analytics2.default.trackEventLater({\n            analyticsName: 'search.search-for-something.dropdown-item-picked',\n            eventFlags: 'success',\n            numberValue: index + 1,\n            stringValue: getTrackingLocation(where, searchKeys) + ',type:' + data['searchfront.type']\n        });\n        _analytics2.default.trackEventLater({\n            ecType: 'SEARCH',\n            ecCategory: 'searchfront.click',\n            eventData: data\n        });\n    }\n\n    function trackViewedItems(ele) {\n        var itemEles = ele.querySelectorAll('[data-track]');\n        Array.from(itemEles).forEach(function (itemEle, i) {\n            var data = JSON.parse(itemEle.getAttribute('data-track'));\n            data['searchfront.index'] = i + 1;\n            var groupIndex = itemEle.getAttribute('data-group-index');\n            data['searchfront.groupindex'] = parseInt(groupIndex) + 1;\n            _analytics2.default.trackEventLater({\n                ecType: 'SEARCH',\n                ecCategory: 'searchfront.view',\n                eventData: data\n            });\n        });\n    }\n\n    function getTrackingLocation(where, searchKeys) {\n        if (searchKeys === 'SEARCH_ID_JOB_FULLTIME') {\n            return 'location:jobfront';\n        } else if (searchKeys === 'SEARCH_ID_BAP_ALL') {\n            return 'location:bapfront';\n        }\n        return 'location:' + where.toLowerCase();\n    }\n\n    /* eslint-disable */\n    // https://remysharp.com/2010/07/21/throttling-function-calls\n    function throttle(fn, threshhold, scope) {\n        threshhold || (threshhold = 250);\n        var last, deferTimer;\n\n        var throttledFunction = function throttledFunction() {\n            var context = scope || this;\n\n            var now = +new Date(),\n                args = arguments;\n            if (last && now < last + threshhold) {\n                // hold on to it\n                clearTimeout(deferTimer);\n                deferTimer = setTimeout(function () {\n                    last = now;\n                    fn.apply(context, args);\n                }, threshhold);\n            } else {\n                last = now;\n                deferTimer = setTimeout(function () {\n                    fn.apply(context, args);\n                }, threshhold);\n            }\n        };\n\n        throttledFunction.cancel = function () {\n            clearTimeout(deferTimer);\n        };\n\n        return throttledFunction;\n    }\n\n    function escapeRegExp(s) {\n        // https://github.com/benjamingr/RegExp.escape/blob/master/polyfill.js\n        return String(s).replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n    /* eslint-enable */\n}\nmodule.exports = exports['default'];\n\n//# sourceMappingURL=index.js.map","deps":{"@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a","@finn-no/suggestions-dropdown":"66d70a4f1de07e5702ff0f5d3fd338f5b2bd16234d145f233a3ae4643ed0ad93","@finn-no/analytics":"1892a34e5d6b4ed6f915a394a6edd0a10cae9cfcc462d96105af4532898b7521"},"file":"/home/node/src/node_modules/@finn-no/frontpage-search/index.js","index":4,"indexDeps":{"@finn-no/create-element":3,"@finn-no/suggestions-dropdown":5,"@finn-no/analytics":1}}
,
{"id":"66d70a4f1de07e5702ff0f5d3fd338f5b2bd16234d145f233a3ae4643ed0ad93","source":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SuggestionsDropdown = function () {\n    function SuggestionsDropdown(inputEle, fetch, abort) {\n        var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n            contentGetter = _ref.contentGetter,\n            onsubmit = _ref.onsubmit,\n            onshow = _ref.onshow,\n            onclose = _ref.onclose,\n            _ref$timeout = _ref.timeout,\n            timeout = _ref$timeout === undefined ? 200 : _ref$timeout,\n            _ref$minimumTermLengt = _ref.minimumTermLength,\n            minimumTermLength = _ref$minimumTermLengt === undefined ? 2 : _ref$minimumTermLengt,\n            _ref$dropdownClass = _ref.dropdownClass,\n            dropdownClass = _ref$dropdownClass === undefined ? '' : _ref$dropdownClass,\n            _ref$selectedClass = _ref.selectedClass,\n            selectedClass = _ref$selectedClass === undefined ? 'suggestion-dropdown-item-selected' : _ref$selectedClass,\n            _ref$itemSelector = _ref.itemSelector,\n            itemSelector = _ref$itemSelector === undefined ? 'li' : _ref$itemSelector,\n            updateValue = _ref.updateValue,\n            hideOnDeactivation = _ref.hideOnDeactivation,\n            insertionElement = _ref.insertionElement;\n\n        _classCallCheck(this, SuggestionsDropdown);\n\n        if (!inputEle) {\n            throw Error('An input element must be specified.');\n        }\n\n        this.fetch = fetch;\n        this.abort = abort;\n        this.contentGetter = contentGetter || this._contentGetterDefault;\n        this.onsubmit = onsubmit;\n        this.onshow = onshow;\n        this.onclose = onclose;\n        this._timeout = timeout;\n        this._minimumTermLength = minimumTermLength;\n        this._dropdownClass = dropdownClass;\n        this._selectedClass = selectedClass;\n        this._itemSelector = itemSelector;\n        this._updateValue = updateValue !== false;\n        this._hideOnDeactivation = hideOnDeactivation !== false;\n        this._insertionElement = insertionElement;\n\n        this._inputEle = inputEle;\n        this._lastEle = null;\n        this._dropdownEle = null;\n        this._statusEle = null;\n        this._selectedItem = null;\n        this._timeoutId = null;\n        this._navItems = null;\n        this._navItemIndex = null;\n\n        this._inputEle.setAttribute('role', 'combobox');\n        this._inputEle.setAttribute('aria-autocomplete', 'list');\n        this._inputEle.setAttribute('aria-expanded', 'false');\n\n        this.show = this.show.bind(this);\n        this.hide = this.hide.bind(this);\n        this._handleInput = this._handleInput.bind(this);\n        this._handleKeyDown = this._handleKeyDown.bind(this);\n        this._handleFocus = this._handleFocus.bind(this);\n        this._handleClick = this._handleClick.bind(this);\n\n        inputEle.addEventListener('input', this._handleInput);\n        inputEle.addEventListener('keydown', this._handleKeyDown);\n        inputEle.addEventListener('focus', this._handleFocus);\n    }\n\n    /**\n     * TODO\n     * @parameter term\n     * @parameter callback\n     */\n\n\n    _createClass(SuggestionsDropdown, [{\n        key: 'fetch',\n        value: function fetch() {}\n\n        /**\n         * TODO\n         */\n\n    }, {\n        key: 'abort',\n        value: function abort() {}\n\n        /**\n         * Getter for the content that should be passed to onsubmit.\n         * @parameter itemEle\n         */\n\n    }, {\n        key: 'contentGetter',\n        value: function contentGetter() {}\n\n        /**\n         * TODO\n         * @parameter item\n         * @parameter itemEle\n         */\n\n    }, {\n        key: 'onsubmit',\n        value: function onsubmit() {}\n\n        /**\n         * Called every time show() is run\n         */\n\n    }, {\n        key: 'onshow',\n        value: function onshow() {}\n\n        /**\n         * Called every time close() is run\n         */\n\n    }, {\n        key: 'onclose',\n        value: function onclose() {}\n    }, {\n        key: 'show',\n        value: function show(ele) {\n            if (!ele || document.activeElement !== this._inputEle) {\n                return;\n            }\n\n            this._lastEle = ele;\n\n            if (!this._dropdownEle) {\n                this._dropdownEle = document.createElement('div');\n                this._dropdownEle.className = 'suggestion-dropdown ' + this._dropdownClass;\n                this._dropdownEle.setAttribute('role', 'listbox');\n                this._dropdownEle.id = 'listbox-' + Math.floor(Math.random() * 0xFFFFFFF);\n            }\n\n            while (this._dropdownEle.firstChild) {\n                this._dropdownEle.firstChild.remove();\n            }\n\n            this._dropdownEle.append(ele);\n\n            this._inputEle.setAttribute('aria-expanded', 'true');\n\n            // Reset the selected item in case one exists when show() is called\n            this._selectedItem = null;\n            this._inputEle.removeAttribute('aria-activedescendant');\n            this._inputEle.removeAttribute('aria-owns');\n\n            this._navItems = this._dropdownEle.querySelectorAll(this._itemSelector);\n            [].concat(_toConsumableArray(this._navItems)).forEach(function (ele) {\n                if (!ele.hasAttribute('role')) {\n                    ele.setAttribute('role', 'option');\n                }\n                if (!ele.id) {\n                    ele.id = 'option-' + Math.floor(Math.random() * 0xFFFFFFF);\n                }\n            });\n\n            if (this._insertionElement) {\n                this._insertionElement.append(this._dropdownEle);\n            } else {\n                this._inputEle.after(this._dropdownEle);\n            }\n\n            // If we call show() when the dropdown is already shown (e.g. when\n            // streaming results), we select the same index again.\n            if (this._navItemIndex != null) {\n                this.highlightItem(this._navItemIndex);\n            }\n\n            document.addEventListener('click', this._handleClick, true);\n            [].concat(_toConsumableArray(document.querySelectorAll('iframe'))).forEach(function (ele) {\n                ele.style.pointerEvents = 'none';\n            });\n            if (this.onshow) {\n                this.onshow();\n            }\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            if (this._statusEle) {\n                this._statusEle.remove();\n                this._statusEle = null;\n            }\n            if (!this._dropdownEle) {\n                return;\n            }\n            this._dropdownEle.remove();\n            this._inputEle.setAttribute('aria-expanded', 'false');\n            this._inputEle.removeAttribute('aria-owns');\n            this._inputEle.removeAttribute('aria-activedescendant');\n            this._dropdownEle = null;\n            this._timeoutId = null;\n            this._navItems = null;\n            this._navItemIndex = null;\n            if (this._selectedItem) {\n                this._selectedItem.classList.remove(this._selectedClass);\n                this._selectedItem = null;\n            }\n            document.removeEventListener('click', this._handleClick, true);\n            [].concat(_toConsumableArray(document.querySelectorAll('iframe'))).forEach(function (ele) {\n                ele.style.pointerEvents = '';\n            });\n            if (this.onclose) {\n                this.onclose();\n            }\n        }\n    }, {\n        key: '_handleFocus',\n        value: function _handleFocus() {\n            if (this._lastEle) {\n                this.show(this._lastEle);\n            }\n        }\n    }, {\n        key: '_handleInput',\n        value: function _handleInput() {\n            var _this = this;\n\n            var value = this._inputEle.value;\n            var term = value.replace(/\\s+/g, ' ').trim();\n            this._navItemIndex = null; // reset so that nothing gets selected on show()\n            this._inputEle.setAttribute('value', value); // For getting defaultValue later\n            this.abort();\n            window.clearTimeout(this._timeoutId);\n            if (this._getStringLength(term) >= this._minimumTermLength) {\n                this._timeoutId = window.setTimeout(function () {\n                    _this.fetch(term, _this.show.bind(_this));\n                }, this._timeout);\n            } else {\n                this._lastEle = null;\n                this.hide();\n            }\n        }\n    }, {\n        key: '_setValue',\n        value: function _setValue(value) {\n            if (this._updateValue) {\n                this._inputEle.value = value;\n            }\n        }\n    }, {\n        key: '_handleKeyDown',\n        value: function _handleKeyDown(event) {\n            if (event.metaKey || event.altKey || event.ctrlKey) {\n                return;\n            }\n\n            switch (this._getKey(event)) {\n                case 'Tab':\n                    if (this._hideOnDeactivation) {\n                        this.hide();\n                    }\n                    event.stopPropagation();\n                    return;\n\n                case 'Enter':\n                    {\n                        var isHandled = this._submitSelection();\n                        if (!isHandled) {\n                            this.hide();\n                            this._inputEle.blur();\n                            return;\n                        }\n                        break;\n                    }\n\n                case 'Escape':\n                    this._inputEle.value = this._inputEle.defaultValue;\n                    if (!this._selectedItem) {\n                        this._inputEle.select();\n                    }\n                    this.hide();\n                    break;\n\n                case 'ArrowUp':\n                    this._selectPrevious();\n                    break;\n\n                case 'ArrowDown':\n                    if (this._navItems) {\n                        this._selectNext();\n                    } else if (this._lastEle) {\n                        this.show(this._lastEle);\n                    }\n                    break;\n\n                case 'PageUp':\n                    this._selectFirst();\n                    break;\n\n                case 'PageDown':\n                    this._selectLast();\n                    break;\n\n                default:\n                    return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }, {\n        key: '_handleClick',\n        value: function _handleClick(event) {\n            if (event.button !== 0 || event.metaKey || event.shiftKey || event.ctrlKey || event.altKey) {\n                return;\n            }\n\n            if (event.target === this._inputEle || event.target === this._dropdownEle) {\n                return;\n            } else if (this._dropdownEle.contains(event.target)) {\n                event.stopPropagation();\n                var item = event.target.closest(this._itemSelector);\n                if (!item) {\n                    return;\n                }\n                this._selectedItem = item;\n                var isHandled = this._submitSelection();\n                if (isHandled) {\n                    event.preventDefault();\n                    return;\n                }\n                this._inputEle.blur();\n            }\n\n            if (this._hideOnDeactivation) {\n                this.hide();\n            }\n        }\n    }, {\n        key: 'highlightItem',\n        value: function highlightItem(index) {\n            if (!this._navItems) {\n                return;\n            }\n\n            if (this._navItemIndex != null) {\n                var item = this._navItems[this._navItemIndex];\n                item.classList.remove(this._selectedClass);\n                item.removeAttribute('aria-selected');\n            }\n\n            this._navItemIndex = index;\n            this._selectedItem = this._navItems[index];\n\n            if (!this._selectedItem) {\n                this._inputEle.removeAttribute('aria-activedescendant');\n                this._inputEle.removeAttribute('aria-owns');\n                this._inputEle.value = this._inputEle.defaultValue;\n                this._navItemIndex = null;\n                return;\n            }\n\n            this._inputEle.setAttribute('aria-owns', this._dropdownEle.id);\n            this._inputEle.setAttribute('aria-activedescendant', this._selectedItem.id);\n            this._selectedItem.setAttribute('aria-selected', 'true');\n            this._selectedItem.classList.add(this._selectedClass);\n        }\n    }, {\n        key: 'setStatus',\n        value: function setStatus(text) {\n            if (!this._dropdownEle) {\n                return;\n            }\n            if (!this._statusEle) {\n                this._statusEle = document.createElement('h2');\n                this._statusEle.className = 'screen-reader-only dropdown-status';\n                this._statusEle.setAttribute('role', 'status');\n                this._dropdownEle.before(this._statusEle);\n            }\n            this._statusEle.textContent = text;\n        }\n    }, {\n        key: '_selectItem',\n        value: function _selectItem(index) {\n            this.highlightItem(index);\n            if (this._selectedItem) {\n                this._setValue(this._getSelectedItemContent());\n            }\n        }\n    }, {\n        key: '_selectFirst',\n        value: function _selectFirst() {\n            if (!this._navItems) {\n                return;\n            }\n            this._selectItem(0);\n        }\n    }, {\n        key: '_selectLast',\n        value: function _selectLast() {\n            if (!this._navItems) {\n                return;\n            }\n            this._selectItem(this._navItems.length - 1);\n        }\n    }, {\n        key: '_selectPrevious',\n        value: function _selectPrevious() {\n            if (!this._navItems) {\n                return;\n            }\n            var index = this._navItemIndex == null ? this._navItems.length - 1 : this._navItemIndex - 1;\n            this._selectItem(index);\n        }\n    }, {\n        key: '_selectNext',\n        value: function _selectNext() {\n            if (!this._navItems) {\n                return;\n            }\n            var index = this._navItemIndex == null ? 0 : this._navItemIndex + 1;\n            this._selectItem(index);\n        }\n    }, {\n        key: '_submitSelection',\n        value: function _submitSelection() {\n            var isHandled = false;\n            var content = this._selectedItem ? this._getSelectedItemContent() : this._inputEle.value;\n\n            if (this.onsubmit) {\n                isHandled = this.onsubmit(content, this._selectedItem);\n            }\n\n            this._setValue(content);\n\n            return Boolean(isHandled);\n        }\n    }, {\n        key: '_getSelectedItemContent',\n        value: function _getSelectedItemContent() {\n            return this.contentGetter(this._selectedItem);\n        }\n    }, {\n        key: '_contentGetterDefault',\n        value: function _contentGetterDefault(ele) {\n            return ele.textContent;\n        }\n    }, {\n        key: '_getStringLength',\n        value: function _getStringLength(string) {\n            // https://mathiasbynens.be/notes/javascript-unicode#accounting-for-astral-symbols\n            return string.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n        }\n    }, {\n        key: '_getKey',\n        value: function _getKey(event) {\n            var key = event.key;\n            if (key) {\n                return {\n                    // These are renamed in the spec, but Firefox\n                    // still have the old names (and warns about it)\n                    Del: 'Delete',\n                    Esc: 'Escape',\n                    Left: 'ArrowLeft',\n                    Up: 'ArrowUp',\n                    Right: 'ArrowRight',\n                    Down: 'ArrowDown'\n                }[key] || key;\n            }\n\n            // Fall back to event.keyCode\n            var keyCode = event.keyCode;\n            return {\n                9: 'Tab',\n                13: 'Enter',\n                27: 'Escape',\n                33: 'PageUp',\n                34: 'PageDown',\n                37: 'ArrowLeft',\n                38: 'ArrowUp',\n                39: 'ArrowRight',\n                40: 'ArrowDown'\n            }[keyCode] || keyCode;\n        }\n    }]);\n\n    return SuggestionsDropdown;\n}();\n\nexports.default = SuggestionsDropdown;\nmodule.exports = exports['default'];\n\n//# sourceMappingURL=index.js.map","deps":{},"file":"/home/node/src/node_modules/@finn-no/suggestions-dropdown/index.js","index":5,"indexDeps":{}}
,
{"id":"81be46a7d42e3879307ccb9eb181627735cc2b06f7982c3bae44b6fb3741afa4","source":"/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState)\n\n\n  if (!loaded)\n  doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener)\n    loaded = 1\n    while (listener = fns.shift()) listener()\n  })\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn)\n  }\n\n});\n","deps":{},"file":"/home/node/src/node_modules/domready/ready.js","index":6,"indexDeps":{}}
,
{"id":"b09e75e191f9bc64b9d1e2329b45e718460140fe7421439ca997825ed6fb79a7","source":"'use strict';\n\n/**\n * Decorates a modal dialog with fullscreen capabilities.\n *\n * The decorator applies styles and event listeners to handle fullscreen presentation of a modal dialog. Pushstate\n * makes the browser back button close the dialog.\n *\n * @param {Class} Sup The modal dialog class to decorate. Must be (subclass) of type ModalOverlay.\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FullscreenDecorator = function FullscreenDecorator(Sup) {\n    return function (_Sup) {\n        _inherits(_class, _Sup);\n\n        function _class() {\n            var _ref;\n\n            _classCallCheck(this, _class);\n\n            for (var _len = arguments.length, props = Array(_len), _key = 0; _key < _len; _key++) {\n                props[_key] = arguments[_key];\n            }\n\n            // Bind this since it does not override super method\n            var _this = _possibleConstructorReturn(this, (_ref = _class.__proto__ || Object.getPrototypeOf(_class)).call.apply(_ref, [this].concat(props)));\n\n            _this._handlePopstate = _this._handlePopstate.bind(_this);\n            return _this;\n        }\n\n        _createClass(_class, [{\n            key: 'show',\n            value: function show() {\n                _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'show', this).call(this);\n                this._applyTempStyle();\n                this._addEventListeners();\n\n                // Push two states onto the stack to prevent the back button from performing a page load\n                window.history.replaceState(null, '');\n                window.history.pushState(null, '');\n            }\n        }, {\n            key: 'hide',\n            value: function hide() {\n                _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'hide', this).call(this);\n                this._removeTempStyle();\n                this._removeEventListeners();\n\n                // Pop the fullscreen state\n                window.history.go(-1);\n            }\n        }, {\n            key: '_applyTempStyle',\n            value: function _applyTempStyle() {\n                document.documentElement.style.overflow = document.body.style.overflow = 'hidden';\n                document.documentElement.style.position = document.body.style.position = 'relative';\n                document.documentElement.style.height = document.body.style.height = '100%';\n            }\n        }, {\n            key: '_removeTempStyle',\n            value: function _removeTempStyle() {\n                document.documentElement.style.removeProperty('overflow');\n                document.documentElement.style.removeProperty('position');\n                document.documentElement.style.removeProperty('height');\n                document.body.style.removeProperty('overflow');\n                document.body.style.removeProperty('position');\n                document.body.style.removeProperty('height');\n            }\n        }, {\n            key: '_addEventListeners',\n            value: function _addEventListeners() {\n                window.addEventListener('keydown', this._handleKeydown, true);\n                window.addEventListener('popstate', this._handlePopstate);\n            }\n        }, {\n            key: '_removeEventListeners',\n            value: function _removeEventListeners() {\n                window.removeEventListener('keydown', this._handleKeydown, true);\n                window.removeEventListener('popstate', this._handlePopstate);\n            }\n        }, {\n            key: '_handleKeydown',\n            value: function _handleKeydown(evt) {\n                if (evt.keyCode === 27 /* Escape */) {\n                        this.hide();\n                        evt.stopPropagation();\n                    }\n            }\n        }, {\n            key: '_handlePopstate',\n            value: function _handlePopstate() {\n                // Re-push fullscreen state, will be popped again later\n                window.history.pushState(null, '');\n\n                this.hide();\n            }\n        }]);\n\n        return _class;\n    }(Sup);\n};\n\nmodule.exports = FullscreenDecorator;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bGxzY3JlZW4tZGVjb3JhdG9yLmpzIl0sIm5hbWVzIjpbIkZ1bGxzY3JlZW5EZWNvcmF0b3IiLCJwcm9wcyIsIl9oYW5kbGVQb3BzdGF0ZSIsImJpbmQiLCJfYXBwbHlUZW1wU3R5bGUiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwicHVzaFN0YXRlIiwiX3JlbW92ZVRlbXBTdHlsZSIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsImdvIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsIm92ZXJmbG93IiwiYm9keSIsInBvc2l0aW9uIiwiaGVpZ2h0IiwicmVtb3ZlUHJvcGVydHkiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUtleWRvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Q29kZSIsImhpZGUiLCJzdG9wUHJvcGFnYXRpb24iLCJTdXAiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBLElBQU1BLHNCQUFzQixTQUF0QkEsbUJBQXNCO0FBQUE7QUFBQTs7QUFFcEIsMEJBQXNCO0FBQUE7O0FBQUE7O0FBQUEsOENBQVBDLEtBQU87QUFBUEEscUJBQU87QUFBQTs7QUFHbEI7QUFIa0IsbUpBQ1RBLEtBRFM7O0FBSWxCLGtCQUFLQyxlQUFMLEdBQXVCLE1BQUtBLGVBQUwsQ0FBcUJDLElBQXJCLE9BQXZCO0FBSmtCO0FBS3JCOztBQVBtQjtBQUFBO0FBQUEsbUNBU2I7QUFDSDtBQUNBLHFCQUFLQyxlQUFMO0FBQ0EscUJBQUtDLGtCQUFMOztBQUVBO0FBQ0FDLHVCQUFPQyxPQUFQLENBQWVDLFlBQWYsQ0FBNEIsSUFBNUIsRUFBa0MsRUFBbEM7QUFDQUYsdUJBQU9DLE9BQVAsQ0FBZUUsU0FBZixDQUF5QixJQUF6QixFQUErQixFQUEvQjtBQUNIO0FBakJtQjtBQUFBO0FBQUEsbUNBbUJiO0FBQ0g7QUFDQSxxQkFBS0MsZ0JBQUw7QUFDQSxxQkFBS0MscUJBQUw7O0FBRUE7QUFDQUwsdUJBQU9DLE9BQVAsQ0FBZUssRUFBZixDQUFrQixDQUFDLENBQW5CO0FBQ0g7QUExQm1CO0FBQUE7QUFBQSw4Q0E0QkY7QUFDZEMseUJBQVNDLGVBQVQsQ0FBeUJDLEtBQXpCLENBQStCQyxRQUEvQixHQUEwQ0gsU0FBU0ksSUFBVCxDQUFjRixLQUFkLENBQW9CQyxRQUFwQixHQUN0QyxRQURKO0FBRUFILHlCQUFTQyxlQUFULENBQXlCQyxLQUF6QixDQUErQkcsUUFBL0IsR0FBMENMLFNBQVNJLElBQVQsQ0FBY0YsS0FBZCxDQUFvQkcsUUFBcEIsR0FDdEMsVUFESjtBQUVBTCx5QkFBU0MsZUFBVCxDQUF5QkMsS0FBekIsQ0FBK0JJLE1BQS9CLEdBQXdDTixTQUFTSSxJQUFULENBQWNGLEtBQWQsQ0FBb0JJLE1BQXBCLEdBQ3BDLE1BREo7QUFFSDtBQW5DbUI7QUFBQTtBQUFBLCtDQXFDRDtBQUNmTix5QkFBU0MsZUFBVCxDQUF5QkMsS0FBekIsQ0FBK0JLLGNBQS9CLENBQThDLFVBQTlDO0FBQ0FQLHlCQUFTQyxlQUFULENBQXlCQyxLQUF6QixDQUErQkssY0FBL0IsQ0FBOEMsVUFBOUM7QUFDQVAseUJBQVNDLGVBQVQsQ0FBeUJDLEtBQXpCLENBQStCSyxjQUEvQixDQUE4QyxRQUE5QztBQUNBUCx5QkFBU0ksSUFBVCxDQUFjRixLQUFkLENBQW9CSyxjQUFwQixDQUFtQyxVQUFuQztBQUNBUCx5QkFBU0ksSUFBVCxDQUFjRixLQUFkLENBQW9CSyxjQUFwQixDQUFtQyxVQUFuQztBQUNBUCx5QkFBU0ksSUFBVCxDQUFjRixLQUFkLENBQW9CSyxjQUFwQixDQUFtQyxRQUFuQztBQUNIO0FBNUNtQjtBQUFBO0FBQUEsaURBOENDO0FBQ2pCZCx1QkFBT2UsZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsS0FBS0MsY0FBeEMsRUFBd0QsSUFBeEQ7QUFDQWhCLHVCQUFPZSxnQkFBUCxDQUF3QixVQUF4QixFQUFvQyxLQUFLbkIsZUFBekM7QUFDSDtBQWpEbUI7QUFBQTtBQUFBLG9EQW1ESTtBQUNwQkksdUJBQU9pQixtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxLQUFLRCxjQUEzQyxFQUEyRCxJQUEzRDtBQUNBaEIsdUJBQU9pQixtQkFBUCxDQUEyQixVQUEzQixFQUF1QyxLQUFLckIsZUFBNUM7QUFDSDtBQXREbUI7QUFBQTtBQUFBLDJDQXdETHNCLEdBeERLLEVBd0RBO0FBQ2hCLG9CQUFJQSxJQUFJQyxPQUFKLEtBQWdCLEVBQXBCLENBQXVCLFlBQXZCLEVBQXFDO0FBQ2pDLDZCQUFLQyxJQUFMO0FBQ0FGLDRCQUFJRyxlQUFKO0FBQ0g7QUFDSjtBQTdEbUI7QUFBQTtBQUFBLDhDQStERjtBQUNkO0FBQ0FyQix1QkFBT0MsT0FBUCxDQUFlRSxTQUFmLENBQXlCLElBQXpCLEVBQStCLEVBQS9COztBQUVBLHFCQUFLaUIsSUFBTDtBQUNIO0FBcEVtQjs7QUFBQTtBQUFBLE1BQ1ZFLEdBRFU7QUFBQSxDQUE1Qjs7QUF1RUFDLE9BQU9DLE9BQVAsR0FBaUI5QixtQkFBakIiLCJmaWxlIjoiZnVsbHNjcmVlbi1kZWNvcmF0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGVjb3JhdGVzIGEgbW9kYWwgZGlhbG9nIHdpdGggZnVsbHNjcmVlbiBjYXBhYmlsaXRpZXMuXG4gKlxuICogVGhlIGRlY29yYXRvciBhcHBsaWVzIHN0eWxlcyBhbmQgZXZlbnQgbGlzdGVuZXJzIHRvIGhhbmRsZSBmdWxsc2NyZWVuIHByZXNlbnRhdGlvbiBvZiBhIG1vZGFsIGRpYWxvZy4gUHVzaHN0YXRlXG4gKiBtYWtlcyB0aGUgYnJvd3NlciBiYWNrIGJ1dHRvbiBjbG9zZSB0aGUgZGlhbG9nLlxuICpcbiAqIEBwYXJhbSB7Q2xhc3N9IFN1cCBUaGUgbW9kYWwgZGlhbG9nIGNsYXNzIHRvIGRlY29yYXRlLiBNdXN0IGJlIChzdWJjbGFzcykgb2YgdHlwZSBNb2RhbE92ZXJsYXkuXG4gKi9cbmNvbnN0IEZ1bGxzY3JlZW5EZWNvcmF0b3IgPSBTdXAgPT5cbiAgICBjbGFzcyBleHRlbmRzIFN1cCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKC4uLnByb3BzKSB7XG4gICAgICAgICAgICBzdXBlciguLi5wcm9wcyk7XG5cbiAgICAgICAgICAgIC8vIEJpbmQgdGhpcyBzaW5jZSBpdCBkb2VzIG5vdCBvdmVycmlkZSBzdXBlciBtZXRob2RcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVBvcHN0YXRlID0gdGhpcy5faGFuZGxlUG9wc3RhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3coKSB7XG4gICAgICAgICAgICBzdXBlci5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLl9hcHBseVRlbXBTdHlsZSgpO1xuICAgICAgICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICAgICAgLy8gUHVzaCB0d28gc3RhdGVzIG9udG8gdGhlIHN0YWNrIHRvIHByZXZlbnQgdGhlIGJhY2sgYnV0dG9uIGZyb20gcGVyZm9ybWluZyBhIHBhZ2UgbG9hZFxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBoaWRlKCkge1xuICAgICAgICAgICAgc3VwZXIuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlVGVtcFN0eWxlKCk7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgICAgICAvLyBQb3AgdGhlIGZ1bGxzY3JlZW4gc3RhdGVcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmdvKC0xKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9hcHBseVRlbXBTdHlsZSgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPVxuICAgICAgICAgICAgICAgICdoaWRkZW4nO1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gZG9jdW1lbnQuYm9keS5zdHlsZS5wb3NpdGlvbiA9XG4gICAgICAgICAgICAgICAgJ3JlbGF0aXZlJztcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9XG4gICAgICAgICAgICAgICAgJzEwMCUnO1xuICAgICAgICB9XG5cbiAgICAgICAgX3JlbW92ZVRlbXBTdHlsZSgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9zaXRpb24nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9zaXRpb24nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuX2hhbmRsZVBvcHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlS2V5ZG93biwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9oYW5kbGVQb3BzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBfaGFuZGxlS2V5ZG93bihldnQpIHtcbiAgICAgICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gMjcgLyogRXNjYXBlICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX2hhbmRsZVBvcHN0YXRlKCkge1xuICAgICAgICAgICAgLy8gUmUtcHVzaCBmdWxsc2NyZWVuIHN0YXRlLCB3aWxsIGJlIHBvcHBlZCBhZ2FpbiBsYXRlclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsICcnKTtcblxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZ1bGxzY3JlZW5EZWNvcmF0b3I7XG4iXX0=","deps":{},"file":"/home/node/src/routes/podlet-global-search/lib/client/fullscreen-decorator.js","index":7,"indexDeps":{}}
,
{"entry":true,"expose":false,"file":"/home/node/src/routes/podlet-global-search/lib/client/index.js","id":"c0970d48ebe378c14014b854538c76332b2a2d11f4518cea05e47372db2d8cbf","order":0,"source":"'use strict';\n\nvar search = require('@finn-no/frontpage-search');\nvar domReady = require('domready');\n\nvar mobileModalWrapper = require('./mobile-modal-wrapper');\n\nfunction globalSearch(ele, baseUrl, isMobile) {\n    var searchUrl = baseUrl + '/search/front';\n    var streamSuggestUrl = searchUrl + '/streamingsuggest';\n    var suggestUrl = searchUrl + '/suggest';\n    // TODO: Client should be MFINN for now to keep the same behavior. Should probably change in the future\n    // AdOut will handle this\n    var client = 'MFINN';\n\n    if (isMobile) {\n        mobileModalWrapper(ele, function (wrappedEle) {\n            return search(wrappedEle, streamSuggestUrl, suggestUrl, client);\n        });\n    } else {\n        search(ele, streamSuggestUrl, suggestUrl, client);\n    }\n}\n\nmodule.exports.globalSearchMobile = function (ele, baseUrl) {\n    return globalSearch(ele, baseUrl, true);\n};\nmodule.exports.globalSearchDesktop = function (ele, baseUrl) {\n    return globalSearch(ele, baseUrl, false);\n};\n\ndomReady(function () {\n    var ele = document.getElementById('global-search');\n    globalSearch(ele, 'https://www.finn.no', ele.getAttribute('data-is-mobile') === 'true');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlYXJjaCIsInJlcXVpcmUiLCJkb21SZWFkeSIsIm1vYmlsZU1vZGFsV3JhcHBlciIsImdsb2JhbFNlYXJjaCIsImVsZSIsImJhc2VVcmwiLCJpc01vYmlsZSIsInNlYXJjaFVybCIsInN0cmVhbVN1Z2dlc3RVcmwiLCJzdWdnZXN0VXJsIiwiY2xpZW50Iiwid3JhcHBlZEVsZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJnbG9iYWxTZWFyY2hNb2JpbGUiLCJnbG9iYWxTZWFyY2hEZXNrdG9wIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsU0FBU0MsUUFBUSwyQkFBUixDQUFmO0FBQ0EsSUFBTUMsV0FBV0QsUUFBUSxVQUFSLENBQWpCOztBQUVBLElBQU1FLHFCQUFxQkYsUUFBUSx3QkFBUixDQUEzQjs7QUFFQSxTQUFTRyxZQUFULENBQXNCQyxHQUF0QixFQUEyQkMsT0FBM0IsRUFBb0NDLFFBQXBDLEVBQThDO0FBQzFDLFFBQU1DLFlBQWVGLE9BQWYsa0JBQU47QUFDQSxRQUFNRyxtQkFBc0JELFNBQXRCLHNCQUFOO0FBQ0EsUUFBTUUsYUFBZ0JGLFNBQWhCLGFBQU47QUFDQTtBQUNBO0FBQ0EsUUFBTUcsU0FBUyxPQUFmOztBQUVBLFFBQUlKLFFBQUosRUFBYztBQUNWSiwyQkFBbUJFLEdBQW5CLEVBQXdCO0FBQUEsbUJBQ3BCTCxPQUFPWSxVQUFQLEVBQW1CSCxnQkFBbkIsRUFBcUNDLFVBQXJDLEVBQWlEQyxNQUFqRCxDQURvQjtBQUFBLFNBQXhCO0FBR0gsS0FKRCxNQUlPO0FBQ0hYLGVBQU9LLEdBQVAsRUFBWUksZ0JBQVosRUFBOEJDLFVBQTlCLEVBQTBDQyxNQUExQztBQUNIO0FBQ0o7O0FBRURFLE9BQU9DLE9BQVAsQ0FBZUMsa0JBQWYsR0FBb0MsVUFBQ1YsR0FBRCxFQUFNQyxPQUFOO0FBQUEsV0FDaENGLGFBQWFDLEdBQWIsRUFBa0JDLE9BQWxCLEVBQTJCLElBQTNCLENBRGdDO0FBQUEsQ0FBcEM7QUFFQU8sT0FBT0MsT0FBUCxDQUFlRSxtQkFBZixHQUFxQyxVQUFDWCxHQUFELEVBQU1DLE9BQU47QUFBQSxXQUNqQ0YsYUFBYUMsR0FBYixFQUFrQkMsT0FBbEIsRUFBMkIsS0FBM0IsQ0FEaUM7QUFBQSxDQUFyQzs7QUFHQUosU0FBUyxZQUFNO0FBQ1gsUUFBTUcsTUFBTVksU0FBU0MsY0FBVCxDQUF3QixlQUF4QixDQUFaO0FBQ0FkLGlCQUNJQyxHQURKLEVBRUkscUJBRkosRUFHSUEsSUFBSWMsWUFBSixDQUFpQixnQkFBakIsTUFBdUMsTUFIM0M7QUFLSCxDQVBEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBzZWFyY2ggPSByZXF1aXJlKCdAZmlubi1uby9mcm9udHBhZ2Utc2VhcmNoJyk7XG5jb25zdCBkb21SZWFkeSA9IHJlcXVpcmUoJ2RvbXJlYWR5Jyk7XG5cbmNvbnN0IG1vYmlsZU1vZGFsV3JhcHBlciA9IHJlcXVpcmUoJy4vbW9iaWxlLW1vZGFsLXdyYXBwZXInKTtcblxuZnVuY3Rpb24gZ2xvYmFsU2VhcmNoKGVsZSwgYmFzZVVybCwgaXNNb2JpbGUpIHtcbiAgICBjb25zdCBzZWFyY2hVcmwgPSBgJHtiYXNlVXJsfS9zZWFyY2gvZnJvbnRgO1xuICAgIGNvbnN0IHN0cmVhbVN1Z2dlc3RVcmwgPSBgJHtzZWFyY2hVcmx9L3N0cmVhbWluZ3N1Z2dlc3RgO1xuICAgIGNvbnN0IHN1Z2dlc3RVcmwgPSBgJHtzZWFyY2hVcmx9L3N1Z2dlc3RgO1xuICAgIC8vIFRPRE86IENsaWVudCBzaG91bGQgYmUgTUZJTk4gZm9yIG5vdyB0byBrZWVwIHRoZSBzYW1lIGJlaGF2aW9yLiBTaG91bGQgcHJvYmFibHkgY2hhbmdlIGluIHRoZSBmdXR1cmVcbiAgICAvLyBBZE91dCB3aWxsIGhhbmRsZSB0aGlzXG4gICAgY29uc3QgY2xpZW50ID0gJ01GSU5OJztcblxuICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICBtb2JpbGVNb2RhbFdyYXBwZXIoZWxlLCB3cmFwcGVkRWxlID0+XG4gICAgICAgICAgICBzZWFyY2god3JhcHBlZEVsZSwgc3RyZWFtU3VnZ2VzdFVybCwgc3VnZ2VzdFVybCwgY2xpZW50KVxuICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlYXJjaChlbGUsIHN0cmVhbVN1Z2dlc3RVcmwsIHN1Z2dlc3RVcmwsIGNsaWVudCk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5nbG9iYWxTZWFyY2hNb2JpbGUgPSAoZWxlLCBiYXNlVXJsKSA9PlxuICAgIGdsb2JhbFNlYXJjaChlbGUsIGJhc2VVcmwsIHRydWUpO1xubW9kdWxlLmV4cG9ydHMuZ2xvYmFsU2VhcmNoRGVza3RvcCA9IChlbGUsIGJhc2VVcmwpID0+XG4gICAgZ2xvYmFsU2VhcmNoKGVsZSwgYmFzZVVybCwgZmFsc2UpO1xuXG5kb21SZWFkeSgoKSA9PiB7XG4gICAgY29uc3QgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbC1zZWFyY2gnKTtcbiAgICBnbG9iYWxTZWFyY2goXG4gICAgICAgIGVsZSxcbiAgICAgICAgJ2h0dHBzOi8vd3d3LmZpbm4ubm8nLFxuICAgICAgICBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWlzLW1vYmlsZScpID09PSAndHJ1ZSdcbiAgICApO1xufSk7XG4iXX0=","deps":{"domready":"81be46a7d42e3879307ccb9eb181627735cc2b06f7982c3bae44b6fb3741afa4","./mobile-modal-wrapper":"4cf792668236e960ae4d39150407fca6ae426a79408df22f494d33114cadf4ad","@finn-no/frontpage-search":"2d888a058b5991d476e21196c58439ca95eab56812354f1dc7e6e8aacfdde797"},"index":8,"indexDeps":{"domready":6,"./mobile-modal-wrapper":9,"@finn-no/frontpage-search":4}}
,
{"id":"4cf792668236e960ae4d39150407fca6ae426a79408df22f494d33114cadf4ad","source":"'use strict';\n\nvar FullscreenDecorator = require('./fullscreen-decorator.js');\nvar ModalOverlay = require('./modal-overlay.js');\nvar el = require('@finn-no/create-element');\n\nvar FullscreenModalOverlay = FullscreenDecorator(ModalOverlay); // eslint-disable-line new-cap\n\nmodule.exports = function (ele, searchController) {\n    var dialog = void 0;\n    var inputEle = ele.elements.q;\n\n    // Opening on touchend is faster than focusing the input and then opening, because\n    // we can skip at least one layout in the middle of opening the modal.\n    // In theory we could use focusin, but that fires after focus in most browsers :(\n    inputEle.addEventListener('touchstart', function (evt) {\n        // FIXME: in iOS 10 we have to run preventDefault(), otherwise the input doesn't get focused.\n        // This might be a bug. In some Android versions, we can't runt preventDefault(), because\n        // the overlay doesn't open at all. Should try to solve this without special-casing iOS.\n        if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {\n            evt.preventDefault();\n        }\n        inputEle.addEventListener('touchend', handle);\n        inputEle.addEventListener('touchmove', reset);\n    });\n\n    function handle(evt) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        showFullscreenDialog();\n    }\n\n    function reset() {\n        inputEle.removeEventListener('touchend', handle);\n        inputEle.removeEventListener('touchmove', reset);\n    }\n\n    // The focus event is sometimes triggered by autofocus even if this is done on\n    // DOMContentLoaded (bug?). setTimeout() prevents this from happening.\n    window.setTimeout(function () {\n        inputEle.addEventListener('focus', showFullscreenDialog);\n    });\n\n    function showFullscreenDialog() {\n        if (ModalOverlay.isOpen) {\n            return;\n        }\n\n        var contentEle = createDialogContent();\n\n        var options = {\n            size: {\n                top: 0,\n                right: 0,\n                bottom: 0,\n                left: 0\n            },\n            onHideFocusElement: ele.querySelector('[data-fullscreen-search-focus]'),\n            slideUp: true,\n            slideDown: true\n        };\n\n        dialog = new FullscreenModalOverlay('Søk', contentEle, options);\n        dialog.show();\n        searchController(contentEle);\n    }\n\n    function createDialogContent() {\n        var formEle = ele.cloneNode(true);\n        formEle.classList.add('r-margin');\n        formEle.removeAttribute('data-is-dropdown');\n        var submitButtonEle = formEle.querySelector('button');\n        if (submitButtonEle) {\n            submitButtonEle.remove();\n        }\n        var newInputEle = formEle.elements.q;\n        newInputEle.style.cssText = '-webkit-flex: 1; -ms-flex: 1; flex: 1;';\n        var buttonEle = el('button.blank.prn', {\n            type: 'button',\n            onclick: hideDialog\n        }, 'Avbryt');\n        var insertionEle = formEle.querySelector('[data-dropdown-insertion]');\n        insertionEle.className = 'r-phl scroll-container';\n        insertionEle.style.top = '60px';\n\n        // Lots of flashing without this. Which is weird, becuse it's already\n        // a layer due to -webkit-overflow-scrolling: touch\n        insertionEle.style.webkitTransform = 'translate3d(0, 0, 0)';\n        insertionEle.style.transform = 'translate3d(0, 0, 0)';\n\n        // Rearrange so that flex works properly\n        formEle.append(el('div.flex', null, newInputEle, el('span', null, buttonEle)), insertionEle);\n\n        if (newInputEle.type === 'search') {\n            newInputEle.selectionStart = newInputEle.value.length;\n        }\n\n        // The browser (\"Internet\") on Galaxy S6 has a bug where if one focuses the\n        // input before the page has loaded, the fullscreen gets misplaced on load.\n        // This might happen on other devices too, but we only work around it on\n        // Samsung devices for now.\n        // This has the drawback of not popping up the keyboard.\n        // TODO: find a better workaround\n        if (/samsungbrowser/i.test(navigator.userAgent)) {\n            newInputEle.blur();\n            window.setTimeout(function () {\n                newInputEle.focus();\n            });\n        }\n\n        return formEle;\n    }\n\n    function hideDialog() {\n        dialog.hide();\n    }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vYmlsZS1tb2RhbC13cmFwcGVyLmpzIl0sIm5hbWVzIjpbIkZ1bGxzY3JlZW5EZWNvcmF0b3IiLCJyZXF1aXJlIiwiTW9kYWxPdmVybGF5IiwiZWwiLCJGdWxsc2NyZWVuTW9kYWxPdmVybGF5IiwibW9kdWxlIiwiZXhwb3J0cyIsImVsZSIsInNlYXJjaENvbnRyb2xsZXIiLCJkaWFsb2ciLCJpbnB1dEVsZSIsImVsZW1lbnRzIiwicSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJoYW5kbGUiLCJyZXNldCIsInN0b3BQcm9wYWdhdGlvbiIsInNob3dGdWxsc2NyZWVuRGlhbG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJpc09wZW4iLCJjb250ZW50RWxlIiwiY3JlYXRlRGlhbG9nQ29udGVudCIsIm9wdGlvbnMiLCJzaXplIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwib25IaWRlRm9jdXNFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJzaG93IiwiZm9ybUVsZSIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUF0dHJpYnV0ZSIsInN1Ym1pdEJ1dHRvbkVsZSIsInJlbW92ZSIsIm5ld0lucHV0RWxlIiwic3R5bGUiLCJjc3NUZXh0IiwiYnV0dG9uRWxlIiwidHlwZSIsIm9uY2xpY2siLCJoaWRlRGlhbG9nIiwiaW5zZXJ0aW9uRWxlIiwiY2xhc3NOYW1lIiwid2Via2l0VHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiYXBwZW5kIiwic2VsZWN0aW9uU3RhcnQiLCJ2YWx1ZSIsImxlbmd0aCIsImJsdXIiLCJmb2N1cyIsImhpZGUiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLHNCQUFzQkMsUUFBUSwyQkFBUixDQUE1QjtBQUNBLElBQU1DLGVBQWVE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QixnQkFBUWtCLE1BQVIsQ0FDSXZELEdBQUcsVUFBSCxFQUFlLElBQWYsRUFBcUI0QyxXQUFyQixFQUFrQzVDLEdBQUcsTUFBSCxFQUFXLElBQVgsRUFBaUIrQyxTQUFqQixDQUFsQyxDQURKLEVBRUlJLFlBRko7O0FBS0EsWUFBSVAsWUFBWUksSUFBWixLQUFxQixRQUF6QixFQUFtQztBQUMvQkosd0JBQVlZLGNBQVosR0FBNkJaLFlBQVlhLEtBQVosQ0FBa0JDLE1BQS9DO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBSSxrQkFBa0IvQyxJQUFsQixDQUF1QkMsVUFBVUMsU0FBakMsQ0FBSixFQUFpRDtBQUM3QytCLHdCQUFZZSxJQUFaO0FBQ0F0QyxtQkFBT0MsVUFBUCxDQUFrQixZQUFNO0FBQ3BCc0IsNEJBQVlnQixLQUFaO0FBQ0gsYUFGRDtBQUdIOztBQUVELGVBQU92QixPQUFQO0FBQ0g7O0FBRUQsYUFBU2EsVUFBVCxHQUFzQjtBQUNsQjVDLGVBQU91RCxJQUFQO0FBQ0g7QUFDSixDQXJIRCIsImZpbGUiOiJtb2JpbGUtbW9kYWwtd3JhcHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgRnVsbHNjcmVlbkRlY29yYXRvciA9IHJlcXVpcmUoJy4vZnVsbHNjcmVlbi1kZWNvcmF0b3IuanMnKTtcbmNvbnN0IE1vZGFsT3ZlcmxheSA9IHJlcXVpcmUoJy4vbW9kYWwtb3ZlcmxheS5qcycpO1xuY29uc3QgZWwgPSByZXF1aXJlKCdAZmlubi1uby9jcmVhdGUtZWxlbWVudCcpO1xuXG5jb25zdCBGdWxsc2NyZWVuTW9kYWxPdmVybGF5ID0gRnVsbHNjcmVlbkRlY29yYXRvcihNb2RhbE92ZXJsYXkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5ldy1jYXBcblxubW9kdWxlLmV4cG9ydHMgPSAoZWxlLCBzZWFyY2hDb250cm9sbGVyKSA9PiB7XG4gICAgbGV0IGRpYWxvZztcbiAgICBjb25zdCBpbnB1dEVsZSA9IGVsZS5lbGVtZW50cy5xO1xuXG4gICAgLy8gT3BlbmluZyBvbiB0b3VjaGVuZCBpcyBmYXN0ZXIgdGhhbiBmb2N1c2luZyB0aGUgaW5wdXQgYW5kIHRoZW4gb3BlbmluZywgYmVjYXVzZVxuICAgIC8vIHdlIGNhbiBza2lwIGF0IGxlYXN0IG9uZSBsYXlvdXQgaW4gdGhlIG1pZGRsZSBvZiBvcGVuaW5nIHRoZSBtb2RhbC5cbiAgICAvLyBJbiB0aGVvcnkgd2UgY291bGQgdXNlIGZvY3VzaW4sIGJ1dCB0aGF0IGZpcmVzIGFmdGVyIGZvY3VzIGluIG1vc3QgYnJvd3NlcnMgOihcbiAgICBpbnB1dEVsZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZ0ID0+IHtcbiAgICAgICAgLy8gRklYTUU6IGluIGlPUyAxMCB3ZSBoYXZlIHRvIHJ1biBwcmV2ZW50RGVmYXVsdCgpLCBvdGhlcndpc2UgdGhlIGlucHV0IGRvZXNuJ3QgZ2V0IGZvY3VzZWQuXG4gICAgICAgIC8vIFRoaXMgbWlnaHQgYmUgYSBidWcuIEluIHNvbWUgQW5kcm9pZCB2ZXJzaW9ucywgd2UgY2FuJ3QgcnVudCBwcmV2ZW50RGVmYXVsdCgpLCBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBvdmVybGF5IGRvZXNuJ3Qgb3BlbiBhdCBhbGwuIFNob3VsZCB0cnkgdG8gc29sdmUgdGhpcyB3aXRob3V0IHNwZWNpYWwtY2FzaW5nIGlPUy5cbiAgICAgICAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dEVsZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZSk7XG4gICAgICAgIGlucHV0RWxlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHJlc2V0KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZShldnQpIHtcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2hvd0Z1bGxzY3JlZW5EaWFsb2coKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgaW5wdXRFbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGUpO1xuICAgICAgICBpbnB1dEVsZS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCByZXNldCk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvY3VzIGV2ZW50IGlzIHNvbWV0aW1lcyB0cmlnZ2VyZWQgYnkgYXV0b2ZvY3VzIGV2ZW4gaWYgdGhpcyBpcyBkb25lIG9uXG4gICAgLy8gRE9NQ29udGVudExvYWRlZCAoYnVnPykuIHNldFRpbWVvdXQoKSBwcmV2ZW50cyB0aGlzIGZyb20gaGFwcGVuaW5nLlxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaW5wdXRFbGUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzaG93RnVsbHNjcmVlbkRpYWxvZyk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBzaG93RnVsbHNjcmVlbkRpYWxvZygpIHtcbiAgICAgICAgaWYgKE1vZGFsT3ZlcmxheS5pc09wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbGUgPSBjcmVhdGVEaWFsb2dDb250ZW50KCk7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25IaWRlRm9jdXNFbGVtZW50OiBlbGUucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAnW2RhdGEtZnVsbHNjcmVlbi1zZWFyY2gtZm9jdXNdJ1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHNsaWRlVXA6IHRydWUsXG4gICAgICAgICAgICBzbGlkZURvd246IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgZGlhbG9nID0gbmV3IEZ1bGxzY3JlZW5Nb2RhbE92ZXJsYXkoJ1PDuGsnLCBjb250ZW50RWxlLCBvcHRpb25zKTtcbiAgICAgICAgZGlhbG9nLnNob3coKTtcbiAgICAgICAgc2VhcmNoQ29udHJvbGxlcihjb250ZW50RWxlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaWFsb2dDb250ZW50KCkge1xuICAgICAgICBjb25zdCBmb3JtRWxlID0gZWxlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgZm9ybUVsZS5jbGFzc0xpc3QuYWRkKCdyLW1hcmdpbicpO1xuICAgICAgICBmb3JtRWxlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pcy1kcm9wZG93bicpO1xuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b25FbGUgPSBmb3JtRWxlLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xuICAgICAgICBpZiAoc3VibWl0QnV0dG9uRWxlKSB7XG4gICAgICAgICAgICBzdWJtaXRCdXR0b25FbGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3SW5wdXRFbGUgPSBmb3JtRWxlLmVsZW1lbnRzLnE7XG4gICAgICAgIG5ld0lucHV0RWxlLnN0eWxlLmNzc1RleHQgPSAnLXdlYmtpdC1mbGV4OiAxOyAtbXMtZmxleDogMTsgZmxleDogMTsnO1xuICAgICAgICBjb25zdCBidXR0b25FbGUgPSBlbChcbiAgICAgICAgICAgICdidXR0b24uYmxhbmsucHJuJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBvbmNsaWNrOiBoaWRlRGlhbG9nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdBdmJyeXQnXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGluc2VydGlvbkVsZSA9IGZvcm1FbGUucXVlcnlTZWxlY3RvcignW2RhdGEtZHJvcGRvd24taW5zZXJ0aW9uXScpO1xuICAgICAgICBpbnNlcnRpb25FbGUuY2xhc3NOYW1lID0gJ3ItcGhsIHNjcm9sbC1jb250YWluZXInO1xuICAgICAgICBpbnNlcnRpb25FbGUuc3R5bGUudG9wID0gJzYwcHgnO1xuXG4gICAgICAgIC8vIExvdHMgb2YgZmxhc2hpbmcgd2l0aG91dCB0aGlzLiBXaGljaCBpcyB3ZWlyZCwgYmVjdXNlIGl0J3MgYWxyZWFkeVxuICAgICAgICAvLyBhIGxheWVyIGR1ZSB0byAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2hcbiAgICAgICAgaW5zZXJ0aW9uRWxlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAwLCAwKSc7XG4gICAgICAgIGluc2VydGlvbkVsZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgMCwgMCknO1xuXG4gICAgICAgIC8vIFJlYXJyYW5nZSBzbyB0aGF0IGZsZXggd29ya3MgcHJvcGVybHlcbiAgICAgICAgZm9ybUVsZS5hcHBlbmQoXG4gICAgICAgICAgICBlbCgnZGl2LmZsZXgnLCBudWxsLCBuZXdJbnB1dEVsZSwgZWwoJ3NwYW4nLCBudWxsLCBidXR0b25FbGUpKSxcbiAgICAgICAgICAgIGluc2VydGlvbkVsZVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChuZXdJbnB1dEVsZS50eXBlID09PSAnc2VhcmNoJykge1xuICAgICAgICAgICAgbmV3SW5wdXRFbGUuc2VsZWN0aW9uU3RhcnQgPSBuZXdJbnB1dEVsZS52YWx1ZS5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgYnJvd3NlciAoXCJJbnRlcm5ldFwiKSBvbiBHYWxheHkgUzYgaGFzIGEgYnVnIHdoZXJlIGlmIG9uZSBmb2N1c2VzIHRoZVxuICAgICAgICAvLyBpbnB1dCBiZWZvcmUgdGhlIHBhZ2UgaGFzIGxvYWRlZCwgdGhlIGZ1bGxzY3JlZW4gZ2V0cyBtaXNwbGFjZWQgb24gbG9hZC5cbiAgICAgICAgLy8gVGhpcyBtaWdodCBoYXBwZW4gb24gb3RoZXIgZGV2aWNlcyB0b28sIGJ1dCB3ZSBvbmx5IHdvcmsgYXJvdW5kIGl0IG9uXG4gICAgICAgIC8vIFNhbXN1bmcgZGV2aWNlcyBmb3Igbm93LlxuICAgICAgICAvLyBUaGlzIGhhcyB0aGUgZHJhd2JhY2sgb2Ygbm90IHBvcHBpbmcgdXAgdGhlIGtleWJvYXJkLlxuICAgICAgICAvLyBUT0RPOiBmaW5kIGEgYmV0dGVyIHdvcmthcm91bmRcbiAgICAgICAgaWYgKC9zYW1zdW5nYnJvd3Nlci9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgIG5ld0lucHV0RWxlLmJsdXIoKTtcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXdJbnB1dEVsZS5mb2N1cygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9ybUVsZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlRGlhbG9nKCkge1xuICAgICAgICBkaWFsb2cuaGlkZSgpO1xuICAgIH1cbn07XG4iXX0=","deps":{"./fullscreen-decorator.js":"b09e75e191f9bc64b9d1e2329b45e718460140fe7421439ca997825ed6fb79a7","./modal-overlay.js":"f8cc71a4a0b4e0023983b20d2f81dda758348fbd00d5eeb1655b01d7594eae5f","@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a"},"file":"/home/node/src/routes/podlet-global-search/lib/client/mobile-modal-wrapper.js","index":9,"indexDeps":{"./fullscreen-decorator.js":7,"./modal-overlay.js":10,"@finn-no/create-element":3}}
,
{"id":"f8cc71a4a0b4e0023983b20d2f81dda758348fbd00d5eeb1655b01d7594eae5f","source":"'use strict';\n\n/**\n * Create a modal overlay.\n *\n * The modal will make sure that tab focus is kept within itself. Focus will be set\n * back to the element that was focused when the modal was opened.\n *\n * @param {String} title The title of the modal overlay. Not visible, but necessary\n *        for screen readers.\n * @param {Node} content The contents of the modal overlay\n * @param {Object} options The options object can be used to specify these parameters:\n *        `onDismiss`:\n *            a function to call when `dismiss()` is called. It's passed the same\n *            arguments as the `dismiss()` method.\n *        `size`:\n *            an object which can specify `top`, `bottom`, `left`, `right`, `maxWidth`\n *            and `maxHeight`, set as the corresponding CSS properties of the modal container.\n *            If no size is specified, `top`, `bottom`, `left` and `right` are set to `0`.\n *        `onHideFocusElement`:\n *            The element to focus when the modal gets hidden(). If this is not specified,\n *            the element that was focused when the modal was opened has its focus set back.\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ModalOverlay = function () {\n    function ModalOverlay(title, content) {\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        _classCallCheck(this, ModalOverlay);\n\n        if (!title) {\n            throw Error('A title has to be provided');\n        }\n\n        this._title = title;\n        this._content = content;\n        this._options = options;\n\n        this._dismissCallback = null;\n        if (options.onDismiss) {\n            this._dismissCallback = options.onDismiss.bind(this);\n        }\n        this._onHideFocusElement = options.onHideFocusElement || null;\n        this._lastFocusedElement = null;\n\n        this._handleWindowFocusin = this._handleWindowFocusin.bind(this);\n        this._handleWindowBlur = this._handleWindowBlur.bind(this);\n        this._dismissIfClickedOutside = this._dismissIfClickedOutside.bind(this);\n        this._handleKeydown = this._handleKeydown.bind(this);\n        this._animationDurationInMillis = 300;\n    }\n\n    /**\n     * Show the modal if another modal is not alreay open\n     */\n\n\n    _createClass(ModalOverlay, [{\n        key: 'show',\n        value: function show() {\n            var _this = this;\n\n            if (ModalOverlay.isOpen) {\n                return;\n            }\n            ModalOverlay.isOpen = true;\n            this._onHideFocusElement = this._options.onHideFocusElement || document.activeElement;\n            this._createElements();\n            this._setPosition();\n            window.addEventListener('focusin', this._handleWindowFocusin);\n            window.addEventListener('blur', this._handleWindowBlur);\n            // Add this in a timeout so that any click handler that opens the modal don't have to call\n            // stopPropagation() (forgetting that leads to confusing bugs where the modal don't show up)\n            window.setTimeout(function () {\n                return document.addEventListener('click', _this._dismissIfClickedOutside);\n            });\n            document.addEventListener('keydown', this._handleKeydown);\n\n            // iOS bugfix for animating the show and hide dialog.\n            // Problem:  cannot set focus and then transform the object.\n            //           Therefore the focus has to be set first, then the object can be moved.\n            // The hack: set opacity zero, set focus, then do the transformation.\n            var style = this._containerEle.style;\n            if (this._options.slideUp) {\n                style.opacity = '0';\n            }\n\n            document.body.appendChild(this._backdropEle);\n            this._focusElement();\n\n            if (this._options.slideUp) {\n                // Use requestAnimationFrame to avoid running this at the same time as the focus()\n                // for smoother animation.\n                window.requestAnimationFrame(function () {\n                    style.transform = 'translateY(100vh)';\n                    style.opacity = '';\n\n                    window.requestAnimationFrame(function () {\n                        style.transition = 'transform ' + _this._animationDurationInMillis + 'ms';\n                        style.transform = 'translateY(0)';\n                    });\n                });\n            }\n        }\n\n        /**\n         * Hide the modal\n         */\n\n    }, {\n        key: 'hide',\n        value: function hide() {\n            var _this2 = this;\n\n            var style = this._containerEle.style;\n            if (this._options.slideDown) {\n                style.transition = 'transform ' + this._animationDurationInMillis + 'ms';\n                window.requestAnimationFrame(function () {\n                    style.transform = 'translateY(100vh)';\n                    // + 50 millis to give the animation enough time to finish\n                    _this2._teardownAsync(_this2._animationDurationInMillis + 50);\n                });\n            } else {\n                this._teardownAsync(0);\n            }\n        }\n    }, {\n        key: '_teardownAsync',\n        value: function _teardownAsync(duration) {\n            var _this3 = this;\n\n            setTimeout(function () {\n                _this3._backdropEle.remove();\n                window.removeEventListener('focusin', _this3._handleWindowFocusin);\n                window.removeEventListener('blur', _this3._handleWindowBlur);\n                document.removeEventListener('click', _this3._dismissIfClickedOutside);\n                document.removeEventListener('keydown', _this3._handleKeydown);\n                _this3._handleFocus(_this3._onHideFocusElement || document.body);\n                _this3._onHideFocusElement = null;\n                _this3._lastFocusedElement = null;\n                ModalOverlay.isOpen = false;\n            }, duration);\n        }\n\n        /**\n         * Hide the modal. If an `onDismiss` callback has been specified, it's called with\n         * the `reason` parameter.\n         *\n         * @param {String} reason The reason for why the modal was dismissed. This can be\n         *        e.g. \"ok\" or \"cancel\" for a confirm dialog subclass.\n         */\n\n    }, {\n        key: 'dismiss',\n        value: function dismiss(reason) {\n            if (this._dismissCallback) {\n                var noHide = this._dismissCallback(reason);\n                if (noHide) {\n                    return;\n                }\n            }\n\n            this.hide();\n        }\n    }, {\n        key: '_handleFocus',\n        value: function _handleFocus(element) {\n            if (element.focus) {\n                element.focus();\n            }\n        }\n    }, {\n        key: '_createElements',\n        value: function _createElements() {\n            var _this4 = this;\n\n            this._backdropEle = document.createElement('div');\n            this._backdropEle.className = 'modal-backdrop modal-active';\n            this._backdropEle.addEventListener('touchstart', function (evt) {\n                return _this4._preventTouchOutside(evt);\n            });\n            this._containerEle = document.createElement('div');\n            this._containerEle.className = 'modal-container';\n            this._containerEle.tabIndex = '-1';\n            this._containerEle.style.outline = 'none';\n            this._containerEle.setAttribute('role', 'dialog');\n            this._containerEle.setAttribute('aria-label', this._title);\n            this._containerEle.appendChild(this._buildContent());\n            this._backdropEle.appendChild(this._containerEle);\n        }\n    }, {\n        key: '_buildContent',\n        value: function _buildContent() {\n            var ele = document.createElement('div');\n            ele.className = 'scroll-container';\n            ele.style.top = '0';\n            ele.appendChild(this._content);\n            return ele;\n        }\n    }, {\n        key: '_setPosition',\n        value: function _setPosition() {\n            var size = this._options.size;\n            var style = this._containerEle.style;\n            style.cssText = '';\n            style.outline = 'none'; // FIXME: don't apply here\n\n            if (size) {\n                style.top = size.top || '0';\n                style.bottom = size.bottom || '0';\n                style.left = size.left || '0';\n                style.right = size.right || '0';\n                style.maxWidth = size.maxWidth || '100%';\n                style.maxHeight = size.maxHeight || '100%';\n                style.height = size.height || 'auto';\n                style.width = size.width || 'auto';\n            } else {\n                style.top = '0';\n                style.right = '0';\n                style.bottom = '0';\n                style.left = '0';\n            }\n        }\n    }, {\n        key: '_dismissIfClickedOutside',\n        value: function _dismissIfClickedOutside(evt) {\n            if (!this._containerEle.contains(evt.target)) {\n                this.dismiss('cancel');\n                evt.stopPropagation();\n            }\n        }\n    }, {\n        key: '_preventTouchOutside',\n        value: function _preventTouchOutside(evt) {\n            if (!this._containerEle.contains(evt.target)) {\n                evt.preventDefault();\n            }\n        }\n    }, {\n        key: '_focusElement',\n        value: function _focusElement() {\n            var autofocusEle = this._containerEle.querySelector('[autofocus]') || this._containerEle.querySelector('[data-autofocus]') || this._getFocusableElements(this._containerEle)[0] || this._containerEle;\n            autofocusEle.focus();\n        }\n    }, {\n        key: '_getFocusableElements',\n        value: function _getFocusableElements(element) {\n            var selector = 'a, audio[controls], button, details, embed, iframe, img[usemap],\\n            input:not([type=\"hidden\"]), keygen, label, object[usemap], select,\\n            textarea, video[controls], [tabindex]';\n            return [].concat(_toConsumableArray(element.querySelectorAll(selector))).filter(function (ele) {\n                return ele.tabIndex > -1;\n            }) // Only include elements that have a positive tabindex\n            .filter(function (ele) {\n                return !ele.matches(\"[aria-hidden='true'] *\");\n            });\n        }\n    }, {\n        key: '_handleTabbing',\n        value: function _handleTabbing(shiftKey) {\n            var focusableEles = this._getFocusableElements(this._containerEle);\n            var firstFocusableEle = focusableEles[0];\n            var lastFocusableEle = focusableEles[focusableEles.length - 1];\n            if (document.activeElement === firstFocusableEle && shiftKey) {\n                lastFocusableEle.focus();\n                return true;\n            } else if (document.activeElement === lastFocusableEle && !shiftKey) {\n                firstFocusableEle.focus();\n                return true;\n            }\n        }\n    }, {\n        key: '_handleKeydown',\n        value: function _handleKeydown(evt) {\n            var isHandled = false;\n\n            if (evt.keyCode === 27 /* Escape */) {\n                    isHandled = true;\n                    this.dismiss('cancel');\n                } else if (evt.keyCode === 9 /* Tab */) {\n                    isHandled = this._handleTabbing(evt.shiftKey);\n                }\n\n            if (isHandled) {\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n\n            return isHandled;\n        }\n\n        /**\n         * Handle the case where we have an open modal and the browser tab has been blurred\n         * and then focused again\n         */\n\n    }, {\n        key: '_handleWindowFocusin',\n        value: function _handleWindowFocusin(evt) {\n            if (!this._containerEle.contains(evt.target)) {\n                if (this._lastFocusedElement) {\n                    this._lastFocusedElement.focus();\n                } else {\n                    this._focusElement();\n                }\n                evt.stopPropagation();\n            }\n        }\n\n        /**\n         * Save the currently focused element when the browser tab is blurred. It's set back\n         * in _handleWindowFocusin\n         */\n\n    }, {\n        key: '_handleWindowBlur',\n        value: function _handleWindowBlur() {\n            this._lastFocusedElement = document.activeElement;\n        }\n    }]);\n\n    return ModalOverlay;\n}();\n\nModalOverlay.isOpen = false;\n\nmodule.exports = ModalOverlay;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLW92ZXJsYXkuanMiXSwibmFtZXMiOlsiTW9kYWxPdmVybGF5IiwidGl0bGUiLCJjb250ZW50Iiwib3B0aW9ucyIsIkVycm9yIiwiX3RpdGxlIiwiX2NvbnRlbnQiLCJfb3B0aW9ucyIsIl9kaXNtaXNzQ2FsbGJhY2siLCJvbkRpc21pc3MiLCJiaW5kIiwiX29uSGlkZUZvY3VzRWxlbWVudCIsIm9uSGlkZUZvY3VzRWxlbWVudCIsIl9sYXN0Rm9jdXNlZEVsZW1lbnQiLCJfaGFuZGxlV2luZG93Rm9jdXNpbiIsIl9oYW5kbGVXaW5kb3dCbHVyIiwiX2Rpc21pc3NJZkNsaWNrZWRPdXRzaWRlIiwiX2hhbmRsZUtleWRvd24iLCJfYW5pbWF0aW9uRHVyYXRpb25Jbk1pbGxpcyIsImlzT3BlbiIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsIl9jcmVhdGVFbGVtZW50cyIsIl9zZXRQb3NpdGlvbiIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJfY29udGFpbmVyRWxlIiwic2xpZGVVcCIsIm9wYWNpdHkiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJfYmFja2Ryb3BFbGUiLCJfZm9jdXNFbGVtZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbiIsInNsaWRlRG93biIsIl90ZWFyZG93bkFzeW5jIiwiZHVyYXRpb24iLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUZvY3VzIiwicmVhc29uIiwibm9IaWRlIiwiaGlkZSIsImVsZW1lbnQiLCJmb2N1cyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJfcHJldmVudFRvdWNoT3V0c2lkZSIsImV2dCIsInRhYkluZGV4Iiwib3V0bGluZSIsInNldEF0dHJpYnV0ZSIsIl9idWlsZENvbnRlbnQiLCJlbGUiLCJ0b3AiLCJzaXplIiwiY3NzVGV4dCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiaGVpZ2h0Iiwid2lkdGgiLCJjb250YWlucyIsInRhcmdldCIsImRpc21pc3MiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImF1dG9mb2N1c0VsZSIsInF1ZXJ5U2VsZWN0b3IiLCJfZ2V0Rm9jdXNhYmxlRWxlbWVudHMiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmaWx0ZXIiLCJtYXRjaGVzIiwic2hpZnRLZXkiLCJmb2N1c2FibGVFbGVzIiwiZmlyc3RGb2N1c2FibGVFbGUiLCJsYXN0Rm9jdXNhYmxlRWxlIiwibGVuZ3RoIiwiaXNIYW5kbGVkIiwia2V5Q29kZSIsIl9oYW5kbGVUYWJiaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFxQk1BLFk7QUFDRiwwQkFBWUMsS0FBWixFQUFtQkMsT0FBbkIsRUFBMEM7QUFBQSxZQUFkQyxPQUFjLHVFQUFKLEVBQUk7O0FBQUE7O0FBQ3RDLFlBQUksQ0FBQ0YsS0FBTCxFQUFZO0FBQ1Isa0JBQU1HLE1BQU0sNEJBQU4sQ0FBTjtBQUNIOztBQUVELGFBQUtDLE1BQUwsR0FBY0osS0FBZDtBQUNBLGFBQUtLLFFBQUwsR0FBZ0JKLE9BQWhCO0FBQ0EsYUFBS0ssUUFBTCxHQUFnQkosT0FBaEI7O0FBRUEsYUFBS0ssZ0JBQUwsR0FBd0IsSUFBeEI7QUFDQSxZQUFJTCxRQUFRTSxTQUFaLEVBQXVCO0FBQ25CLGlCQUFLRCxnQkFBTCxHQUF3QkwsUUFBUU0sU0FBUixDQUFrQkMsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBeEI7QUFDSDtBQUNELGFBQUtDLG1CQUFMLEdBQTJCUixRQUFRUyxrQkFBUixJQUE4QixJQUF6RDtBQUNBLGFBQUtDLG1CQUFMLEdBQTJCLElBQTNCOztBQUVBLGFBQUtDLG9CQUFMLEdBQTRCLEtBQUtBLG9CQUFMLENBQTBCSixJQUExQixDQUErQixJQUEvQixDQUE1QjtBQUNBLGFB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O0FBQ0g7QUFDRGtCLG9CQUFJbUIsZUFBSjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7NENBSW9CO0FBQ2hCLGlCQUFLMUQsbUJBQUwsR0FBMkJPLFNBQVNDLGFBQXBDO0FBQ0g7Ozs7OztBQUdMckIsYUFBYW1CLE1BQWIsR0FBc0IsS0FBdEI7O0FBRUFxRSxPQUFPQyxPQUFQLEdBQWlCekYsWUFBakIiLCJmaWxlIjoibW9kYWwtb3ZlcmxheS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGUgYSBtb2RhbCBvdmVybGF5LlxuICpcbiAqIFRoZSBtb2RhbCB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRhYiBmb2N1cyBpcyBrZXB0IHdpdGhpbiBpdHNlbGYuIEZvY3VzIHdpbGwgYmUgc2V0XG4gKiBiYWNrIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGZvY3VzZWQgd2hlbiB0aGUgbW9kYWwgd2FzIG9wZW5lZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgVGhlIHRpdGxlIG9mIHRoZSBtb2RhbCBvdmVybGF5LiBOb3QgdmlzaWJsZSwgYnV0IG5lY2Vzc2FyeVxuICogICAgICAgIGZvciBzY3JlZW4gcmVhZGVycy5cbiAqIEBwYXJhbSB7Tm9kZX0gY29udGVudCBUaGUgY29udGVudHMgb2YgdGhlIG1vZGFsIG92ZXJsYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IHRoZXNlIHBhcmFtZXRlcnM6XG4gKiAgICAgICAgYG9uRGlzbWlzc2A6XG4gKiAgICAgICAgICAgIGEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGBkaXNtaXNzKClgIGlzIGNhbGxlZC4gSXQncyBwYXNzZWQgdGhlIHNhbWVcbiAqICAgICAgICAgICAgYXJndW1lbnRzIGFzIHRoZSBgZGlzbWlzcygpYCBtZXRob2QuXG4gKiAgICAgICAgYHNpemVgOlxuICogICAgICAgICAgICBhbiBvYmplY3Qgd2hpY2ggY2FuIHNwZWNpZnkgYHRvcGAsIGBib3R0b21gLCBgbGVmdGAsIGByaWdodGAsIGBtYXhXaWR0aGBcbiAqICAgICAgICAgICAgYW5kIGBtYXhIZWlnaHRgLCBzZXQgYXMgdGhlIGNvcnJlc3BvbmRpbmcgQ1NTIHByb3BlcnRpZXMgb2YgdGhlIG1vZGFsIGNvbnRhaW5lci5cbiAqICAgICAgICAgICAgSWYgbm8gc2l6ZSBpcyBzcGVjaWZpZWQsIGB0b3BgLCBgYm90dG9tYCwgYGxlZnRgIGFuZCBgcmlnaHRgIGFyZSBzZXQgdG8gYDBgLlxuICogICAgICAgIGBvbkhpZGVGb2N1c0VsZW1lbnRgOlxuICogICAgICAgICAgICBUaGUgZWxlbWVudCB0byBmb2N1cyB3aGVuIHRoZSBtb2RhbCBnZXRzIGhpZGRlbigpLiBJZiB0aGlzIGlzIG5vdCBzcGVjaWZpZWQsXG4gKiAgICAgICAgICAgIHRoZSBlbGVtZW50IHRoYXQgd2FzIGZvY3VzZWQgd2hlbiB0aGUgbW9kYWwgd2FzIG9wZW5lZCBoYXMgaXRzIGZvY3VzIHNldCBiYWNrLlxuICovXG5jbGFzcyBNb2RhbE92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBjb250ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0EgdGl0bGUgaGFzIHRvIGJlIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5fZGlzbWlzc0NhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMub25EaXNtaXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNtaXNzQ2FsbGJhY2sgPSBvcHRpb25zLm9uRGlzbWlzcy5iaW5kKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uSGlkZUZvY3VzRWxlbWVudCA9IG9wdGlvbnMub25IaWRlRm9jdXNFbGVtZW50IHx8IG51bGw7XG4gICAgICAgIHRoaXMuX2xhc3RGb2N1c2VkRWxlbWVudCA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93Rm9jdXNpbiA9IHRoaXMuX2hhbmRsZVdpbmRvd0ZvY3VzaW4uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93Qmx1ciA9IHRoaXMuX2hhbmRsZVdpbmRvd0JsdXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fZGlzbWlzc0lmQ2xpY2tlZE91dHNpZGUgPSB0aGlzLl9kaXNtaXNzSWZDbGlja2VkT3V0c2lkZS5iaW5kKFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgICB0aGlzLl9oYW5kbGVLZXlkb3duID0gdGhpcy5faGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25EdXJhdGlvbkluTWlsbGlzID0gMzAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgdGhlIG1vZGFsIGlmIGFub3RoZXIgbW9kYWwgaXMgbm90IGFscmVheSBvcGVuXG4gICAgICovXG4gICAgc2hvdygpIHtcbiAgICAgICAgaWYgKE1vZGFsT3ZlcmxheS5pc09wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBNb2RhbE92ZXJsYXkuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fb25IaWRlRm9jdXNFbGVtZW50ID1cbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMub25IaWRlRm9jdXNFbGVtZW50IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2NyZWF0ZUVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMuX3NldFBvc2l0aW9uKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5faGFuZGxlV2luZG93Rm9jdXNpbik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlV2luZG93Qmx1cik7XG4gICAgICAgIC8vIEFkZCB0aGlzIGluIGEgdGltZW91dCBzbyB0aGF0IGFueSBjbGljayBoYW5kbGVyIHRoYXQgb3BlbnMgdGhlIG1vZGFsIGRvbid0IGhhdmUgdG8gY2FsbFxuICAgICAgICAvLyBzdG9wUHJvcGFnYXRpb24oKSAoZm9yZ2V0dGluZyB0aGF0IGxlYWRzIHRvIGNvbmZ1c2luZyBidWdzIHdoZXJlIHRoZSBtb2RhbCBkb24ndCBzaG93IHVwKVxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PlxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kaXNtaXNzSWZDbGlja2VkT3V0c2lkZSlcbiAgICAgICAgKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleWRvd24pO1xuXG4gICAgICAgIC8vIGlPUyBidWdmaXggZm9yIGFuaW1hdGluZyB0aGUgc2hvdyBhbmQgaGlkZSBkaWFsb2cuXG4gICAgICAgIC8vIFByb2JsZW06ICBjYW5ub3Qgc2V0IGZvY3VzIGFuZCB0aGVuIHRyYW5zZm9ybSB0aGUgb2JqZWN0LlxuICAgICAgICAvLyAgICAgICAgICAgVGhlcmVmb3JlIHRoZSBmb2N1cyBoYXMgdG8gYmUgc2V0IGZpcnN0LCB0aGVuIHRoZSBvYmplY3QgY2FuIGJlIG1vdmVkLlxuICAgICAgICAvLyBUaGUgaGFjazogc2V0IG9wYWNpdHkgemVybywgc2V0IGZvY3VzLCB0aGVuIGRvIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLl9jb250YWluZXJFbGUuc3R5bGU7XG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnNsaWRlVXApIHtcbiAgICAgICAgICAgIHN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2JhY2tkcm9wRWxlKTtcbiAgICAgICAgdGhpcy5fZm9jdXNFbGVtZW50KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuc2xpZGVVcCkge1xuICAgICAgICAgICAgLy8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB0byBhdm9pZCBydW5uaW5nIHRoaXMgYXQgdGhlIHNhbWUgdGltZSBhcyB0aGUgZm9jdXMoKVxuICAgICAgICAgICAgLy8gZm9yIHNtb290aGVyIGFuaW1hdGlvbi5cbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDEwMHZoKSc7XG4gICAgICAgICAgICAgICAgc3R5bGUub3BhY2l0eSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbmltYXRpb25EdXJhdGlvbkluTWlsbGlzXG4gICAgICAgICAgICAgICAgICAgIH1tc2A7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgbW9kYWxcbiAgICAgKi9cbiAgICBoaWRlKCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuX2NvbnRhaW5lckVsZS5zdHlsZTtcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuc2xpZGVEb3duKSB7XG4gICAgICAgICAgICBzdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3RoaXMuX2FuaW1hdGlvbkR1cmF0aW9uSW5NaWxsaXN9bXNgO1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMTAwdmgpJztcbiAgICAgICAgICAgICAgICAvLyArIDUwIG1pbGxpcyB0byBnaXZlIHRoZSBhbmltYXRpb24gZW5vdWdoIHRpbWUgdG8gZmluaXNoXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVhcmRvd25Bc3luYyh0aGlzLl9hbmltYXRpb25EdXJhdGlvbkluTWlsbGlzICsgNTApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl90ZWFyZG93bkFzeW5jKDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3RlYXJkb3duQXN5bmMoZHVyYXRpb24pIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9iYWNrZHJvcEVsZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5faGFuZGxlV2luZG93Rm9jdXNpbik7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZVdpbmRvd0JsdXIpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc21pc3NJZkNsaWNrZWRPdXRzaWRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleWRvd24pO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9jdXModGhpcy5fb25IaWRlRm9jdXNFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgdGhpcy5fb25IaWRlRm9jdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RGb2N1c2VkRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICBNb2RhbE92ZXJsYXkuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBtb2RhbC4gSWYgYW4gYG9uRGlzbWlzc2AgY2FsbGJhY2sgaGFzIGJlZW4gc3BlY2lmaWVkLCBpdCdzIGNhbGxlZCB3aXRoXG4gICAgICogdGhlIGByZWFzb25gIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWFzb24gVGhlIHJlYXNvbiBmb3Igd2h5IHRoZSBtb2RhbCB3YXMgZGlzbWlzc2VkLiBUaGlzIGNhbiBiZVxuICAgICAqICAgICAgICBlLmcuIFwib2tcIiBvciBcImNhbmNlbFwiIGZvciBhIGNvbmZpcm0gZGlhbG9nIHN1YmNsYXNzLlxuICAgICAqL1xuICAgIGRpc21pc3MocmVhc29uKSB7XG4gICAgICAgIGlmICh0aGlzLl9kaXNtaXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IG5vSGlkZSA9IHRoaXMuX2Rpc21pc3NDYWxsYmFjayhyZWFzb24pO1xuICAgICAgICAgICAgaWYgKG5vSGlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIF9oYW5kbGVGb2N1cyhlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50LmZvY3VzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY3JlYXRlRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wRWxlLmNsYXNzTmFtZSA9ICdtb2RhbC1iYWNrZHJvcCBtb2RhbC1hY3RpdmUnO1xuICAgICAgICB0aGlzLl9iYWNrZHJvcEVsZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZ0ID0+XG4gICAgICAgICAgICB0aGlzLl9wcmV2ZW50VG91Y2hPdXRzaWRlKGV2dClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZS5jbGFzc05hbWUgPSAnbW9kYWwtY29udGFpbmVyJztcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlLnRhYkluZGV4ID0gJy0xJztcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlLnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZGlhbG9nJyk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLl90aXRsZSk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZS5hcHBlbmRDaGlsZCh0aGlzLl9idWlsZENvbnRlbnQoKSk7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wRWxlLmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lckVsZSk7XG4gICAgfVxuXG4gICAgX2J1aWxkQ29udGVudCgpIHtcbiAgICAgICAgY29uc3QgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZS5jbGFzc05hbWUgPSAnc2Nyb2xsLWNvbnRhaW5lcic7XG4gICAgICAgIGVsZS5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGVsZS5hcHBlbmRDaGlsZCh0aGlzLl9jb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGVsZTtcbiAgICB9XG5cbiAgICBfc2V0UG9zaXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLl9vcHRpb25zLnNpemU7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5fY29udGFpbmVyRWxlLnN0eWxlO1xuICAgICAgICBzdHlsZS5jc3NUZXh0ID0gJyc7XG4gICAgICAgIHN0eWxlLm91dGxpbmUgPSAnbm9uZSc7IC8vIEZJWE1FOiBkb24ndCBhcHBseSBoZXJlXG5cbiAgICAgICAgaWYgKHNpemUpIHtcbiAgICAgICAgICAgIHN0eWxlLnRvcCA9IHNpemUudG9wIHx8ICcwJztcbiAgICAgICAgICAgIHN0eWxlLmJvdHRvbSA9IHNpemUuYm90dG9tIHx8ICcwJztcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSBzaXplLmxlZnQgfHwgJzAnO1xuICAgICAgICAgICAgc3R5bGUucmlnaHQgPSBzaXplLnJpZ2h0IHx8ICcwJztcbiAgICAgICAgICAgIHN0eWxlLm1heFdpZHRoID0gc2l6ZS5tYXhXaWR0aCB8fCAnMTAwJSc7XG4gICAgICAgICAgICBzdHlsZS5tYXhIZWlnaHQgPSBzaXplLm1heEhlaWdodCB8fCAnMTAwJSc7XG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBzaXplLmhlaWdodCB8fCAnYXV0byc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9IHNpemUud2lkdGggfHwgJ2F1dG8nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3R5bGUudG9wID0gJzAnO1xuICAgICAgICAgICAgc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgICAgICBzdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2Rpc21pc3NJZkNsaWNrZWRPdXRzaWRlKGV2dCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NvbnRhaW5lckVsZS5jb250YWlucyhldnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcmV2ZW50VG91Y2hPdXRzaWRlKGV2dCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NvbnRhaW5lckVsZS5jb250YWlucyhldnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZm9jdXNFbGVtZW50KCkge1xuICAgICAgICBjb25zdCBhdXRvZm9jdXNFbGUgPVxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlLnF1ZXJ5U2VsZWN0b3IoJ1thdXRvZm9jdXNdJykgfHxcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hdXRvZm9jdXNdJykgfHxcbiAgICAgICAgICAgIHRoaXMuX2dldEZvY3VzYWJsZUVsZW1lbnRzKHRoaXMuX2NvbnRhaW5lckVsZSlbMF0gfHxcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZTtcbiAgICAgICAgYXV0b2ZvY3VzRWxlLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgX2dldEZvY3VzYWJsZUVsZW1lbnRzKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgYSwgYXVkaW9bY29udHJvbHNdLCBidXR0b24sIGRldGFpbHMsIGVtYmVkLCBpZnJhbWUsIGltZ1t1c2VtYXBdLFxuICAgICAgICAgICAgaW5wdXQ6bm90KFt0eXBlPVwiaGlkZGVuXCJdKSwga2V5Z2VuLCBsYWJlbCwgb2JqZWN0W3VzZW1hcF0sIHNlbGVjdCxcbiAgICAgICAgICAgIHRleHRhcmVhLCB2aWRlb1tjb250cm9sc10sIFt0YWJpbmRleF1gO1xuICAgICAgICByZXR1cm4gWy4uLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcildXG4gICAgICAgICAgICAuZmlsdGVyKGVsZSA9PiBlbGUudGFiSW5kZXggPiAtMSkgLy8gT25seSBpbmNsdWRlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIHBvc2l0aXZlIHRhYmluZGV4XG4gICAgICAgICAgICAuZmlsdGVyKGVsZSA9PiAhZWxlLm1hdGNoZXMoXCJbYXJpYS1oaWRkZW49J3RydWUnXSAqXCIpKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlVGFiYmluZyhzaGlmdEtleSkge1xuICAgICAgICBjb25zdCBmb2N1c2FibGVFbGVzID0gdGhpcy5fZ2V0Rm9jdXNhYmxlRWxlbWVudHModGhpcy5fY29udGFpbmVyRWxlKTtcbiAgICAgICAgY29uc3QgZmlyc3RGb2N1c2FibGVFbGUgPSBmb2N1c2FibGVFbGVzWzBdO1xuICAgICAgICBjb25zdCBsYXN0Rm9jdXNhYmxlRWxlID0gZm9jdXNhYmxlRWxlc1tmb2N1c2FibGVFbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZmlyc3RGb2N1c2FibGVFbGUgJiYgc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGxhc3RGb2N1c2FibGVFbGUuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3RGb2N1c2FibGVFbGUgJiYgIXNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBmaXJzdEZvY3VzYWJsZUVsZS5mb2N1cygpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlS2V5ZG93bihldnQpIHtcbiAgICAgICAgbGV0IGlzSGFuZGxlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gMjcgLyogRXNjYXBlICovKSB7XG4gICAgICAgICAgICBpc0hhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PT0gOSAvKiBUYWIgKi8pIHtcbiAgICAgICAgICAgIGlzSGFuZGxlZCA9IHRoaXMuX2hhbmRsZVRhYmJpbmcoZXZ0LnNoaWZ0S2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0hhbmRsZWQpIHtcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzSGFuZGxlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgd2UgaGF2ZSBhbiBvcGVuIG1vZGFsIGFuZCB0aGUgYnJvd3NlciB0YWIgaGFzIGJlZW4gYmx1cnJlZFxuICAgICAqIGFuZCB0aGVuIGZvY3VzZWQgYWdhaW5cbiAgICAgKi9cbiAgICBfaGFuZGxlV2luZG93Rm9jdXNpbihldnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jb250YWluZXJFbGUuY29udGFpbnMoZXZ0LnRhcmdldCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0Rm9jdXNlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Rm9jdXNlZEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZm9jdXNFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBlbGVtZW50IHdoZW4gdGhlIGJyb3dzZXIgdGFiIGlzIGJsdXJyZWQuIEl0J3Mgc2V0IGJhY2tcbiAgICAgKiBpbiBfaGFuZGxlV2luZG93Rm9jdXNpblxuICAgICAqL1xuICAgIF9oYW5kbGVXaW5kb3dCbHVyKCkge1xuICAgICAgICB0aGlzLl9sYXN0Rm9jdXNlZEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIH1cbn1cblxuTW9kYWxPdmVybGF5LmlzT3BlbiA9IGZhbHNlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGFsT3ZlcmxheTtcbiJdfQ==","deps":{},"file":"/home/node/src/routes/podlet-global-search/lib/client/modal-overlay.js","index":10,"indexDeps":{}}
]
