[
{"id":"1892a34e5d6b4ed6f915a394a6edd0a10cae9cfcc462d96105af4532898b7521","source":"\"use strict\";\nvar types_1 = require('../types');\nfunction push(entry) {\n    if (!window[types_1.WINDOW_KEY]) {\n        window[types_1.WINDOW_KEY] = [];\n    }\n    return window[types_1.WINDOW_KEY].push(entry);\n}\n;\nfunction getContextConfig(key, value) {\n    if (typeof key === 'object') {\n        return key;\n    }\n    return (_a = {}, _a[key] = value, _a);\n    var _a;\n}\nexports.__esModule = true;\nexports[\"default\"] = {\n    trackPage: trackPage,\n    trackEvent: trackEvent,\n    trackEventLater: trackEventLater,\n    setPageContext: setPageContext,\n    getApi: getApi\n};\nfunction trackPage(config) {\n    return push([types_1.PAGE, config]);\n}\nexports.trackPage = trackPage;\n;\nfunction trackEvent(config) {\n    return push([types_1.EVENT, config]);\n}\nexports.trackEvent = trackEvent;\n;\nfunction trackEventLater(config) {\n    return push([types_1.EVENT_LATER, config]);\n}\nexports.trackEventLater = trackEventLater;\n;\nfunction setPageContext(key, value) {\n    return push([types_1.CONFIG, getContextConfig(key, value)]);\n}\nexports.setPageContext = setPageContext;\n;\nfunction getApi(callback) {\n    return push([types_1.GET_API, callback]);\n}\nexports.getApi = getApi;\n;\nfunction _getBeacons() {\n    return window[types_1.WINDOW_KEY];\n}\nexports._getBeacons = _getBeacons;\n;\n//# sourceMappingURL=index.js.map","deps":{"../types":"666a79f70f79475f4f34b8ad874671992c0eaa51c6d5eeee28b38597d00cb5bf"},"file":"/home/node/src/node_modules/@finn-no/analytics/lib/client/index.js","index":1,"indexDeps":{"../types":2}}
,
{"id":"666a79f70f79475f4f34b8ad874671992c0eaa51c6d5eeee28b38597d00cb5bf","source":"\"use strict\";\nexports.WINDOW_KEY = '__analyticsQueue';\nexports.EVENT = 'event';\nexports.PAGE = 'page';\nexports.CONFIG = 'config';\nexports.EVENT_LATER = 'event-later';\nexports.GET_API = 'get-api';\n//# sourceMappingURL=types.js.map","deps":{},"file":"/home/node/src/node_modules/@finn-no/analytics/lib/types.js","index":2,"indexDeps":{}}
,
{"id":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a","source":"'use strict';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar index = createCommonjsModule(function (module, exports) {\n'use strict';\n\nexports.escape = function (input) {\n\treturn input.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n};\n\nexports.unescape = function (input) {\n\treturn input.replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&#39;/g, '\\'').replace(/&quot;/g, '\"').replace(/&amp;/g, '&');\n};\n\nexports.escapeTag = function (input) {\n\tvar output = input[0];\n\tfor (var i = 1; i < arguments.length; i++) {\n\t\toutput = output + exports.escape(arguments[i]) + input[i];\n\t}\n\treturn output;\n};\n\nexports.unescapeTag = function (input) {\n\tvar output = input[0];\n\tfor (var i = 1; i < arguments.length; i++) {\n\t\toutput = output + exports.unescape(arguments[i]) + input[i];\n\t}\n\treturn output;\n};\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\n/**\n * Create an element.\n *\n * @param {boolean} safeContent If content is safe to fully unescape\n * @param {String} name The element type name, plus optional classes\n * @param {Object} attributes The element's attributes\n * @param {...any} content The element's content\n */\nfunction createElement(safeContent, name, attributes) {\n    if (typeof name != 'string') {\n        throw new TypeError('The name argument must be a string');\n    }\n\n    var defaultNamespace = document.documentElement.namespaceURI;\n\n    // Handle class names shortcut\n\n    var _name$split = name.split('.'),\n        _name$split2 = _toArray(_name$split),\n        qName = _name$split2[0],\n        classes = _name$split2.slice(1);\n\n    var _getNamespaceParts = getNamespaceParts(qName),\n        _getNamespaceParts$na = _getNamespaceParts.namespace,\n        namespace = _getNamespaceParts$na === undefined ? defaultNamespace : _getNamespaceParts$na,\n        localName = _getNamespaceParts.localName;\n\n    var ele = document.createElementNS(namespace, localName);\n\n    if (classes.length) {\n        var _ele$classList;\n\n        (_ele$classList = ele.classList).add.apply(_ele$classList, _toConsumableArray(classes));\n    }\n\n    if (attributes != null) {\n        if ((typeof attributes === 'undefined' ? 'undefined' : _typeof(attributes)) != 'object') {\n            throw new TypeError('The attributes argument must be an object');\n        }\n\n        if (attributes instanceof Node) {\n            throw new TypeError('The attributes argument cannot be a Node. Did you forget to pass attributes?');\n        }\n\n        Object.entries(attributes).forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                qName = _ref2[0],\n                value = _ref2[1];\n\n            if (value !== null && value !== false) {\n                if (value === true) {\n                    value = ''; // Treat as boolean attribute\n                }\n\n                var _getNamespaceParts2 = getNamespaceParts(qName),\n                    _namespace = _getNamespaceParts2.namespace,\n                    _localName = _getNamespaceParts2.localName;\n\n                if (_localName.startsWith('on') && typeof value == 'function') {\n                    ele.addEventListener(_localName.slice(2), value);\n                    return;\n                }\n\n                // setAttributeNS() with the HTML namespace doesn't set IDL attributes\n                if (_namespace) {\n                    ele.setAttributeNS(_namespace, _localName, value);\n                } else {\n                    ele.setAttribute(_localName, value);\n                }\n            }\n        });\n    }\n\n    for (var _len = arguments.length, content = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        content[_key - 3] = arguments[_key];\n    }\n\n    content.filter(function (value) {\n        return value !== null;\n    }).reduce(function (prev, curr) {\n        return prev.concat(curr);\n    }, []) // flatten\n    .forEach(function (value) {\n        return ele.appendChild(toNode(value));\n    });\n    ele.normalize();\n\n    function toNode(value) {\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n            case 'boolean':\n            case 'number':\n                return document.createTextNode(value.toString());\n            case 'string':\n                value = handleEscapedChars(value);\n                return document.createTextNode(value.toString());\n\n            case 'undefined':\n                return document.createTextNode('undefined');\n\n            default:\n                if (value instanceof Node) {\n                    return value;\n                }\n        }\n\n        throw new TypeError('Argument of type \\'' + (typeof value === 'undefined' ? 'undefined' : _typeof(value)) + '\\' cannot be used as content.');\n    }\n\n    function handleEscapedChars(v) {\n        var regExpInEscapedChar = /&#.*;/;\n        if (safeContent && regExpInEscapedChar.test(v)) {\n            var tmpEle = document.createElement('span');\n            tmpEle.innerHTML = v;\n            return tmpEle.textContent;\n        } else {\n            return index.unescape(v);\n        }\n    }\n\n    function getNamespace(prefix) {\n        switch (prefix) {\n            case 'html':\n                return 'http://www.w3.org/1999/xhtml';\n            case 'svg':\n                return 'http://www.w3.org/2000/svg';\n            case 'xlink':\n                return 'http://www.w3.org/1999/xlink';\n        }\n    }\n\n    function getNamespaceParts(qName) {\n        if (qName.indexOf(':') !== -1) {\n            var _qName$split = qName.split(':'),\n                _qName$split2 = _slicedToArray(_qName$split, 2),\n                prefix = _qName$split2[0],\n                _localName2 = _qName$split2[1];\n\n            var _namespace2 = getNamespace(prefix);\n            if (!_namespace2) {\n                throw Error('No namespace found for prefix \"' + prefix + '\"');\n            }\n            return { namespace: _namespace2, localName: _localName2 };\n        }\n\n        return { localName: qName };\n    }\n    return ele;\n}\n\n/* eslint-env node */\nmodule.exports = createElement.bind(null, false);\n// only use createElementFromSafeContent when content is from a secure source\nmodule.exports.createElementFromSafeContent = createElement.bind(null, true);\n//# sourceMappingURL=index.js.map\n","deps":{},"file":"/home/node/src/node_modules/@finn-no/create-element/index.js","index":3,"indexDeps":{}}
,
{"id":"f6ee56709d11090f8d91d50b54de34a3111ddf247ae24c74f74e1aaabbf752af","source":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nrequire('intersection-observer');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Wrapper for IntersectionObserver API, useful for inscreen tracking and\n * lazy loading. Defines a specific behavior for observing a collection of\n * elements.\n */\nvar InscreenObserver = function () {\n\n    /**\n     * Define what happens when an element is observed.\n     * @callback observationCallback\n     * @param {Element} The observed element.\n     */\n\n    /**\n     * Create an InscreenObserver.\n     * @param {observationCallback} callback The callback that handles observations.\n     * @param {Object} [options={}] Optional observation behavior.\n     * @param {number} [options.proximity=0] Observe elements within [proximity] pixels of the viewport.\n     * @param {number} [options.threshold=0] Elements must be visible by a [threshold] fraction before being observed.\n     * @param {number} [options.timeout=0] Wait for [timeout] milliseconds before observing elements after entering then viewport.\n     * @param {boolean} [options.once=false] If true, observe elements both when entering and exiting the viewport.\n     */\n    function InscreenObserver(callback) {\n        var _this = this;\n\n        var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n            _ref$proximity = _ref.proximity,\n            proximity = _ref$proximity === undefined ? 0 : _ref$proximity,\n            _ref$threshold = _ref.threshold,\n            threshold = _ref$threshold === undefined ? 0 : _ref$threshold,\n            _ref$timeout = _ref.timeout,\n            timeout = _ref$timeout === undefined ? 0 : _ref$timeout,\n            _ref$once = _ref.once,\n            once = _ref$once === undefined ? false : _ref$once;\n\n        _classCallCheck(this, InscreenObserver);\n\n        this._callback = callback;\n        this._proximity = proximity;\n        this._threshold = threshold;\n        this._timeout = timeout;\n        this._once = once;\n        this._observables = [];\n        this._observer = new IntersectionObserver(function (entries) {\n            return _this.handleObservations(entries);\n        }, {\n            rootMargin: proximity + 'px',\n            threshold: threshold\n        });\n    }\n\n    _createClass(InscreenObserver, [{\n        key: 'handleObservations',\n        value: function handleObservations(entries) {\n            var _this2 = this;\n\n            entries.forEach(function (entry) {\n                if (_this2.isEnteringViewport(entry)) {\n                    _this2.handleOrSetObservationTimeout(entry.target);\n                } else {\n                    _this2.clearObservationTimeout(entry.target);\n                }\n            });\n        }\n    }, {\n        key: 'isEnteringViewport',\n        value: function isEnteringViewport(entry) {\n            return this.isInscreenByThreshold(entry);\n        }\n    }, {\n        key: 'isInscreenByThreshold',\n        value: function isInscreenByThreshold(entry) {\n            return entry.isIntersecting && entry.intersectionRatio >= this._threshold;\n        }\n    }, {\n        key: 'handleOrSetObservationTimeout',\n        value: function handleOrSetObservationTimeout(element) {\n            if (this._timeout > 0) {\n                this.setObservationTimeout(element);\n            } else {\n                this.handleObservation(element);\n            }\n        }\n    }, {\n        key: 'setObservationTimeout',\n        value: function setObservationTimeout(element) {\n            var _this3 = this;\n\n            var timeout = setTimeout(function () {\n                _this3.handleObservation(element);\n            }, this._timeout);\n            this.addObservable(element, timeout);\n        }\n    }, {\n        key: 'handleObservation',\n        value: function handleObservation(element) {\n            this._callback(element);\n            if (this._once) {\n                this.unobserve(element);\n            }\n        }\n    }, {\n        key: 'addObservable',\n        value: function addObservable(element, timeout) {\n            this._observables.push({ element: element, timeout: timeout });\n        }\n    }, {\n        key: 'clearObservationTimeout',\n        value: function clearObservationTimeout(element) {\n            var observable = this.removeObservable(element);\n            if (observable) {\n                clearTimeout(observable.timeout);\n            }\n        }\n    }, {\n        key: 'removeObservable',\n        value: function removeObservable(element) {\n            var isObservedElement = function isObservedElement(observable) {\n                return observable.element === element;\n            };\n            var observable = this._observables.filter(isObservedElement).pop();\n            this._observables = this._observables.filter(function (obs) {\n                return obs !== observable;\n            });\n            return observable;\n        }\n\n        /**\n         * Add an element to observe.\n         * @param {Element} element Element to observe\n         */\n\n    }, {\n        key: 'observe',\n        value: function observe(element) {\n            this._observer.observe(element);\n        }\n\n        /**\n         * Remove an observed element.\n         * @param {Element} element Element to unobserve\n         */\n\n    }, {\n        key: 'unobserve',\n        value: function unobserve(element) {\n            try {\n                this._observer.unobserve(element);\n            } catch (e) {\n                // Fix for throwing TypeMismatchError in Edge 15, originating\n                // from the IntersectionObserver polyfill.\n            }\n            this.clearObservationTimeout(element);\n        }\n\n        /**\n         * Stop observing elements altogether.\n         */\n\n    }, {\n        key: 'disconnect',\n        value: function disconnect() {\n            this._observer.disconnect();\n        }\n    }]);\n\n    return InscreenObserver;\n}();\n\nexports.default = InscreenObserver;","deps":{"intersection-observer":"0c0bdbe110508d26bd2d85ffde732960acddc1f3587077943bde7c3edffff0fe"},"file":"/home/node/src/node_modules/@finn-no/inscreen-observer/lib/index.js","index":4,"indexDeps":{"intersection-observer":6}}
,
{"id":"81be46a7d42e3879307ccb9eb181627735cc2b06f7982c3bae44b6fb3741afa4","source":"/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState)\n\n\n  if (!loaded)\n  doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener)\n    loaded = 1\n    while (listener = fns.shift()) listener()\n  })\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn)\n  }\n\n});\n","deps":{},"file":"/home/node/src/node_modules/domready/ready.js","index":5,"indexDeps":{}}
,
{"id":"0c0bdbe110508d26bd2d85ffde732960acddc1f3587077943bde7c3edffff0fe","source":"/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(window, document) {\n'use strict';\n\n\n// Exits early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/WICG/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observering a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://wicg.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    this.intersectionRatio = intersectionArea / targetArea;\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://wicg.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  // If the target is already being observed, do nothing.\n  if (this._observationTargets.some(function(item) {\n    return item.element == target;\n  })) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibilty state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if ('MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://wicg.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its executiong, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/WICG/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child elemnt (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}(window, document));\n","deps":{},"file":"/home/node/src/node_modules/intersection-observer/intersection-observer.js","index":6,"indexDeps":{}}
,
{"id":"1f953d38b2e97fcdaed48a24e1ad739b73113bd86a870655906a9583e432a238","source":"'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar el = require('@finn-no/create-element');\nvar ImageFormat = require('./image-format');\n\nvar AdImage = function () {\n    function AdImage(image) {\n        var imageCdnUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n        _classCallCheck(this, AdImage);\n\n        this.width = image.width;\n        this.height = image.height;\n        this.url = image.url;\n        this.type = image.type;\n        this.cdnUrl = imageCdnUrl;\n        this.format = ImageFormat.fromWidthAndHeight(this.width, this.height);\n    }\n\n    _createClass(AdImage, [{\n        key: 'render',\n        value: function render() {\n            var _getImageSrc = this.getImageSrc(),\n                src = _getImageSrc.src,\n                srcset = _getImageSrc.srcset,\n                sizes = _getImageSrc.sizes;\n\n            var className = this.format.className;\n\n\n            if (this.isLogo()) {\n                return el('div.format1by1.bg-milk', null, el('img.centered-image.r-pvl.company-logo', { src: src, alt: '' }));\n            } else {\n                return el('div.' + className, null, el('img.centered-image', { src: src, srcset: srcset, sizes: sizes, alt: '' }));\n            }\n        }\n    }, {\n        key: 'getImageSrc',\n        value: function getImageSrc() {\n            if (this.isLogo()) {\n                return {\n                    src: this.getSrcUrl('480w')\n                };\n            }\n            var validWidthToSizes = this.getValidWidthToSizes();\n            return {\n                src: this.getSrcUrl(this.getFirstValidSizeOrDefault(validWidthToSizes)),\n                srcset: this.getSrcset(validWidthToSizes),\n                sizes: '(min-width: 990px) 330px, (min-width: 768px) 33vw, (min-width: 480px) 50vw'\n            };\n        }\n    }, {\n        key: 'isLogo',\n        value: function isLogo() {\n            return this.type === 'LOGO';\n        }\n    }, {\n        key: 'getValidWidthToSizes',\n        value: function getValidWidthToSizes() {\n            var _this = this;\n\n            return this.format.widthToSizes.filter(function (_ref) {\n                var _ref2 = _slicedToArray(_ref, 1),\n                    width = _ref2[0];\n\n                return _this.isLessThanOrEqualsImageWidthAndHeight(parseInt(width));\n            });\n        }\n    }, {\n        key: 'isLessThanOrEqualsImageWidthAndHeight',\n        value: function isLessThanOrEqualsImageWidthAndHeight(formatWidth) {\n            if (this.format.className === ImageFormat.SQUARE) {\n                return formatWidth <= this.width && formatWidth <= this.height;\n            } else {\n                return formatWidth <= this.width;\n            }\n        }\n    }, {\n        key: 'getFirstValidSizeOrDefault',\n        value: function getFirstValidSizeOrDefault(widthToSizes) {\n            if (widthToSizes && widthToSizes.length > 0) {\n                return widthToSizes[0][1];\n            }\n            return '640w';\n        }\n    }, {\n        key: 'getSrcUrl',\n        value: function getSrcUrl(size) {\n            return this.cdnUrl + '/dynamic/' + size + '/' + this.url;\n        }\n    }, {\n        key: 'getSrcset',\n        value: function getSrcset(widthToSizes) {\n            var _this2 = this;\n\n            return widthToSizes.map(function (_ref3) {\n                var _ref4 = _slicedToArray(_ref3, 2),\n                    width = _ref4[0],\n                    size = _ref4[1];\n\n                return _this2.getSrcsetLineForWidthAndSize(width, size);\n            }).join(',\\n');\n        }\n    }, {\n        key: 'getSrcsetLineForWidthAndSize',\n        value: function getSrcsetLineForWidthAndSize(width, size) {\n            return this.getSrcUrl(size) + ' ' + width;\n        }\n    }]);\n\n    return AdImage;\n}();\n\nmodule.exports = AdImage;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkLWltYWdlLmpzIl0sIm5hbWVzIjpbImVsIiwicmVxdWlyZSIsIkltYWdlRm9ybWF0IiwiQWRJbWFnZSIsImltYWdlIiwiaW1hZ2VDZG5VcmwiLCJ3aWR0aCIsImhlaWdodCIsInVybCIsInR5cGUiLCJjZG5VcmwiLCJmb3JtYXQiLCJmcm9tV2lkdGhBbmRIZWlnaHQiLCJnZXRJbWFnZVNyYyIsInNyYyIsInNyY3NldCIsInNpemVzIiwiY2xhc3NOYW1lIiwiaXNMb2dvIiwiYWx0IiwiZ2V0U3JjVXJsIiwidmFsaWRXaWR0aFRvU2l6ZXMiLCJnZXRWYWxpZFdpZHRoVG9TaXplcyIsImdldEZpcnN0VmFsaWRTaXplT3JEZWZhdWx0IiwiZ2V0U3Jjc2V0Iiwid2lkdGhUb1NpemVzIiwiZmlsdGVyIiwiaXNMZXNzVGhhbk9yRXF1YWxzSW1hZ2VXaWR0aEFuZEhlaWdodCIsInBhcnNlSW50IiwiZm9ybWF0V2lkdGgiLCJTUVVBUkUiLCJsZW5ndGgiLCJzaXplIiwibWFwIiwiZ2V0U3Jjc2V0TGluZUZvcldpZHRoQW5kU2l6ZSIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUFFQSxJQUFNQSxLQUFLQyxRQUFRLHlCQUFSLENBQVg7QUFDQSxJQUFNQyxjQUFjRCxRQUFRLGdCQUFSLENBQXBCOztJQUVNRSxPO0FBQ0YscUJBQVlDLEtBQVosRUFBcUM7QUFBQSxZQUFsQkMsV0FBa0IsdUVBQUosRUFBSTs7QUFBQTs7QUFDakMsYUFBS0MsS0FBTCxHQUFhRixNQUFNRSxLQUFuQjtBQUNBLGFBQUtDLE1BQUwsR0FBY0gsTUFBTUcsTUFBcEI7QUFDQSxhQUFLQyxHQUFMLEdBQVdKLE1BQU1JLEdBQWpCO0FBQ0EsYUFBS0MsSUFBTCxHQUFZTCxNQUFNSyxJQUFsQjtBQUNBLGFBQUtDLE1BQUwsR0FBY0wsV0FBZDtBQUNBLGFBQUtNLE1BQUwsR0FBY1QsWUFBWVUsa0JBQVosQ0FBK0IsS0FBS04sS0FBcEMsRUFBMkMsS0FBS0MsTUFBaEQsQ0FBZDtBQUNIOzs7O2lDQUVRO0FBQUEsK0JBQzBCLEtBQUtNLFdBQUwsRUFEMUI7QUFBQSxnQkFDR0MsR0FESCxnQkFDR0EsR0FESDtBQUFBLGdCQUNRQyxNQURSLGdCQUNRQSxNQURSO0FBQUEsZ0JBQ2dCQyxLQURoQixnQkFDZ0JBLEtBRGhCOztBQUFBLGdCQUVHQyxTQUZILEdBRWlCLEtBQUtOLE1BRnRCLENBRUdNLFNBRkg7OztBQUlMLGdCQUFJLEtBQUtDLE1BQUwsRUFBSixFQUFtQjtBQUNmLHVCQUFPbEIsR0FDSCx3QkFERyxFQUVILElBRkcsRUFHSEEsR0FBRyx1Q0FBSCxFQUE0QyxFQUFFYyxRQUFGLEVBQU9LLEtBQUssRUFBWixFQUE1QyxDQUhHLENBQVA7QUFLSCxhQU5ELE1BTU87QUFDSCx1QkFBT25CLFlBQ0lpQixTQURKLEVBRUgsSUFGRyxFQUdIakIsR0FBRyxvQkFBSCxFQUF5QixFQUFFYyxRQUFGLEVBQU9DLGNBQVAsRUFBZUMsWUFBZixFQUFzQkcsS0FBSyxFQUEzQixFQUF6QixDQUhHLENBQVA7QUFLSDtBQUNKOzs7c0NBRWE7QUFDVixnQkFBSSxLQUFLRCxNQUFMLEVBQUosRUFBbUI7QUFDZix1QkFBTztBQUNISix5QkFBSyxLQUFLTSxTQUFMLENBQWUsTUFBZjtBQURGLGlCQUFQO0FBR0g7QUFDRCxnQkFBTUMsb0JBQW9CLEtBQUtDLG9CQUFMLEVBQTFCO0FBQ0EsbUJBQU87QUFDSFIscUJBQUssS0FBS00sU0FBTCxDQUNELEtBQUtHLDBCQUFMLENBQWdDRixpQkFBaEMsQ0FEQyxDQURGO0FBSUhOLHdCQUFRLEtBQUtTLFNBQUwsQ0FBZUgsaUJBQWYsQ0FKTDtBQUtITCx1QkFDSTtBQU5ELGFBQVA7QUFRSDs7O2lDQUVRO0FBQ0wsbUJBQU8sS0FBS1AsSUFBTCxLQUFjLE1BQXJCO0FBQ0g7OzsrQ0FFc0I7QUFBQTs7QUFDbkIsbUJBQU8sS0FBS0UsTUFBTCxDQUFZYyxZQUFaLENBQXlCQyxNQUF6QixDQUFnQztBQUFBO0FBQUEsb0JBQUVwQixLQUFGOztBQUFBLHVCQUNuQyxNQUFLcUIscUNBQUwsQ0FBMkNDLFNBQVN0QixLQUFULENBQTNDLENBRG1DO0FBQUEsYUFBaEMsQ0FBUDtBQUdIOzs7OERBRXFDdUIsVyxFQUFhO0FBQy9DLGdCQUFJLEtBQUtsQixNQUFMLENBQVlNLFNBQVosS0FBMEJmLFlBQVk0QixNQUExQyxFQUFrRDtBQUM5Qyx1QkFBT0QsZUFBZSxLQUFLdkIsS0FBcEIsSUFBNkJ1QixlQUFlLEtBQUt0QixNQUF4RDtBQUNILGFBRkQsTUFFTztBQUNILHVCQUFPc0IsZUFBZSxLQUFLdkIsS0FBM0I7QUFDSDtBQUNKOzs7bURBRTBCbUIsWSxFQUFjO0FBQ3JDLGdCQUFJQSxnQkFBZ0JBLGFBQWFNLE1BQWIsR0FBc0IsQ0FBMUMsRUFBNkM7QUFDekMsdUJBQU9OLGFBQWEsQ0FBYixFQUFnQixDQUFoQixDQUFQO0FBQ0g7QUFDRCxtQkFBTyxNQUFQO0FBQ0g7OztrQ0FFU08sSSxFQUFNO0FBQ1osbUJBQVUsS0FBS3RCLE1BQWYsaUJBQWlDc0IsSUFBakMsU0FBeUMsS0FBS3hCLEdBQTlDO0FBQ0g7OztrQ0FFU2lCLFksRUFBYztBQUFBOztBQUNwQixtQkFBT0EsYUFDRlEsR0FERSxDQUNFO0FBQUE7QUFBQSxvQkFBRTNCLEtBQUY7QUFBQSxvQkFBUzBCLElBQVQ7O0FBQUEsdUJBQ0QsT0FBS0UsNEJBQUwsQ0FBa0M1QixLQUFsQyxFQUF5QzBCLElBQXpDLENBREM7QUFBQSxhQURGLEVBSUZHLElBSkUsQ0FJRyxLQUpILENBQVA7QUFLSDs7O3FEQUU0QjdCLEssRUFBTzBCLEksRUFBTTtBQUN0QyxtQkFBVSxLQUFLWixTQUFMLENBQWVZLElBQWYsQ0FBVixTQUFrQzFCLEtBQWxDO0FBQ0g7Ozs7OztBQUdMOEIsT0FBT0MsT0FBUCxHQUFpQmxDLE9BQWpCIiwiZmlsZSI6ImFkLWltYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBlbCA9IHJlcXVpcmUoJ0BmaW5uLW5vL2NyZWF0ZS1lbGVtZW50Jyk7XG5jb25zdCBJbWFnZUZvcm1hdCA9IHJlcXVpcmUoJy4vaW1hZ2UtZm9ybWF0Jyk7XG5cbmNsYXNzIEFkSW1hZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGltYWdlLCBpbWFnZUNkblVybCA9ICcnKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudXJsID0gaW1hZ2UudXJsO1xuICAgICAgICB0aGlzLnR5cGUgPSBpbWFnZS50eXBlO1xuICAgICAgICB0aGlzLmNkblVybCA9IGltYWdlQ2RuVXJsO1xuICAgICAgICB0aGlzLmZvcm1hdCA9IEltYWdlRm9ybWF0LmZyb21XaWR0aEFuZEhlaWdodCh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHNyYywgc3Jjc2V0LCBzaXplcyB9ID0gdGhpcy5nZXRJbWFnZVNyYygpO1xuICAgICAgICBjb25zdCB7IGNsYXNzTmFtZSB9ID0gdGhpcy5mb3JtYXQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNMb2dvKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbChcbiAgICAgICAgICAgICAgICAnZGl2LmZvcm1hdDFieTEuYmctbWlsaycsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBlbCgnaW1nLmNlbnRlcmVkLWltYWdlLnItcHZsLmNvbXBhbnktbG9nbycsIHsgc3JjLCBhbHQ6ICcnIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVsKFxuICAgICAgICAgICAgICAgIGBkaXYuJHtjbGFzc05hbWV9YCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIGVsKCdpbWcuY2VudGVyZWQtaW1hZ2UnLCB7IHNyYywgc3Jjc2V0LCBzaXplcywgYWx0OiAnJyB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEltYWdlU3JjKCkge1xuICAgICAgICBpZiAodGhpcy5pc0xvZ28oKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzcmM6IHRoaXMuZ2V0U3JjVXJsKCc0ODB3JyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbGlkV2lkdGhUb1NpemVzID0gdGhpcy5nZXRWYWxpZFdpZHRoVG9TaXplcygpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3JjOiB0aGlzLmdldFNyY1VybChcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZpcnN0VmFsaWRTaXplT3JEZWZhdWx0KHZhbGlkV2lkdGhUb1NpemVzKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHNyY3NldDogdGhpcy5nZXRTcmNzZXQodmFsaWRXaWR0aFRvU2l6ZXMpLFxuICAgICAgICAgICAgc2l6ZXM6XG4gICAgICAgICAgICAgICAgJyhtaW4td2lkdGg6IDk5MHB4KSAzMzBweCwgKG1pbi13aWR0aDogNzY4cHgpIDMzdncsIChtaW4td2lkdGg6IDQ4MHB4KSA1MHZ3JyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpc0xvZ28oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdMT0dPJztcbiAgICB9XG5cbiAgICBnZXRWYWxpZFdpZHRoVG9TaXplcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0LndpZHRoVG9TaXplcy5maWx0ZXIoKFt3aWR0aF0pID0+XG4gICAgICAgICAgICB0aGlzLmlzTGVzc1RoYW5PckVxdWFsc0ltYWdlV2lkdGhBbmRIZWlnaHQocGFyc2VJbnQod2lkdGgpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlzTGVzc1RoYW5PckVxdWFsc0ltYWdlV2lkdGhBbmRIZWlnaHQoZm9ybWF0V2lkdGgpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0LmNsYXNzTmFtZSA9PT0gSW1hZ2VGb3JtYXQuU1FVQVJFKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0V2lkdGggPD0gdGhpcy53aWR0aCAmJiBmb3JtYXRXaWR0aCA8PSB0aGlzLmhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRXaWR0aCA8PSB0aGlzLndpZHRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Rmlyc3RWYWxpZFNpemVPckRlZmF1bHQod2lkdGhUb1NpemVzKSB7XG4gICAgICAgIGlmICh3aWR0aFRvU2l6ZXMgJiYgd2lkdGhUb1NpemVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB3aWR0aFRvU2l6ZXNbMF1bMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc2NDB3JztcbiAgICB9XG5cbiAgICBnZXRTcmNVcmwoc2l6ZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jZG5Vcmx9L2R5bmFtaWMvJHtzaXplfS8ke3RoaXMudXJsfWA7XG4gICAgfVxuXG4gICAgZ2V0U3Jjc2V0KHdpZHRoVG9TaXplcykge1xuICAgICAgICByZXR1cm4gd2lkdGhUb1NpemVzXG4gICAgICAgICAgICAubWFwKChbd2lkdGgsIHNpemVdKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3Jjc2V0TGluZUZvcldpZHRoQW5kU2l6ZSh3aWR0aCwgc2l6ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5qb2luKCcsXFxuJyk7XG4gICAgfVxuXG4gICAgZ2V0U3Jjc2V0TGluZUZvcldpZHRoQW5kU2l6ZSh3aWR0aCwgc2l6ZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRTcmNVcmwoc2l6ZSl9ICR7d2lkdGh9YDtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWRJbWFnZTtcbiJdfQ==","deps":{"./image-format":"f7d6a9974ba93ed5952d979b1c99aa4ac23c60db9d7e8fd3dedf0c8e0e437f7c","@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/ad-image.js","index":7,"indexDeps":{"./image-format":10,"@finn-no/create-element":3}}
,
{"id":"2fd5d60fff695548be4cf6605c55ce0135624a3d5225ca95f5a37522f0dd91d8","source":"'use strict';\n\nvar el = require('@finn-no/create-element');\nvar AdImage = require('./ad-image');\n\nvar adItem = function adItem(_ref) {\n    var ad = _ref.ad,\n        state = _ref.state,\n        handleAdClick = _ref.handleAdClick,\n        handleRemoveClick = _ref.handleRemoveClick;\n\n    var imageEle = new AdImage(ad.image, state.imgCdnUrl).render();\n    var tagEle = getItemTag(ad);\n    var removeButtonEle = removeButton(handleRemoveClick);\n\n    var linkOptions = {\n        href: ad.url,\n        onclick: handleAdClick,\n        'data-version': ad.version,\n        'data-score': ad.score,\n        'data-uuid': state.uuid,\n        style: 'width: 100%'\n    };\n\n    var resultItem = el('div.rec-item.flex.align-items-center', { 'data-rec-item': true }, el('a.linkblock.licorice.flex', linkOptions, el('h3.screen-reader-only', null, ad.heading), el('div.rec-media', null, imageEle), el('div.rec-item__tag', null, tagEle)), el('div.rec-item__remove', null, removeButtonEle));\n    resultItem.style.transition = 'opacity .6s';\n    resultItem.style.opacity = '0';\n\n    imageEle.querySelector('img').addEventListener('load', function (event) {\n        if (ad.image.type === 'LOGO') {\n            resultItem.classList.add('bg-milk');\n        } else {\n            resultItem.classList.add('bg-blur');\n            resultItem.style.backgroundImage = event.target.currentSrc && 'url(' + event.target.currentSrc + ')';\n        }\n\n        resultItem.style.opacity = '1';\n    });\n\n    return resultItem;\n};\n\nfunction getItemTag(ad) {\n    var iconEle = getMarketIcon(ad);\n    var labelEle = getTagLabel(ad);\n\n    return el('div.rec-tag.milk.unoverflowify', null, el('div.fleft', null, iconEle), labelEle && el('div.rec-tag__label', null, labelEle));\n}\n\nfunction getMarketIcon(ad) {\n    var market = ad.type.toLowerCase();\n\n    return el('svg:svg.blockify', { focusable: 'false', width: '30', height: '30' }, el('svg:use', { 'xlink:href': '#icon-ni-' + market }));\n}\n\nfunction getTagLabel(ad) {\n    if (!ad.label) {\n        return null;\n    }\n\n    var descriptionEle = getTagDescription(ad);\n\n    return el('div.rec-label', null, el('div.rec-price.truncate', null, ad.label), descriptionEle);\n}\n\nfunction getTagDescription(ad) {\n    var description = ad.location.combined;\n    return description && el('div.rec-description.truncate', null, description);\n}\n\nfunction removeButton(handleRemove) {\n    removeButton.count = removeButton.count ? removeButton.count + 1 : 1;\n    var buttonOptions = {\n        type: 'button',\n        title: 'Fjern anbefaling',\n        'aria-label': 'Fjern anbefaling',\n        onclick: handleRemove,\n        id: 'recommendation-remove-button-' + removeButton.count\n    };\n\n    return el('button.blank.r-pam.ghost-icon.icon-remove', buttonOptions, el('svg:svg.valign-middle', { focusable: 'false', width: '30', height: '30' }, el('svg:use', { 'xlink:href': '#icon-remove' })));\n}\n\nmodule.exports = adItem;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkLWl0ZW0uanMiXSwibmFtZXMiOlsiZWwiLCJyZXF1aXJlIiwiQWRJbWFnZSIsImFkSXRlbSIsImFkIiwic3RhdGUiLCJoYW5kbGVBZENsaWNrIiwiaGFuZGxlUmVtb3ZlQ2xpY2siLCJpbWFnZUVsZSIsImltYWdlIiwiaW1nQ2RuVXJsIiwicmVuZGVyIiwidGFnRWxlIiwiZ2V0SXRlbVRhZyIsInJlbW92ZUJ1dHRvbkVsZSIsInJlbW92ZUJ1dHRvbiIsImxpbmtPcHRpb25zIiwiaHJlZiIsInVybCIsIm9uY2xpY2siLCJ2ZXJzaW9uIiwic2NvcmUiLCJ1dWlkIiwic3R5bGUiLCJyZXN1bHRJdGVtIiwiaGVhZGluZyIsInRyYW5zaXRpb24iLCJvcGFjaXR5IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYmFja2dyb3VuZEltYWdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjdXJyZW50U3JjIiwiaWNvbkVsZSIsImdldE1hcmtldEljb24iLCJsYWJlbEVsZSIsImdldFRhZ0xhYmVsIiwibWFya2V0IiwidG9Mb3dlckNhc2UiLCJmb2N1c2FibGUiLCJ3aWR0aCIsImhlaWdodCIsImxhYmVsIiwiZGVzY3JpcHRpb25FbGUiLCJnZXRUYWdEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwibG9jYXRpb24iLCJjb21iaW5lZCIsImhhbmRsZVJlbW92ZSIsImNvdW50IiwiYnV0dG9uT3B0aW9ucyIsInRpdGxlIiwiaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxLQUFLQyxRQUFRLHlCQUFSLENBQVg7QUFDQSxJQUFNQyxVQUFVRCxRQUFRLFlBQVIsQ0FBaEI7O0FBRUEsSUFBTUUsU0FBUyxTQUFUQSxNQUFTLE9BQXFEO0FBQUEsUUFBbERDLEVBQWtELFFBQWxEQSxFQUFrRDtBQUFBLFFBQTlDQyxLQUE4QyxRQUE5Q0EsS0FBOEM7QUFBQSxRQUF2Q0MsYUFB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RyxFQUdIQSxHQUFHLHdCQUFILEVBQTZCLElBQTdCLEVBQW1DSSxHQUFHMEMsS0FBdEMsQ0FIRyxFQUlIQyxjQUpHLENBQVA7QUFNSDs7QUFFRCxTQUFTQyxpQkFBVCxDQUEyQjVDLEVBQTNCLEVBQStCO0FBQzNCLFFBQU02QyxjQUFjN0MsR0FBRzhDLFFBQUgsQ0FBWUMsUUFBaEM7QUFDQSxXQUFPRixlQUFlakQsR0FBRyw4QkFBSCxFQUFtQyxJQUFuQyxFQUF5Q2lELFdBQXpDLENBQXRCO0FBQ0g7O0FBRUQsU0FBU2xDLFlBQVQsQ0FBc0JxQyxZQUF0QixFQUFvQztBQUNoQ3JDLGlCQUFhc0MsS0FBYixHQUFxQnRDLGFBQWFzQyxLQUFiLEdBQXFCdEMsYUFBYXNDLEtBQWIsR0FBcUIsQ0FBMUMsR0FBOEMsQ0FBbkU7QUFDQSxRQUFNQyxnQkFBZ0I7QUFDbEJ4QixjQUFNLFFBRFk7QUFFbEJ5QixlQUFPLGtCQUZXO0FBR2xCLHNCQUFjLGtCQUhJO0FBSWxCcEMsaUJBQVNpQyxZQUpTO0FBS2xCSSw4Q0FBb0N6QyxhQUFhc0M7QUFML0IsS0FBdEI7O0FBUUEsV0FBT3JELEdBQ0gsMkNBREcsRUFFSHNELGFBRkcsRUFHSHRELEdBQ0ksdUJBREosRUFFSSxFQUFFMkMsV0FBVyxPQUFiLEVBQXNCQyxPQUFPLElBQTdCLEVBQW1DQyxRQUFRLElBQTNDLEVBRkosRUFHSTdDLEdBQUcsU0FBSCxFQUFjLEVBQUUsY0FBYyxjQUFoQixFQUFkLENBSEosQ0FIRyxDQUFQO0FBU0g7O0FBRUR5RCxPQUFPQyxPQUFQLEdBQWlCdkQsTUFBakIiLCJmaWxlIjoiYWQtaXRlbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZWwgPSByZXF1aXJlKCdAZmlubi1uby9jcmVhdGUtZWxlbWVudCcpO1xuY29uc3QgQWRJbWFnZSA9IHJlcXVpcmUoJy4vYWQtaW1hZ2UnKTtcblxuY29uc3QgYWRJdGVtID0gKHsgYWQsIHN0YXRlLCBoYW5kbGVBZENsaWNrLCBoYW5kbGVSZW1vdmVDbGljayB9KSA9PiB7XG4gICAgY29uc3QgaW1hZ2VFbGUgPSBuZXcgQWRJbWFnZShhZC5pbWFnZSwgc3RhdGUuaW1nQ2RuVXJsKS5yZW5kZXIoKTtcbiAgICBjb25zdCB0YWdFbGUgPSBnZXRJdGVtVGFnKGFkKTtcbiAgICBjb25zdCByZW1vdmVCdXR0b25FbGUgPSByZW1vdmVCdXR0b24oaGFuZGxlUmVtb3ZlQ2xpY2spO1xuXG4gICAgY29uc3QgbGlua09wdGlvbnMgPSB7XG4gICAgICAgIGhyZWY6IGFkLnVybCxcbiAgICAgICAgb25jbGljazogaGFuZGxlQWRDbGljayxcbiAgICAgICAgJ2RhdGEtdmVyc2lvbic6IGFkLnZlcnNpb24sXG4gICAgICAgICdkYXRhLXNjb3JlJzogYWQuc2NvcmUsXG4gICAgICAgICdkYXRhLXV1aWQnOiBzdGF0ZS51dWlkLFxuICAgICAgICBzdHlsZTogJ3dpZHRoOiAxMDAlJyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0SXRlbSA9IGVsKFxuICAgICAgICAnZGl2LnJlYy1pdGVtLmZsZXguYWxpZ24taXRlbXMtY2VudGVyJyxcbiAgICAgICAgeyAnZGF0YS1yZWMtaXRlbSc6IHRydWUgfSxcbiAgICAgICAgZWwoXG4gICAgICAgICAgICAnYS5saW5rYmxvY2subGljb3JpY2UuZmxleCcsXG4gICAgICAgICAgICBsaW5rT3B0aW9ucyxcbiAgICAgICAgICAgIGVsKCdoMy5zY3JlZW4tcmVhZGVyLW9ubHknLCBudWxsLCBhZC5oZWFkaW5nKSxcbiAgICAgICAgICAgIGVsKCdkaXYucmVjLW1lZGlhJywgbnVsbCwgaW1hZ2VFbGUpLFxuICAgICAgICAgICAgZWwoJ2Rpdi5yZWMtaXRlbV9fdGFnJywgbnVsbCwgdGFnRWxlKVxuICAgICAgICApLFxuICAgICAgICBlbCgnZGl2LnJlYy1pdGVtX19yZW1vdmUnLCBudWxsLCByZW1vdmVCdXR0b25FbGUpXG4gICAgKTtcbiAgICByZXN1bHRJdGVtLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAuNnMnO1xuICAgIHJlc3VsdEl0ZW0uc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgIGltYWdlRWxlLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBldmVudCA9PiB7XG4gICAgICAgIGlmIChhZC5pbWFnZS50eXBlID09PSAnTE9HTycpIHtcbiAgICAgICAgICAgIHJlc3VsdEl0ZW0uY2xhc3NMaXN0LmFkZCgnYmctbWlsaycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0SXRlbS5jbGFzc0xpc3QuYWRkKCdiZy1ibHVyJyk7XG4gICAgICAgICAgICByZXN1bHRJdGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9XG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmN1cnJlbnRTcmMgJiYgYHVybCgke2V2ZW50LnRhcmdldC5jdXJyZW50U3JjfSlgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0SXRlbS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdEl0ZW07XG59O1xuXG5mdW5jdGlvbiBnZXRJdGVtVGFnKGFkKSB7XG4gICAgY29uc3QgaWNvbkVsZSA9IGdldE1hcmtldEljb24oYWQpO1xuICAgIGNvbnN0IGxhYmVsRWxlID0gZ2V0VGFnTGFiZWwoYWQpO1xuXG4gICAgcmV0dXJuIGVsKFxuICAgICAgICAnZGl2LnJlYy10YWcubWlsay51bm92ZXJmbG93aWZ5JyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZWwoJ2Rpdi5mbGVmdCcsIG51bGwsIGljb25FbGUpLFxuICAgICAgICBsYWJlbEVsZSAmJiBlbCgnZGl2LnJlYy10YWdfX2xhYmVsJywgbnVsbCwgbGFiZWxFbGUpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0TWFya2V0SWNvbihhZCkge1xuICAgIGNvbnN0IG1hcmtldCA9IGFkLnR5cGUudG9Mb3dlckNhc2UoKTtcblxuICAgIHJldHVybiBlbChcbiAgICAgICAgJ3N2ZzpzdmcuYmxvY2tpZnknLFxuICAgICAgICB7IGZvY3VzYWJsZTogJ2ZhbHNlJywgd2lkdGg6ICczMCcsIGhlaWdodDogJzMwJyB9LFxuICAgICAgICBlbCgnc3ZnOnVzZScsIHsgJ3hsaW5rOmhyZWYnOiBgI2ljb24tbmktJHttYXJrZXR9YCB9KVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGdldFRhZ0xhYmVsKGFkKSB7XG4gICAgaWYgKCFhZC5sYWJlbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbkVsZSA9IGdldFRhZ0Rlc2NyaXB0aW9uKGFkKTtcblxuICAgIHJldHVybiBlbChcbiAgICAgICAgJ2Rpdi5yZWMtbGFiZWwnLFxuICAgICAgICBudWxsLFxuICAgICAgICBlbCgnZGl2LnJlYy1wcmljZS50cnVuY2F0ZScsIG51bGwsIGFkLmxhYmVsKSxcbiAgICAgICAgZGVzY3JpcHRpb25FbGVcbiAgICApO1xufVxuXG5mdW5jdGlvbiBnZXRUYWdEZXNjcmlwdGlvbihhZCkge1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gYWQubG9jYXRpb24uY29tYmluZWQ7XG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uICYmIGVsKCdkaXYucmVjLWRlc2NyaXB0aW9uLnRydW5jYXRlJywgbnVsbCwgZGVzY3JpcHRpb24pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVCdXR0b24oaGFuZGxlUmVtb3ZlKSB7XG4gICAgcmVtb3ZlQnV0dG9uLmNvdW50ID0gcmVtb3ZlQnV0dG9uLmNvdW50ID8gcmVtb3ZlQnV0dG9uLmNvdW50ICsgMSA6IDE7XG4gICAgY29uc3QgYnV0dG9uT3B0aW9ucyA9IHtcbiAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgIHRpdGxlOiAnRmplcm4gYW5iZWZhbGluZycsXG4gICAgICAgICdhcmlhLWxhYmVsJzogJ0ZqZXJuIGFuYmVmYWxpbmcnLFxuICAgICAgICBvbmNsaWNrOiBoYW5kbGVSZW1vdmUsXG4gICAgICAgIGlkOiBgcmVjb21tZW5kYXRpb24tcmVtb3ZlLWJ1dHRvbi0ke3JlbW92ZUJ1dHRvbi5jb3VudH1gLFxuICAgIH07XG5cbiAgICByZXR1cm4gZWwoXG4gICAgICAgICdidXR0b24uYmxhbmsuci1wYW0uZ2hvc3QtaWNvbi5pY29uLXJlbW92ZScsXG4gICAgICAgIGJ1dHRvbk9wdGlvbnMsXG4gICAgICAgIGVsKFxuICAgICAgICAgICAgJ3N2ZzpzdmcudmFsaWduLW1pZGRsZScsXG4gICAgICAgICAgICB7IGZvY3VzYWJsZTogJ2ZhbHNlJywgd2lkdGg6ICczMCcsIGhlaWdodDogJzMwJyB9LFxuICAgICAgICAgICAgZWwoJ3N2Zzp1c2UnLCB7ICd4bGluazpocmVmJzogJyNpY29uLXJlbW92ZScgfSlcbiAgICAgICAgKVxuICAgICk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWRJdGVtO1xuIl19","deps":{"@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a","./ad-image":"1f953d38b2e97fcdaed48a24e1ad739b73113bd86a870655906a9583e432a238"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/ad-item.js","index":8,"indexDeps":{"@finn-no/create-element":3,"./ad-image":7}}
,
{"id":"518e918c6d8251df1a659ae581fe150f33a13df21923dc374593d36c951f7503","source":"'use strict';\n\nvar fetchMore = void 0;\nvar version = void 0;\nvar uuid = void 0;\nvar fetchMoreIdx = 0;\n\nfunction getRecommendations(siteUrl, rows, pages) {\n    if (fetchMore) {\n        return getFetchMore(siteUrl);\n    }\n    return window.fetch(siteUrl + '/recommend?product=frontpage&rows=' + rows + '&pages=' + pages, {\n        credentials: 'include'\n    }).then(parseResponseOrThrow).then(captureFetchMore);\n}\n\nfunction getFetchMore(siteUrl) {\n    if (fetchMoreIdx < fetchMore.length) {\n        return window.fetch(siteUrl + '/fetch?segment=' + fetchMore[fetchMoreIdx], {\n            credentials: 'include'\n        }).then(parseResponseOrThrow).then(function (recommendations) {\n            fetchMoreIdx++;\n            return Object.assign({}, recommendations, {\n                version: version,\n                uuid: uuid\n            });\n        });\n    } else {\n        return Promise.resolve({\n            items: []\n        });\n    }\n}\n\nfunction parseResponseOrThrow(response) {\n    if (response.ok) {\n        return response.json();\n    }\n    return Promise.reject(new Error(response.status + ' ' + response.statusText));\n}\n\nfunction captureFetchMore(recommendations) {\n    fetchMore = recommendations.fetchMore;\n    version = recommendations.version;\n    uuid = recommendations.uuid;\n    return recommendations;\n}\n\nmodule.exports = getRecommendations;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC1yZWNvbW1lbmRhdGlvbnMuanMiXSwibmFtZXMiOlsiZmV0Y2hNb3JlIiwidmVyc2lvbiIsInV1aWQiLCJmZXRjaE1vcmVJZHgiLCJnZXRSZWNvbW1lbmRhdGlvbnMiLCJzaXRlVXJsIiwicm93cyIsInBhZ2VzIiwiZ2V0RmV0Y2hNb3JlIiwid2luZG93IiwiZmV0Y2giLCJjcmVkZW50aWFscyIsInRoZW4iLCJwYXJzZVJlc3BvbnNlT3JUaHJvdyIsImNhcHR1cmVGZXRjaE1vcmUiLCJsZW5ndGgiLCJPYmplY3QiLCJhc3NpZ24iLCJyZWNvbW1lbmRhdGlvbnMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIml0ZW1zIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJyZWplY3QiLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxrQkFBSjtBQUNBLElBQUlDLGdCQUFKO0FBQ0EsSUFBSUMsYUFBSjtBQUNBLElBQUlDLGVBQWUsQ0FBbkI7O0FBRUEsU0FBU0Msa0JBQVQsQ0FBNEJDLE9BQTVCLEVBQXFDQyxJQUFyQyxFQUEyQ0MsS0FBM0MsRUFBa0Q7QUFDOUMsUUFBSVAsU0FBSixFQUFlO0FBQ1gsZUFBT1EsYUFBYUgsT0FBYixDQUFQO0FBQ0g7QUFDRCxXQUFPSSxPQUNGQyxLQURFLENBRUlMLE9BRkosMENBRWdEQyxJQUZoRCxlQUU4REMsS0FGOUQsRUFHQztBQUNJSSxxQkFBYTtBQURqQixLQUhELEVBT0ZDLElBUEUsQ0FPR0Msb0JBUEgsRUFRRkQsSUFSRSxDQVFHRSxnQkFSSCxDQUFQO0FBU0g7O0FBRUQsU0FBU04sWUFBVCxDQUFzQkgsT0FBdEIsRUFBK0I7QUFDM0IsUUFBSUYsZUFBZUgsVUFBVWUsTUFBN0IsRUFBcUM7QUFDakMsZUFBT04sT0FDRkMsS0FERSxDQUNPTCxPQURQLHVCQUNnQ0wsVUFBVUcsWUFBVixDQURoQyxFQUMyRDtBQUMxRFEseUJBQWE7QUFENkMsU0FEM0QsRUFJRkMsSUFKRSxDQUlHQyxvQkFKSCxFQUtGRCxJQUxFLENBS0csMkJBQW1CO0FBQ3JCVDtBQUNBLG1CQUFPYSxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQkMsZUFBbEIsRUFBbUM7QUFDdENqQixnQ0FEc0M7QUFFdENDO0FBRnNDLGFBQW5DLENBQVA7QUFJSCxTQVhFLENBQVA7QUFZSCxLQWJELE1BYU87QUFDSCxlQUFPaUIsUUFBUUMsT0FBUixDQUFnQjtBQUNuQkMsbUJBQU87QUFEWSxTQUFoQixDQUFQO0FBR0g7QUFDSjs7QUFFRCxTQUFTUixvQkFBVCxDQUE4QlMsUUFBOUIsRUFBd0M7QUFDcEMsUUFBSUEsU0FBU0MsRUFBYixFQUFpQjtBQUNiLGVBQU9ELFNBQVNFLElBQVQsRUFBUDtBQUNIO0FBQ0QsV0FBT0wsUUFBUU0sTUFBUixDQUNILElBQUlDLEtBQUosQ0FBYUosU0FBU0ssTUFBdEIsU0FBZ0NMLFNBQVNNLFVBQXpDLENBREcsQ0FBUDtBQUdIOztBQUVELFNBQVNkLGdCQUFULENBQTBCSSxlQUExQixFQUEyQztBQUN2Q2xCLGdCQUFZa0IsZ0JBQWdCbEIsU0FBNUI7QUFDQUMsY0FBVWlCLGdCQUFnQmpCLE9BQTFCO0FBQ0FDLFdBQU9nQixnQkFBZ0JoQixJQUF2QjtBQUNBLFdBQU9nQixlQUFQO0FBQ0g7O0FBRURXLE9BQU9DLE9BQVAsR0FBaUIxQixrQkFBakIiLCJmaWxlIjoiZ2V0LXJlY29tbWVuZGF0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubGV0IGZldGNoTW9yZTtcbmxldCB2ZXJzaW9uO1xubGV0IHV1aWQ7XG5sZXQgZmV0Y2hNb3JlSWR4ID0gMDtcblxuZnVuY3Rpb24gZ2V0UmVjb21tZW5kYXRpb25zKHNpdGVVcmwsIHJvd3MsIHBhZ2VzKSB7XG4gICAgaWYgKGZldGNoTW9yZSkge1xuICAgICAgICByZXR1cm4gZ2V0RmV0Y2hNb3JlKHNpdGVVcmwpO1xuICAgIH1cbiAgICByZXR1cm4gd2luZG93XG4gICAgICAgIC5mZXRjaChcbiAgICAgICAgICAgIGAke3NpdGVVcmx9L3JlY29tbWVuZD9wcm9kdWN0PWZyb250cGFnZSZyb3dzPSR7cm93c30mcGFnZXM9JHtwYWdlc31gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgLnRoZW4ocGFyc2VSZXNwb25zZU9yVGhyb3cpXG4gICAgICAgIC50aGVuKGNhcHR1cmVGZXRjaE1vcmUpO1xufVxuXG5mdW5jdGlvbiBnZXRGZXRjaE1vcmUoc2l0ZVVybCkge1xuICAgIGlmIChmZXRjaE1vcmVJZHggPCBmZXRjaE1vcmUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3dcbiAgICAgICAgICAgIC5mZXRjaChgJHtzaXRlVXJsfS9mZXRjaD9zZWdtZW50PSR7ZmV0Y2hNb3JlW2ZldGNoTW9yZUlkeF19YCwge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocGFyc2VSZXNwb25zZU9yVGhyb3cpXG4gICAgICAgICAgICAudGhlbihyZWNvbW1lbmRhdGlvbnMgPT4ge1xuICAgICAgICAgICAgICAgIGZldGNoTW9yZUlkeCsrO1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZWNvbW1lbmRhdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgdXVpZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2VPclRocm93KHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgbmV3IEVycm9yKGAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gY2FwdHVyZUZldGNoTW9yZShyZWNvbW1lbmRhdGlvbnMpIHtcbiAgICBmZXRjaE1vcmUgPSByZWNvbW1lbmRhdGlvbnMuZmV0Y2hNb3JlO1xuICAgIHZlcnNpb24gPSByZWNvbW1lbmRhdGlvbnMudmVyc2lvbjtcbiAgICB1dWlkID0gcmVjb21tZW5kYXRpb25zLnV1aWQ7XG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRSZWNvbW1lbmRhdGlvbnM7XG4iXX0=","deps":{},"file":"/home/node/src/routes/podlet-recommendations/lib/client/get-recommendations.js","index":9,"indexDeps":{}}
,
{"id":"f7d6a9974ba93ed5952d979b1c99aa4ac23c60db9d7e8fd3dedf0c8e0e437f7c","source":"'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImageFormat = function () {\n    function ImageFormat() {\n        _classCallCheck(this, ImageFormat);\n    }\n\n    _createClass(ImageFormat, null, [{\n        key: 'fromWidthAndHeight',\n        value: function fromWidthAndHeight(width, height) {\n            if (ImageFormat.isUnknown(width, height)) {\n                return ImageFormat.getUncroppedFormat();\n            } else if (ImageFormat.isPortrait(width, height)) {\n                return ImageFormat.getPortraitFormat();\n            } else if (ImageFormat.isLandscape(width, height)) {\n                return ImageFormat.getLandscapeFormat();\n            } else {\n                return ImageFormat.getSquareFormat();\n            }\n        }\n    }, {\n        key: 'isUnknown',\n        value: function isUnknown(width, height) {\n            return !width || !height;\n        }\n    }, {\n        key: 'isPortrait',\n        value: function isPortrait(width, height) {\n            return width / height <= 0.76;\n        }\n    }, {\n        key: 'isLandscape',\n        value: function isLandscape(width, height) {\n            return width / height >= 1.29;\n        }\n    }, {\n        key: 'getUncroppedFormat',\n        value: function getUncroppedFormat() {\n            return {\n                className: ImageFormat.LANDSCAPE,\n                widthToSizes: [['480w', '480w'], ['240w', '240w'], ['320w', '320w'], ['640w', '640w'], ['960w', '960w']]\n            };\n        }\n    }, {\n        key: 'getPortraitFormat',\n        value: function getPortraitFormat() {\n            return {\n                className: ImageFormat.PORTRAIT,\n                widthToSizes: [['480w', '480x640c'], ['240w', '240x320c'], ['360w', '360x480c'], ['720w', '720x960c']]\n            };\n        }\n    }, {\n        key: 'getLandscapeFormat',\n        value: function getLandscapeFormat() {\n            return {\n                className: ImageFormat.LANDSCAPE,\n                widthToSizes: [['480w', '480x360c'], ['240w', '240x180c'], ['360w', '360x270c'], ['720w', '720x540c']]\n            };\n        }\n    }, {\n        key: 'getSquareFormat',\n        value: function getSquareFormat() {\n            return {\n                className: ImageFormat.SQUARE,\n                widthToSizes: [['480w', '480x480c'], ['240w', '240x240c'], ['360w', '360x360c'], ['720w', '720x720c']]\n            };\n        }\n    }]);\n\n    return ImageFormat;\n}();\n\nImageFormat.PORTRAIT = 'format3by4';\nImageFormat.LANDSCAPE = 'format4by3';\nImageFormat.SQUARE = 'format1by1';\n\nmodule.exports = ImageFormat;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWZvcm1hdC5qcyJdLCJuYW1lcyI6WyJJbWFnZUZvcm1hdCIsIndpZHRoIiwiaGVpZ2h0IiwiaXNVbmtub3duIiwiZ2V0VW5jcm9wcGVkRm9ybWF0IiwiaXNQb3J0cmFpdCIsImdldFBvcnRyYWl0Rm9ybWF0IiwiaXNMYW5kc2NhcGUiLCJnZXRMYW5kc2NhcGVGb3JtYXQiLCJnZXRTcXVhcmVGb3JtYXQiLCJjbGFzc05hbWUiLCJMQU5EU0NBUEUiLCJ3aWR0aFRvU2l6ZXMiLCJQT1JUUkFJVCIsIlNRVUFSRSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7SUFFTUEsVzs7Ozs7OzsyQ0FDd0JDLEssRUFBT0MsTSxFQUFRO0FBQ3JDLGdCQUFJRixZQUFZRyxTQUFaLENBQXNCRixLQUF0QixFQUE2QkMsTUFBN0IsQ0FBSixFQUEwQztBQUN0Qyx1QkFBT0YsWUFBWUksa0JBQVosRUFBUDtBQUNILGFBRkQsTUFFTyxJQUFJSixZQUFZSyxVQUFaLENBQXVCSixLQUF2QixFQUE4QkMsTUFBOUIsQ0FBSixFQUEyQztBQUM5Qyx1QkFBT0YsWUFBWU0saUJBQVosRUFBUDtBQUNILGFBRk0sTUFFQSxJQUFJTixZQUFZTyxXQUFaLENBQXdCTixLQUF4QixFQUErQkMsTUFBL0IsQ0FBSixFQUE0QztBQUMvQyx1QkFBT0YsWUFBWVEsa0JBQVosRUFBUDtBQUNILGFBRk0sTUFFQTtBQUNILHVCQUFPUixZQUFZUyxlQUFaLEVBQVA7QUFDSDtBQUNKOzs7a0NBRWdCUixLLEVBQU9DLE0sRUFBUTtBQUM1QixtQkFBTyxDQUFDRCxLQUFELElBQVUsQ0FBQ0MsTUFBbEI7QUFDSDs7O21DQUVpQkQsSyxFQUFPQyxNLEVBQVE7QUFDN0IsbUJBQU9ELFFBQVFDLE1BQVIsSUFBa0IsSUFBekI7QUFDSDs7O29DQUVrQkQsSyxFQUFPQyxNLEVBQVE7QUFDOUIsbUJBQU9ELFFBQVFDLE1BQVIsSUFBa0IsSUFBekI7QUFDSDs7OzZDQUUyQjtBQUN4QixtQkFBTztBQUNIUSwyQkFBV1YsWUFBWVcsU0FEcEI7QUFFSEMsOEJBQWMsQ0FDVixDQUFDLE1BQUQsRUFBUyxNQUFULENBRFUsRUFFVixDQUFDLE1BQUQsRUFBUyxNQUFULENBRlUsRUFHVixDQUFDLE1BQUQsRUFBUyxNQUFULENBSFUsRUFJVixDQUFDLE1BQUQsRUFBUyxNQUFULENBSlUsRUFLVixDQUFDLE1BQUQsRUFBUyxNQUFULENBTFU7QUFGWCxhQUFQO0FBVUg7Ozs0Q0FFMEI7QUFDdkIsbUJBQU87QUFDSEYsMkJBQVdWLFlBQVlhLFFBRHBCO0FBRUhELDhCQUFjLENBQ1YsQ0FBQyxNQUFELEVBQVMsVUFBVCxDQURVLEVBRVYsQ0FBQyxNQUFELEVBQVMsVUFBVCxDQUZVLEVBR1YsQ0FBQyxNQUFELEVBQVMsVUFBVCxDQUhVLEVBSVYsQ0FBQyxNQUFELEVBQVMsVUFBVCxDQUpVO0FBRlgsYUFBUDtBQVNIOzs7NkNBRTJCO0FBQ3hCLG1CQUFPO0FBQ0hGLDJCQUFXVixZQUFZVyxTQURwQjtBQUVIQyw4QkFBYyxDQUNWLENBQUMsTUFBRCxFQUFTLFVBQVQsQ0FEVSxFQUVWLENBQUMsTUFBRCxFQUFTLFVBQVQsQ0FGVSxFQUdWLENBQUMsTUFBRCxFQUFTLFVBQVQsQ0FIVSxFQUlWLENBQUMsTUFBRCxFQUFTLFVBQVQsQ0FKVTtBQUZYLGFBQVA7QUFTSDs7OzBDQUV3QjtBQUNyQixtQkFBTztBQUNIRiwyQkFBV1YsWUFBWWMsTUFEcEI7QUFFSEYsOEJBQWMsQ0FDVixDQUFDLE1BQUQsRUFBUyxVQUFULENBRFUsRUFFVixDQUFDLE1BQUQsRUFBUyxVQUFULENBRlUsRUFHVixDQUFDLE1BQUQsRUFBUyxVQUFULENBSFUsRUFJVixDQUFDLE1BQUQsRUFBUyxVQUFULENBSlU7QUFGWCxhQUFQO0FBU0g7Ozs7OztBQUdMWixZQUFZYSxRQUFaLEdBQXVCLFlBQXZCO0FBQ0FiLFlBQVlXLFNBQVosR0FBd0IsWUFBeEI7QUFDQVgsWUFBWWMsTUFBWixHQUFxQixZQUFyQjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQmhCLFdBQWpCIiwiZmlsZSI6ImltYWdlLWZvcm1hdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgSW1hZ2VGb3JtYXQge1xuICAgIHN0YXRpYyBmcm9tV2lkdGhBbmRIZWlnaHQod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAoSW1hZ2VGb3JtYXQuaXNVbmtub3duKHdpZHRoLCBoZWlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VGb3JtYXQuZ2V0VW5jcm9wcGVkRm9ybWF0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoSW1hZ2VGb3JtYXQuaXNQb3J0cmFpdCh3aWR0aCwgaGVpZ2h0KSkge1xuICAgICAgICAgICAgcmV0dXJuIEltYWdlRm9ybWF0LmdldFBvcnRyYWl0Rm9ybWF0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoSW1hZ2VGb3JtYXQuaXNMYW5kc2NhcGUod2lkdGgsIGhlaWdodCkpIHtcbiAgICAgICAgICAgIHJldHVybiBJbWFnZUZvcm1hdC5nZXRMYW5kc2NhcGVGb3JtYXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBJbWFnZUZvcm1hdC5nZXRTcXVhcmVGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpc1Vua25vd24od2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gIXdpZHRoIHx8ICFoZWlnaHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzUG9ydHJhaXQod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gd2lkdGggLyBoZWlnaHQgPD0gMC43NjtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNMYW5kc2NhcGUod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gd2lkdGggLyBoZWlnaHQgPj0gMS4yOTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0VW5jcm9wcGVkRm9ybWF0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBJbWFnZUZvcm1hdC5MQU5EU0NBUEUsXG4gICAgICAgICAgICB3aWR0aFRvU2l6ZXM6IFtcbiAgICAgICAgICAgICAgICBbJzQ4MHcnLCAnNDgwdyddLFxuICAgICAgICAgICAgICAgIFsnMjQwdycsICcyNDB3J10sXG4gICAgICAgICAgICAgICAgWyczMjB3JywgJzMyMHcnXSxcbiAgICAgICAgICAgICAgICBbJzY0MHcnLCAnNjQwdyddLFxuICAgICAgICAgICAgICAgIFsnOTYwdycsICc5NjB3J10sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQb3J0cmFpdEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogSW1hZ2VGb3JtYXQuUE9SVFJBSVQsXG4gICAgICAgICAgICB3aWR0aFRvU2l6ZXM6IFtcbiAgICAgICAgICAgICAgICBbJzQ4MHcnLCAnNDgweDY0MGMnXSxcbiAgICAgICAgICAgICAgICBbJzI0MHcnLCAnMjQweDMyMGMnXSxcbiAgICAgICAgICAgICAgICBbJzM2MHcnLCAnMzYweDQ4MGMnXSxcbiAgICAgICAgICAgICAgICBbJzcyMHcnLCAnNzIweDk2MGMnXSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGdldExhbmRzY2FwZUZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogSW1hZ2VGb3JtYXQuTEFORFNDQVBFLFxuICAgICAgICAgICAgd2lkdGhUb1NpemVzOiBbXG4gICAgICAgICAgICAgICAgWyc0ODB3JywgJzQ4MHgzNjBjJ10sXG4gICAgICAgICAgICAgICAgWycyNDB3JywgJzI0MHgxODBjJ10sXG4gICAgICAgICAgICAgICAgWyczNjB3JywgJzM2MHgyNzBjJ10sXG4gICAgICAgICAgICAgICAgWyc3MjB3JywgJzcyMHg1NDBjJ10sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRTcXVhcmVGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IEltYWdlRm9ybWF0LlNRVUFSRSxcbiAgICAgICAgICAgIHdpZHRoVG9TaXplczogW1xuICAgICAgICAgICAgICAgIFsnNDgwdycsICc0ODB4NDgwYyddLFxuICAgICAgICAgICAgICAgIFsnMjQwdycsICcyNDB4MjQwYyddLFxuICAgICAgICAgICAgICAgIFsnMzYwdycsICczNjB4MzYwYyddLFxuICAgICAgICAgICAgICAgIFsnNzIwdycsICc3MjB4NzIwYyddLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbkltYWdlRm9ybWF0LlBPUlRSQUlUID0gJ2Zvcm1hdDNieTQnO1xuSW1hZ2VGb3JtYXQuTEFORFNDQVBFID0gJ2Zvcm1hdDRieTMnO1xuSW1hZ2VGb3JtYXQuU1FVQVJFID0gJ2Zvcm1hdDFieTEnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEltYWdlRm9ybWF0O1xuIl19","deps":{},"file":"/home/node/src/routes/podlet-recommendations/lib/client/image-format.js","index":10,"indexDeps":{}}
,
{"entry":true,"expose":false,"file":"/home/node/src/routes/podlet-recommendations/lib/client/index.js","id":"2a76a1f6c2110ad576358a01aaba5b7293b50999f4c8388d437b7934eced3114","order":0,"source":"'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar domready = require('domready');\nvar awesomeRecommendations = require('./modern');\n\ndomready(function () {\n    [].concat(_toConsumableArray(document.querySelectorAll('[data-awesome-recommendations]'))).forEach(function (ele) {\n        var siteUrl = ele.getAttribute('data-site-url');\n        var imageCdnUrl = ele.getAttribute('data-image-cdn-url');\n        var rows = ele.getAttribute('data-rows');\n        var pages = ele.getAttribute('data-pages');\n        var position = ele.getAttribute('data-position');\n        var nativeAdTest = ele.getAttribute('data-native-ad-test') === 'true';\n        var lazyLoadingTest = ele.getAttribute('data-lazy-loading-test') === 'true';\n        awesomeRecommendations(ele, {\n            siteUrl: siteUrl,\n            imageCdnUrl: imageCdnUrl,\n            rows: rows,\n            pages: pages,\n            position: position,\n            nativeAdTest: nativeAdTest,\n            lazyLoadingTest: lazyLoadingTest\n        });\n    });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvbXJlYWR5IiwicmVxdWlyZSIsImF3ZXNvbWVSZWNvbW1lbmRhdGlvbnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2l0ZVVybCIsImVsZSIsImdldEF0dHJpYnV0ZSIsImltYWdlQ2RuVXJsIiwicm93cyIsInBhZ2VzIiwicG9zaXRpb24iLCJuYXRpdmVBZFRlc3QiLCJsYXp5TG9hZGluZ1Rlc3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsSUFBTUEsV0FBV0MsUUFBUSxVQUFSLENBQWpCO0FBQ0EsSUFBTUMseUJBQXlCRCxRQUFRLFVBQVIsQ0FBL0I7O0FBRUFELFNBQVMsWUFBTTtBQUNYLGlDQUNPRyxTQUFTQyxnQkFBVCxDQUEwQixnQ0FBMUIsQ0FEUCxHQUVFQyxPQUZGLENBRVUsZUFBTztBQUNiLFlBQU1DLFVBQVVDLElBQUlDLFlBQUosQ0FBaUIsZUFBakIsQ0FBaEI7QUFDQSxZQUFNQyxjQUFjRixJQUFJQyxZQUFKLENBQWlCLG9CQUFqQixDQUFwQjtBQUNBLFlBQU1FLE9BQU9ILElBQUlDLFlBQUosQ0FBaUIsV0FBakIsQ0FBYjtBQUNBLFlBQU1HLFFBQVFKLElBQUlDLFlBQUosQ0FBaUIsWUFBakIsQ0FBZDtBQUNBLFlBQU1JLFdBQVdMLElBQUlDLFlBQUosQ0FBaUIsZUFBakIsQ0FBakI7QUFDQSxZQUFNSyxlQUFlTixJQUFJQyxZQUFKLENBQWlCLHFCQUFqQixNQUE0QyxNQUFqRTtBQUNBLFlBQU1NLGtCQUNGUCxJQUFJQyxZQUFKLENBQWlCLHdCQUFqQixNQUErQyxNQURuRDtBQUVBTiwrQkFBdUJLLEdBQXZCLEVBQTRCO0FBQ3hCRCw0QkFEd0I7QUFFeEJHLG9DQUZ3QjtBQUd4QkMsc0JBSHdCO0FBSXhCQyx3QkFKd0I7QUFLeEJDLDhCQUx3QjtBQU14QkMsc0NBTndCO0FBT3hCQztBQVB3QixTQUE1QjtBQVNILEtBcEJEO0FBcUJILENBdEJEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBkb21yZWFkeSA9IHJlcXVpcmUoJ2RvbXJlYWR5Jyk7XG5jb25zdCBhd2Vzb21lUmVjb21tZW5kYXRpb25zID0gcmVxdWlyZSgnLi9tb2Rlcm4nKTtcblxuZG9tcmVhZHkoKCkgPT4ge1xuICAgIFtcbiAgICAgICAgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYXdlc29tZS1yZWNvbW1lbmRhdGlvbnNdJyksXG4gICAgXS5mb3JFYWNoKGVsZSA9PiB7XG4gICAgICAgIGNvbnN0IHNpdGVVcmwgPSBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXNpdGUtdXJsJyk7XG4gICAgICAgIGNvbnN0IGltYWdlQ2RuVXJsID0gZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1pbWFnZS1jZG4tdXJsJyk7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJvd3MnKTtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXBhZ2VzJyk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1wb3NpdGlvbicpO1xuICAgICAgICBjb25zdCBuYXRpdmVBZFRlc3QgPSBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLW5hdGl2ZS1hZC10ZXN0JykgPT09ICd0cnVlJztcbiAgICAgICAgY29uc3QgbGF6eUxvYWRpbmdUZXN0ID1cbiAgICAgICAgICAgIGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF6eS1sb2FkaW5nLXRlc3QnKSA9PT0gJ3RydWUnO1xuICAgICAgICBhd2Vzb21lUmVjb21tZW5kYXRpb25zKGVsZSwge1xuICAgICAgICAgICAgc2l0ZVVybCxcbiAgICAgICAgICAgIGltYWdlQ2RuVXJsLFxuICAgICAgICAgICAgcm93cyxcbiAgICAgICAgICAgIHBhZ2VzLFxuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBuYXRpdmVBZFRlc3QsXG4gICAgICAgICAgICBsYXp5TG9hZGluZ1Rlc3QsXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=","deps":{"domready":"81be46a7d42e3879307ccb9eb181627735cc2b06f7982c3bae44b6fb3741afa4","./modern":"5d4890fe28b8b28c989a015255e4359b0829d10e5cfe4e789f6871fbb5d400a7"},"index":11,"indexDeps":{"domready":5,"./modern":13}}
,
{"id":"2cb2e5d4dda34c34740e6b20dc8c27e760e8d0d1c15fb7311af33d30cdf39f50","source":"'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar el = require('@finn-no/create-element');\nvar InscreenObserver = require('@finn-no/inscreen-observer').default;\n\nvar RecommendationsStream = function () {\n    function RecommendationsStream(fetchItems, itemTemplate) {\n        _classCallCheck(this, RecommendationsStream);\n\n        this._fetchItems = fetchItems;\n        this._itemTemplate = itemTemplate;\n        this._spinnerEle = RecommendationsStream.createSpinnerEle();\n        this._scrollListEle = el('div', { id: 'scrollList' });\n        this._scrollFooterEle = el('div', { id: 'scrollFooter' });\n        this._fetchAndRender = this._fetchAndRender.bind(this);\n        this._scrollObserver = new InscreenObserver(this._fetchAndRender, {\n            once: true\n        });\n    }\n\n    _createClass(RecommendationsStream, [{\n        key: 'render',\n        value: function render() {\n            var _this = this;\n\n            this._element = el('div', null, this._scrollListEle, this._spinnerEle, this._scrollFooterEle);\n\n            this._fetchAndRender().then(function () {\n                _this._element.insertBefore(el('h2', { id: 'recommendations-label' }, 'Anbefalinger'), _this._element.firstChild);\n            });\n\n            return this._element;\n        }\n    }, {\n        key: '_fetchAndRender',\n        value: function _fetchAndRender() {\n            var _this2 = this;\n\n            this.showSpinner();\n            return this._fetchItems().then(function (_ref) {\n                var items = _ref.items,\n                    uuid = _ref.uuid,\n                    version = _ref.version;\n\n                if (items.length === 0) {\n                    return Promise.reject();\n                }\n                var itemsEle = el('div', { style: 'opacity: 0; transition: opacity 0.6s;' }, _this2.renderItems(items, uuid, version));\n                window.setTimeout(function () {\n                    itemsEle.style.opacity = '1';\n                }, 20);\n                return itemsEle;\n            }).then(function (itemsEle) {\n                _this2.hideSpinner();\n                _this2._scrollListEle.appendChild(itemsEle);\n                _this2._scrollObserver.observe(_this2._scrollFooterEle);\n            }).catch(function () {\n                _this2.hideSpinner();\n            });\n        }\n    }, {\n        key: 'renderItems',\n        value: function renderItems(items, uuid, version) {\n            var _this3 = this;\n\n            return el('div.line.flex.wrap.align-items-stretch.cols2upto640.cols3upto990.cols3from990.rec-list', null, items.map(function (item) {\n                return _this3.renderItem(item, uuid, version);\n            }));\n        }\n    }, {\n        key: 'renderItem',\n        value: function renderItem(item, uuid, version) {\n            return el('div.unit.rec-list__item.flex.bg-sardine.bat.border-ice', null, this._itemTemplate(item, uuid, version));\n        }\n    }, {\n        key: 'showSpinner',\n        value: function showSpinner() {\n            this._spinnerEle.style.display = 'block';\n        }\n    }, {\n        key: 'hideSpinner',\n        value: function hideSpinner() {\n            this._spinnerEle.style.display = 'none';\n        }\n    }], [{\n        key: 'createSpinnerEle',\n        value: function createSpinnerEle() {\n            return el('div.centered.pvm', null, el('div.spinner'));\n        }\n    }]);\n\n    return RecommendationsStream;\n}();\n\nmodule.exports = RecommendationsStream;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhenktcmVjLXN0cmVhbS5qcyJdLCJuYW1lcyI6WyJlbCIsInJlcXVpcmUiLCJJbnNjcmVlbk9ic2VydmVyIiwiZGVmYXVsdCIsIlJlY29tbWVuZGF0aW9uc1N0cmVhbSIsImZldGNoSXRlbXMiLCJpdGVtVGVtcGxhdGUiLCJfZmV0Y2hJdGVtcyIsIl9pdGVtVGVtcGxhdGUiLCJfc3Bpbm5lckVsZSIsImNyZWF0ZVNwaW5uZXJFbGUiLCJfc2Nyb2xsTGlzdEVsZSIsImlkIiwiX3Njcm9sbEZvb3RlckVsZSIsIl9mZXRjaEFuZFJlbmRlciIsImJpbmQiLCJfc2Nyb2xsT2JzZXJ2ZXIiLCJvbmNlIiwiX2VsZW1lbnQiLCJ0aGVuIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInNob3dTcGlubmVyIiwiaXRlbXMiLCJ1dWlkIiwidmVyc2lvbiIsImxlbmd0aCIsIlByb21pc2UiLCJyZWplY3QiLCJpdGVtc0VsZSIsInN0eWxlIiwicmVuZGVySXRlbXMiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0Iiwib3BhY2l0eSIsImhpZGVTcGlubmVyIiwiYXBwZW5kQ2hpbGQiLCJvYnNlcnZlIiwiY2F0Y2giLCJtYXAiLCJyZW5kZXJJdGVtIiwiaXRlbSIsImRpc3BsYXkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUEsSUFBTUEsS0FBS0MsUUFBUSx5QkFBUixDQUFYO0FBQ0EsSUFBTUMsbUJBQW1CRCxRQUFRLDRCQUFSLEVBQXNDRSxPQUEvRDs7SUFFTUMscUI7QUFDRixtQ0FBWUMsVUFBWixFQUF3QkMsWUFBeEIsRUFBc0M7QUFBQTs7QUFDbEMsYUFBS0MsV0FBTCxHQUFtQkYsVUFBbkI7QUFDQSxhQUFLRyxhQUFMLEdBQXFCRixZQUFyQjtBQUNBLGFBQUtHLFdBQUwsR0FBbUJMLHNCQUFzQk0sZ0JBQXRCLEVBQW5CO0FBQ0EsYUFBS0MsY0FBTCxHQUFzQlgsR0FBRyxLQUFILEVBQVUsRUFBRVksSUFBSSxZQUFOLEVBQVYsQ0FB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T0FBT0MsT0FBUCxHQUFpQnhDLHFCQUFqQiIsImZpbGUiOiJsYXp5LXJlYy1zdHJlYW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGVsID0gcmVxdWlyZSgnQGZpbm4tbm8vY3JlYXRlLWVsZW1lbnQnKTtcbmNvbnN0IEluc2NyZWVuT2JzZXJ2ZXIgPSByZXF1aXJlKCdAZmlubi1uby9pbnNjcmVlbi1vYnNlcnZlcicpLmRlZmF1bHQ7XG5cbmNsYXNzIFJlY29tbWVuZGF0aW9uc1N0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZmV0Y2hJdGVtcywgaXRlbVRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoSXRlbXMgPSBmZXRjaEl0ZW1zO1xuICAgICAgICB0aGlzLl9pdGVtVGVtcGxhdGUgPSBpdGVtVGVtcGxhdGU7XG4gICAgICAgIHRoaXMuX3NwaW5uZXJFbGUgPSBSZWNvbW1lbmRhdGlvbnNTdHJlYW0uY3JlYXRlU3Bpbm5lckVsZSgpO1xuICAgICAgICB0aGlzLl9zY3JvbGxMaXN0RWxlID0gZWwoJ2RpdicsIHsgaWQ6ICdzY3JvbGxMaXN0JyB9KTtcbiAgICAgICAgdGhpcy5fc2Nyb2xsRm9vdGVyRWxlID0gZWwoJ2RpdicsIHsgaWQ6ICdzY3JvbGxGb290ZXInIH0pO1xuICAgICAgICB0aGlzLl9mZXRjaEFuZFJlbmRlciA9IHRoaXMuX2ZldGNoQW5kUmVuZGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3Njcm9sbE9ic2VydmVyID0gbmV3IEluc2NyZWVuT2JzZXJ2ZXIodGhpcy5fZmV0Y2hBbmRSZW5kZXIsIHtcbiAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsKFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTGlzdEVsZSxcbiAgICAgICAgICAgIHRoaXMuX3NwaW5uZXJFbGUsXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxGb290ZXJFbGVcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLl9mZXRjaEFuZFJlbmRlcigpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5pbnNlcnRCZWZvcmUoXG4gICAgICAgICAgICAgICAgZWwoJ2gyJywgeyBpZDogJ3JlY29tbWVuZGF0aW9ucy1sYWJlbCcgfSwgJ0FuYmVmYWxpbmdlcicpLFxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuZmlyc3RDaGlsZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuXG4gICAgX2ZldGNoQW5kUmVuZGVyKCkge1xuICAgICAgICB0aGlzLnNob3dTcGlubmVyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaEl0ZW1zKClcbiAgICAgICAgICAgIC50aGVuKCh7IGl0ZW1zLCB1dWlkLCB2ZXJzaW9uIH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc0VsZSA9IGVsKFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogJ29wYWNpdHk6IDA7IHRyYW5zaXRpb246IG9wYWNpdHkgMC42czsnIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMoaXRlbXMsIHV1aWQsIHZlcnNpb24pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zRWxlLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICAgICAgfSwgMjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtc0VsZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihpdGVtc0VsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlU3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbExpc3RFbGUuYXBwZW5kQ2hpbGQoaXRlbXNFbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE9ic2VydmVyLm9ic2VydmUodGhpcy5fc2Nyb2xsRm9vdGVyRWxlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zLCB1dWlkLCB2ZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiBlbChcbiAgICAgICAgICAgICdkaXYubGluZS5mbGV4LndyYXAuYWxpZ24taXRlbXMtc3RyZXRjaC5jb2xzMnVwdG82NDAuY29sczN1cHRvOTkwLmNvbHMzZnJvbTk5MC5yZWMtbGlzdCcsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5yZW5kZXJJdGVtKGl0ZW0sIHV1aWQsIHZlcnNpb24pKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW0oaXRlbSwgdXVpZCwgdmVyc2lvbikge1xuICAgICAgICByZXR1cm4gZWwoXG4gICAgICAgICAgICAnZGl2LnVuaXQucmVjLWxpc3RfX2l0ZW0uZmxleC5iZy1zYXJkaW5lLmJhdC5ib3JkZXItaWNlJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB0aGlzLl9pdGVtVGVtcGxhdGUoaXRlbSwgdXVpZCwgdmVyc2lvbilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgY3JlYXRlU3Bpbm5lckVsZSgpIHtcbiAgICAgICAgcmV0dXJuIGVsKCdkaXYuY2VudGVyZWQucHZtJywgbnVsbCwgZWwoJ2Rpdi5zcGlubmVyJykpO1xuICAgIH1cblxuICAgIHNob3dTcGlubmVyKCkge1xuICAgICAgICB0aGlzLl9zcGlubmVyRWxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIGhpZGVTcGlubmVyKCkge1xuICAgICAgICB0aGlzLl9zcGlubmVyRWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlY29tbWVuZGF0aW9uc1N0cmVhbTtcbiJdfQ==","deps":{"@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a","@finn-no/inscreen-observer":"f6ee56709d11090f8d91d50b54de34a3111ddf247ae24c74f74e1aaabbf752af"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/lazy-rec-stream.js","index":12,"indexDeps":{"@finn-no/create-element":3,"@finn-no/inscreen-observer":4}}
,
{"id":"5d4890fe28b8b28c989a015255e4359b0829d10e5cfe4e789f6871fbb5d400a7","source":"'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar getRecommendations = require('./get-recommendations');\nvar RecommendationsStream = require('./rec-stream');\nvar LazyRecommendationsStream = require('./lazy-rec-stream');\nvar adItem = require('./ad-item');\nvar nativeAdItem = require('./native-ad-item');\nvar Tracking = require('./tracking');\nvar trackJsIfAvailable = require('./trackjs-wrapper');\n\nfunction awesomeRecommendations(ele) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var siteUrl = options.siteUrl,\n        imageCdnUrl = options.imageCdnUrl,\n        rows = options.rows,\n        pages = options.pages,\n        position = options.position,\n        nativeAdTest = options.nativeAdTest,\n        lazyLoadingTest = options.lazyLoadingTest;\n\n\n    var tracking = new Tracking(position);\n    var itemTemplate = createItemTemplate();\n    var stream = lazyLoadingTest ? new LazyRecommendationsStream(fetchItems, itemTemplate) : new RecommendationsStream(fetchItems, itemTemplate);\n\n    var contentEle = ele.querySelector('[data-content]');\n    var streamEle = stream.render();\n    contentEle.appendChild(streamEle);\n\n    function createItemTemplate() {\n        return function (ad, uuid, version) {\n            var handleAdClick = tracking.createAdClickTracker(ad, uuid, version);\n            var handleRemoveClick = tracking.createRemoveClickTracker(ad, uuid, version);\n            var state = {\n                imgCdnUrl: imageCdnUrl,\n                uuid: uuid\n            };\n            return ad.type === 'NATIVE' ? nativeAdItem({ ad: ad, handleAdClick: handleAdClick }) : adItem({ ad: ad, state: state, handleAdClick: handleAdClick, handleRemoveClick: handleRemoveClick });\n        };\n    }\n\n    function fetchItems() {\n        return getRecommendations(siteUrl, rows, pages).then(injectNativeAdTest).then(trackAndGetRecommendedItems).catch(trackAndRethrow);\n    }\n\n    function injectNativeAdTest(recommendations) {\n        var _ref = recommendations || {},\n            _ref$items = _ref.items,\n            items = _ref$items === undefined ? [] : _ref$items,\n            _ref$size = _ref.size,\n            size = _ref$size === undefined ? 0 : _ref$size;\n\n        if (nativeAdTest && size >= 6 && items[5].type === 'BAP') {\n            var nativeAd = Object.assign({}, items[5], getNativeAd());\n            return Object.assign({}, recommendations, {\n                items: [].concat(_toConsumableArray(items.slice(0, 5)), [nativeAd], _toConsumableArray(items.slice(6)))\n            });\n        }\n        return recommendations;\n    }\n\n    function getNativeAd() {\n        return {\n            type: 'NATIVE',\n            heading: 'Annonse',\n            url: 'https://www.lendo.no/refinansiering/?tracking=430&utm_source=finn&utm_medium=display&utm_campaign=rubrikk-test&utm_content=refinansiering',\n            image: {\n                type: 'BANNER',\n                unscalable: true,\n                width: 720,\n                height: 960,\n                url: 'https://static.finncdn.no/_c/data-podlet-server/720x960_finn.jpg'\n            },\n            itemId: 'lendo-bap-native-ad',\n            version: 'lendo-bap-native-ad-test',\n            uuid: getUuid(),\n            score: 1\n        };\n    }\n\n    function getUuid(a, b // placeholders\n    ) {\n        for (\n        // loop :)\n        b = a = ''; // b - result , a - numeric variable\n        a++ < 36; //\n        b += a * 51 & 52 // if \"a\" is not 9 or 14 or 19 or 24\n        ? //  return a random number or 4\n        (a ^ 15 // if \"a\" is not 15\n        ? // genetate a random number from 0 to 15\n        8 ^ Math.random() * (a ^ 20 ? 16 : 4) // unless \"a\" is 20, in which case a random number from 8 to 11\n        : 4). //  otherwise 4\n        toString(16) : '-' //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n        ) {}\n        return b;\n    }\n\n    function trackAndGetRecommendedItems(recommendations) {\n        if (isInvalidOrEmptyRecommendationsData(recommendations)) {\n            tracking.trackEmpty(recommendations);\n            return Object.assign({}, recommendations, {\n                items: []\n            });\n        }\n        if (hasRequiredTrackingMetadata(recommendations)) {\n            tracking.trackRendered(recommendations);\n            // TODO: check possible race condition with stream.render()\n            tracking.trackInscreenOnce(streamEle, recommendations);\n        }\n        return Object.assign({}, recommendations, {\n            items: recommendations.items.filter(hasMinimumRequiredData)\n        });\n    }\n\n    function hasRequiredTrackingMetadata(recommendations) {\n        return Boolean(recommendations.version && recommendations.uuid);\n    }\n\n    function trackAndRethrow(error) {\n        trackJsIfAvailable(error);\n        return Promise.reject(error);\n    }\n}\n\nmodule.exports = awesomeRecommendations;\n\n// visible for testing\nfunction isInvalidOrEmptyRecommendationsData(recommendations) {\n    return Boolean(recommendations && recommendations.items && recommendations.items.length === 0 && recommendations.fetchMore && recommendations.fetchMore.length === 0);\n}\n\nfunction hasMinimumRequiredData(item) {\n    return Boolean(item.url && item.image.url && item.itemId);\n}\n\nmodule.exports.isInvalidOrEmptyRecommendationsData = isInvalidOrEmptyRecommendationsData;\nmodule.exports.hasMinimumRequiredData = hasMinimumRequiredData;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVybi5qcyJdLCJuYW1lcyI6WyJnZXRSZWNvbW1lbmRhdGlvbnMiLCJyZXF1aXJlIiwiUmVjb21tZW5kYXRpb25zU3RyZWFtIiwiTGF6eVJlY29tbWVuZGF0aW9uc1N0cmVhbSIsImFkSXRlbSIsIm5hdGl2ZUFkSXRlbSIsIlRyYWNraW5nIiwidHJhY2tKc0lmQXZhaWxhYmxlIiwiYXdlc29tZVJlY29tbWVuZGF0aW9ucyIsImVsZSIsIm9wdGlvbnMiLCJzaXRlVXJsIiwiaW1hZ2VDZG5VcmwiLCJyb3dzIiwicGFnZXMiLCJwb3NpdGlvbiIsIm5hdGl2ZUFkVGVzdCIsImxhenlMb2FkaW5nVGVzdCIsInRyYWNraW5nIiwiaXRlbVRlbXBsYXRlIiwiY3JlYXRlSXRlbVRlbXBsYXRlIiwic3RyZWFtIiwiZmV0Y2hJdGVtcyIsImNvbnRlbnRFbGUiLCJxdWVyeVNlbGVjdG9yIiwic3RyZWFtRWxlIiwicmVuZGVyIiwiYXBwZW5kQ2hpbGQiLCJhZCIsInV1aWQiLCJ2ZXJzaW9uIiwiaGFuZGxlQWRDbGljayIsImNyZWF0ZUFkQ2xpY2tUcmFja2VyIiwiaGFuZGxlUmVtb3ZlQ2xpY2siLCJjcmVhdGVSZW1vdmVDbGlja1RyYWNrZXIiLCJzdGF0ZSIsImltZ0NkblVybCIsInR5cGUiLCJ0aGVuIiwiaW5qZWN0TmF0aXZlQWRUZXN0IiwidHJhY2tBbmRHZXRSZWNvbW1lbmRlZEl0ZW1zIiwiY2F0Y2giLCJ0cmFja0FuZFJldGhyb3ciLCJyZWNvbW1lbmRhdGlvbnMiLCJpdGVtcyIsInNpemUiLCJuYXRpdmVBZCIsIk9iamVjdCIsImFzc2lnbiIsImdldE5hdGl2ZUFkIiwic2xpY2UiLCJoZWFkaW5nIiwidXJsIiwiaW1hZ2UiLCJ1bnNjYWxhYmxlIiwid2lkdGgiLCJoZWlnaHQiLCJpdGVtSWQiLCJnZXRVdWlkIiwic2NvcmUiLCJhIiwiYiIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsImlzSW52YWxpZE9yRW1wdHlSZWNvbW1lbmRhdGlvbnNEYXRhIiwidHJhY2tFbXB0eSIsImhhc1JlcXVpcmVkVHJhY2tpbmdNZXRhZGF0YSIsInRyYWNrUmVuZGVyZWQiLCJ0cmFja0luc2NyZWVuT25jZSIsImZpbHRlciIsImhhc01pbmltdW1SZXF1aXJlZERhdGEiLCJCb29sZWFuIiwiZXJyb3IiLCJQcm9taXNlIiwicmVqZWN0IiwibW9kdWxlIiwiZXhwb3J0cyIsImxlbmd0aCIsImZldGNoTW9yZSIsIml0ZW0iXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsSUFBTUEscUJBQXFCQyxRQUFRLHVCQUFSLENBQTNCO0FBQ0EsSUFBTUMsd0JBQXdCRCxRQUFRLGNBQVIsQ0FBOUI7QUFDQSxJQUFNRSw0QkFBNEJGLFFBQVEsbUJBQVIsQ0FBbEM7QUFDQSxJQUFNRyxTQUFTSCxRQUFRLFdBQVIsQ0FBZjtBQUNBLElBQU1JLGVBQWVKLFFBQVEsa0JBQVIsQ0FBckI7QUFDQSxJQUFNSyxXQUFXTCxRQUFRLFlBQVIsQ0FBakI7QUFDQSxJQUFNTSxxQkFBcUJOLFFBQVEsbUJBQVIsQ0FBM0I7O0FBRUEsU0FBU08sc0JBQVQsQ0FBZ0NDLEdBQWhDLEVBQW1EO0FBQUEsUUFBZEMsT0FBYyx1RUFBSixFQUFJO0FBQUEsUUFFM0NDLE9BRjJDLEdBUzNDRCxPQVQyQyxDQUUzQ0MsT0FGMkM7QUFBQSxRQUczQ0MsV0FIMkMsR0FTM0NGLE9BVDJDLENBRzNDRSxXQUgyQztBQUFBLFFBSTNDQyxJQUoyQyxHQVMzQ0gsT0FUMkMsQ0FJM0NHLElBSjJDO0FBQUEsUUFLM0NDLEtBTDJDLEdBUzNDSixPQVQyQyxDQUszQ0ksS0FMMkM7QUFBQSxRQU0zQ0MsUUFOMkMsR0FTM0NMLE9BVDJDLENBTTNDSyxRQU4yQztBQUFBLFFBTzNDQyxZQVAyQyxHQVMzQ04sT0FUMkMsQ0FPM0NNLFlBUDJDO0FBQUEsUUFRM0NDLGVBUjJDLEdBUzNDUCxPQVQyQyxDQVEzQ08sZUFSMkM7OztBQVcvQyxRQUFNQyxXQUFXLElBQUlaLFFBQUosQ0FBYVMsUUFBYixDQUFqQjtBQUNBLFFBQU1JLGVBQWVDLG9CQUFy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QUFTeUQsbUNBQVQsQ0FBNkN0QixlQUE3QyxFQUE4RDtBQUMxRCxXQUFPNkIsUUFDSDdCLG1CQUNJQSxnQkFBZ0JDLEtBRHBCLElBRUlELGdCQUFnQkMsS0FBaEIsQ0FBc0JrQyxNQUF0QixLQUFpQyxDQUZyQyxJQUdJbkMsZ0JBQWdCb0MsU0FIcEIsSUFJSXBDLGdCQUFnQm9DLFNBQWhCLENBQTBCRCxNQUExQixLQUFxQyxDQUx0QyxDQUFQO0FBT0g7O0FBRUQsU0FBU1Asc0JBQVQsQ0FBZ0NTLElBQWhDLEVBQXNDO0FBQ2xDLFdBQU9SLFFBQVFRLEtBQUs1QixHQUFMLElBQVk0QixLQUFLM0IsS0FBTCxDQUFXRCxHQUF2QixJQUE4QjRCLEtBQUt2QixNQUEzQyxDQUFQO0FBQ0g7O0FBRURtQixPQUFPQyxPQUFQLENBQWVaLG1DQUFmLEdBQXFEQSxtQ0FBckQ7QUFDQVcsT0FBT0MsT0FBUCxDQUFlTixzQkFBZixHQUF3Q0Esc0JBQXhDIiwiZmlsZSI6Im1vZGVybi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZ2V0UmVjb21tZW5kYXRpb25zID0gcmVxdWlyZSgnLi9nZXQtcmVjb21tZW5kYXRpb25zJyk7XG5jb25zdCBSZWNvbW1lbmRhdGlvbnNTdHJlYW0gPSByZXF1aXJlKCcuL3JlYy1zdHJlYW0nKTtcbmNvbnN0IExhenlSZWNvbW1lbmRhdGlvbnNTdHJlYW0gPSByZXF1aXJlKCcuL2xhenktcmVjLXN0cmVhbScpO1xuY29uc3QgYWRJdGVtID0gcmVxdWlyZSgnLi9hZC1pdGVtJyk7XG5jb25zdCBuYXRpdmVBZEl0ZW0gPSByZXF1aXJlKCcuL25hdGl2ZS1hZC1pdGVtJyk7XG5jb25zdCBUcmFja2luZyA9IHJlcXVpcmUoJy4vdHJhY2tpbmcnKTtcbmNvbnN0IHRyYWNrSnNJZkF2YWlsYWJsZSA9IHJlcXVpcmUoJy4vdHJhY2tqcy13cmFwcGVyJyk7XG5cbmZ1bmN0aW9uIGF3ZXNvbWVSZWNvbW1lbmRhdGlvbnMoZWxlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICAgIHNpdGVVcmwsXG4gICAgICAgIGltYWdlQ2RuVXJsLFxuICAgICAgICByb3dzLFxuICAgICAgICBwYWdlcyxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIG5hdGl2ZUFkVGVzdCxcbiAgICAgICAgbGF6eUxvYWRpbmdUZXN0LFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgdHJhY2tpbmcgPSBuZXcgVHJhY2tpbmcocG9zaXRpb24pO1xuICAgIGNvbnN0IGl0ZW1UZW1wbGF0ZSA9IGNyZWF0ZUl0ZW1UZW1wbGF0ZSgpO1xuICAgIGNvbnN0IHN0cmVhbSA9IGxhenlMb2FkaW5nVGVzdFxuICAgICAgICA/IG5ldyBMYXp5UmVjb21tZW5kYXRpb25zU3RyZWFtKGZldGNoSXRlbXMsIGl0ZW1UZW1wbGF0ZSlcbiAgICAgICAgOiBuZXcgUmVjb21tZW5kYXRpb25zU3RyZWFtKGZldGNoSXRlbXMsIGl0ZW1UZW1wbGF0ZSk7XG5cbiAgICBjb25zdCBjb250ZW50RWxlID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRlbnRdJyk7XG4gICAgY29uc3Qgc3RyZWFtRWxlID0gc3RyZWFtLnJlbmRlcigpO1xuICAgIGNvbnRlbnRFbGUuYXBwZW5kQ2hpbGQoc3RyZWFtRWxlKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUl0ZW1UZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIChhZCwgdXVpZCwgdmVyc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlQWRDbGljayA9IHRyYWNraW5nLmNyZWF0ZUFkQ2xpY2tUcmFja2VyKFxuICAgICAgICAgICAgICAgIGFkLFxuICAgICAgICAgICAgICAgIHV1aWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVJlbW92ZUNsaWNrID0gdHJhY2tpbmcuY3JlYXRlUmVtb3ZlQ2xpY2tUcmFja2VyKFxuICAgICAgICAgICAgICAgIGFkLFxuICAgICAgICAgICAgICAgIHV1aWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGltZ0NkblVybDogaW1hZ2VDZG5VcmwsXG4gICAgICAgICAgICAgICAgdXVpZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYWQudHlwZSA9PT0gJ05BVElWRSdcbiAgICAgICAgICAgICAgICA/IG5hdGl2ZUFkSXRlbSh7IGFkLCBoYW5kbGVBZENsaWNrIH0pXG4gICAgICAgICAgICAgICAgOiBhZEl0ZW0oeyBhZCwgc3RhdGUsIGhhbmRsZUFkQ2xpY2ssIGhhbmRsZVJlbW92ZUNsaWNrIH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZldGNoSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiBnZXRSZWNvbW1lbmRhdGlvbnMoc2l0ZVVybCwgcm93cywgcGFnZXMpXG4gICAgICAgICAgICAudGhlbihpbmplY3ROYXRpdmVBZFRlc3QpXG4gICAgICAgICAgICAudGhlbih0cmFja0FuZEdldFJlY29tbWVuZGVkSXRlbXMpXG4gICAgICAgICAgICAuY2F0Y2godHJhY2tBbmRSZXRocm93KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmplY3ROYXRpdmVBZFRlc3QocmVjb21tZW5kYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbXMgPSBbXSwgc2l6ZSA9IDAgfSA9IHJlY29tbWVuZGF0aW9ucyB8fCB7fTtcbiAgICAgICAgaWYgKG5hdGl2ZUFkVGVzdCAmJiBzaXplID49IDYgJiYgaXRlbXNbNV0udHlwZSA9PT0gJ0JBUCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hdGl2ZUFkID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbXNbNV0sIGdldE5hdGl2ZUFkKCkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY29tbWVuZGF0aW9ucywge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBbLi4uaXRlbXMuc2xpY2UoMCwgNSksIG5hdGl2ZUFkLCAuLi5pdGVtcy5zbGljZSg2KV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5hdGl2ZUFkKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ05BVElWRScsXG4gICAgICAgICAgICBoZWFkaW5nOiAnQW5ub25zZScsXG4gICAgICAgICAgICB1cmw6XG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LmxlbmRvLm5vL3JlZmluYW5zaWVyaW5nLz90cmFja2luZz00MzAmdXRtX3NvdXJjZT1maW5uJnV0bV9tZWRpdW09ZGlzcGxheSZ1dG1fY2FtcGFpZ249cnVicmlray10ZXN0JnV0bV9jb250ZW50PXJlZmluYW5zaWVyaW5nJyxcbiAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0JBTk5FUicsXG4gICAgICAgICAgICAgICAgdW5zY2FsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aDogNzIwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogOTYwLFxuICAgICAgICAgICAgICAgIHVybDpcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vc3RhdGljLmZpbm5jZG4ubm8vX2MvZGF0YS1wb2RsZXQtc2VydmVyLzcyMHg5NjBfZmlubi5qcGcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGl0ZW1JZDogJ2xlbmRvLWJhcC1uYXRpdmUtYWQnLFxuICAgICAgICAgICAgdmVyc2lvbjogJ2xlbmRvLWJhcC1uYXRpdmUtYWQtdGVzdCcsXG4gICAgICAgICAgICB1dWlkOiBnZXRVdWlkKCksXG4gICAgICAgICAgICBzY29yZTogMSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRVdWlkKFxuICAgICAgICBhLFxuICAgICAgICBiIC8vIHBsYWNlaG9sZGVyc1xuICAgICkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgICAgLy8gbG9vcCA6KVxuICAgICAgICAgICAgYiA9IGEgPSAnJzsgLy8gYiAtIHJlc3VsdCAsIGEgLSBudW1lcmljIHZhcmlhYmxlXG4gICAgICAgICAgICBhKysgPCAzNjsgLy9cbiAgICAgICAgICAgIGIgKz1cbiAgICAgICAgICAgICAgICAoYSAqIDUxKSAmIDUyIC8vIGlmIFwiYVwiIGlzIG5vdCA5IG9yIDE0IG9yIDE5IG9yIDI0XG4gICAgICAgICAgICAgICAgICAgID8gLy8gIHJldHVybiBhIHJhbmRvbSBudW1iZXIgb3IgNFxuICAgICAgICAgICAgICAgICAgICAgIChhIF4gMTUgLy8gaWYgXCJhXCIgaXMgbm90IDE1XG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gLy8gZ2VuZXRhdGUgYSByYW5kb20gbnVtYmVyIGZyb20gMCB0byAxNVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDggXiAoTWF0aC5yYW5kb20oKSAqIChhIF4gMjAgPyAxNiA6IDQpKSAvLyB1bmxlc3MgXCJhXCIgaXMgMjAsIGluIHdoaWNoIGNhc2UgYSByYW5kb20gbnVtYmVyIGZyb20gOCB0byAxMVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IDRcbiAgICAgICAgICAgICAgICAgICAgICApIC8vICBvdGhlcndpc2UgNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgICAgIDogJy0nIC8vICBpbiBvdGhlciBjYXNlcyAoaWYgXCJhXCIgaXMgOSwxNCwxOSwyNCkgaW5zZXJ0IFwiLVwiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyYWNrQW5kR2V0UmVjb21tZW5kZWRJdGVtcyhyZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgICAgaWYgKGlzSW52YWxpZE9yRW1wdHlSZWNvbW1lbmRhdGlvbnNEYXRhKHJlY29tbWVuZGF0aW9ucykpIHtcbiAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrRW1wdHkocmVjb21tZW5kYXRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZWNvbW1lbmRhdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzUmVxdWlyZWRUcmFja2luZ01ldGFkYXRhKHJlY29tbWVuZGF0aW9ucykpIHtcbiAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrUmVuZGVyZWQocmVjb21tZW5kYXRpb25zKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGNoZWNrIHBvc3NpYmxlIHJhY2UgY29uZGl0aW9uIHdpdGggc3RyZWFtLnJlbmRlcigpXG4gICAgICAgICAgICB0cmFja2luZy50cmFja0luc2NyZWVuT25jZShzdHJlYW1FbGUsIHJlY29tbWVuZGF0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY29tbWVuZGF0aW9ucywge1xuICAgICAgICAgICAgaXRlbXM6IHJlY29tbWVuZGF0aW9ucy5pdGVtcy5maWx0ZXIoaGFzTWluaW11bVJlcXVpcmVkRGF0YSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc1JlcXVpcmVkVHJhY2tpbmdNZXRhZGF0YShyZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVjb21tZW5kYXRpb25zLnZlcnNpb24gJiYgcmVjb21tZW5kYXRpb25zLnV1aWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyYWNrQW5kUmV0aHJvdyhlcnJvcikge1xuICAgICAgICB0cmFja0pzSWZBdmFpbGFibGUoZXJyb3IpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhd2Vzb21lUmVjb21tZW5kYXRpb25zO1xuXG4vLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBpc0ludmFsaWRPckVtcHR5UmVjb21tZW5kYXRpb25zRGF0YShyZWNvbW1lbmRhdGlvbnMpIHtcbiAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgICAgcmVjb21tZW5kYXRpb25zICYmXG4gICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMuaXRlbXMgJiZcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5pdGVtcy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5mZXRjaE1vcmUgJiZcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5mZXRjaE1vcmUubGVuZ3RoID09PSAwXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gaGFzTWluaW11bVJlcXVpcmVkRGF0YShpdGVtKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4oaXRlbS51cmwgJiYgaXRlbS5pbWFnZS51cmwgJiYgaXRlbS5pdGVtSWQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cy5pc0ludmFsaWRPckVtcHR5UmVjb21tZW5kYXRpb25zRGF0YSA9IGlzSW52YWxpZE9yRW1wdHlSZWNvbW1lbmRhdGlvbnNEYXRhO1xubW9kdWxlLmV4cG9ydHMuaGFzTWluaW11bVJlcXVpcmVkRGF0YSA9IGhhc01pbmltdW1SZXF1aXJlZERhdGE7XG4iXX0=","deps":{"./get-recommendations":"518e918c6d8251df1a659ae581fe150f33a13df21923dc374593d36c951f7503","./trackjs-wrapper":"da99622d8821b3c48c27ecb2a60c964c9c0e465f6581b25cc8da3aa98756f935","./native-ad-item":"c10050a1ddcb5dda4e663733daea2635b152ba28ed195fde23de94e864124a82","./rec-stream":"e724227fdf7a8f35910f96734310a3f2127ff7978331d4ece6455f7f63dc77c6","./ad-item":"2fd5d60fff695548be4cf6605c55ce0135624a3d5225ca95f5a37522f0dd91d8","./tracking":"c4bd7692d3daea2ee6d89ef62e41de7c5fba69fd6389136059a94da17e6b5730","./lazy-rec-stream":"2cb2e5d4dda34c34740e6b20dc8c27e760e8d0d1c15fb7311af33d30cdf39f50"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/modern.js","index":13,"indexDeps":{"./get-recommendations":9,"./trackjs-wrapper":17,"./native-ad-item":14,"./rec-stream":15,"./ad-item":8,"./tracking":16,"./lazy-rec-stream":12}}
,
{"id":"c10050a1ddcb5dda4e663733daea2635b152ba28ed195fde23de94e864124a82","source":"'use strict';\n\nvar el = require('@finn-no/create-element');\n\nvar nativeAdItem = function nativeAdItem(_ref) {\n    var ad = _ref.ad,\n        handleAdClick = _ref.handleAdClick;\n\n    var imageEle = getImage(ad);\n    var tagEle = getItemTag(ad);\n\n    // TODO: fix native ad tracking (click)\n    var linkOptions = {\n        href: ad.url,\n        onclick: handleAdClick,\n        'data-version': ad.version,\n        'data-score': ad.score,\n        'data-uuid': ad.uuid,\n        style: 'width: 100%',\n        target: '_blank'\n    };\n\n    var resultItem = el('div.rec-item.flex.align-items-center', { 'data-rec-item': true }, el('a.linkblock.licorice.flex', linkOptions, el('h3.screen-reader-only', null, ad.heading), el('div.rec-media', null, imageEle), el('div.rec-item__tag', null, tagEle)));\n    resultItem.style.transition = 'opacity .6s';\n    resultItem.style.opacity = '0';\n\n    imageEle.querySelector('img').addEventListener('load', function () {\n        resultItem.classList.add('bg-milk');\n        resultItem.style.opacity = '1';\n    });\n\n    return resultItem;\n};\n\nfunction getImage(ad) {\n    var src = ad.image.url;\n    return el('div.format3by4.bg-milk', null, el('img.centered-image', { src: src, alt: '' }));\n}\n\nfunction getItemTag() {\n    var labelEle = el('div.rec-label', null, el('div.rec-description.truncate', null, 'Annonse'));\n\n    return el('div.rec-tag.milk.unoverflowify', null, labelEle && el('div', { style: 'margin: 4px 4px 0 4px' }, labelEle));\n}\n\nmodule.exports = nativeAdItem;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdGl2ZS1hZC1pdGVtLmpzIl0sIm5hbWVzIjpbImVsIiwicmVxdWlyZSIsIm5hdGl2ZUFkSXRlbSIsImFkIiwiaGFuZGxlQWRDbGljayIsImltYWdlRWxlIiwiZ2V0SW1hZ2UiLCJ0YWdFbGUiLCJnZXRJdGVtVGFnIiwibGlua09wdGlvbnMiLCJocmVmIiwidXJsIiwib25jbGljayIsInZlcnNpb24iLCJzY29yZSIsInV1aWQiLCJzdHlsZSIsInRhcmdldCIsInJlc3VsdEl0ZW0iLCJoZWFkaW5nIiwidHJhbnNpdGlvbiIsIm9wYWNpdHkiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInNyYyIsImltYWdlIiwiYWx0IiwibGFiZWxFbGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxLQUFLQyxRQUFRLHlCQUFSLENBQVg7O0FBRUEsSUFBTUMsZUFBZSxTQUFmQSxZQUFlLE9BQTJCO0FBQUEsUUFBeEJDLEVBQXdCLFFBQXhCQSxFQUF3QjtBQUFBLFFBQXBCQyxhQUFvQixRQUFwQkEsYUFBb0I7O0FBQzVDLFFBQU1DLFdBQVdDLFNBQVNILEVBQVQsQ0FBakI7QUFDQSxRQUFNSSxTQUFTQyxXQUFXTCxFQUFYLENBQWY7O0FBRUE7QUFDQSxRQUFNTSxjQUFjO0FBQ2hCQyxjQUFNUCxHQUFHUSxHQURPO0FBRWhCQyxpQkFBU1IsYUFGTztBQUdoQix3QkFBZ0JELEdBQUdVLE9BSEg7QUFJaEIsc0JBQWNWLEdBQUdXLEtBSkQ7QUFLaEIscUJBQWFYLEdBQUdZLElBTEE7QUFNaEJDLGVBQU8sYUFOUztBQU9oQkMsZ0JBQVE7QUFQUSxLQUFwQjs7QUFVQSxRQUFNQyxhQUFhbEIsR0FDZixzQ0FEZSxFQUVmLEVBQUUsaUJBQWlCLElBQW5CLEVBRmUsRUFHZkEsR0FDSSwyQkFESixFQUVJUyxXQUZKLEVBR0lULEdBQUcsdUJBQUgsRUFBNEIsSUFBNUIsRUFBa0NHLEdBQUdnQixPQUFyQyxDQUhKLEVBSUluQixHQUFHLGVBQUgsRUFBb0IsSUFBcEIsRUFBMEJLLFFBQTFCLENBSkosRUFLSUwsR0FBRyxtQkFBSCxFQUF3QixJQUF4QixFQUE4Qk8sTUFBOUIsQ0FMSixDQUhlLENBQW5CO0FBV0FXLGVBQVdGLEtBQVgsQ0FBaUJJLFVBQWpCLEdBQThCLGFBQTlCO0FBQ0FGLGVBQVdGLEtBQVgsQ0FBaUJLLE9BQWpCLEdBQTJCLEdBQTNCOztBQUVBaEIsYUFBU2lCLGFBQVQsQ0FBdUIsS0FBdkIsRUFBOEJDLGdCQUE5QixDQUErQyxNQUEvQyxFQUF1RCxZQUFNO0FBQ3pETCxtQkFBV00sU0FBWCxDQUFxQkMsR0FBckIsQ0FBeUIsU0FBekI7QUFDQVAsbUJBQVdGLEtBQVgsQ0FBaUJLLE9BQWpCLEdBQTJCLEdBQTNCO0FBQ0gsS0FIRDs7QUFLQSxXQUFPSCxVQUFQO0FBQ0gsQ0FuQ0Q7O0FBcUNBLFNBQVNaLFFBQVQsQ0FBa0JILEVBQWxCLEVBQXNCO0FBQ2xCLFFBQU11QixNQUFNdkIsR0FBR3dCLEtBQUgsQ0FBU2hCLEdBQXJCO0FBQ0EsV0FBT1gsR0FDSCx3QkFERyxFQUVILElBRkcsRUFHSEEsR0FBRyxvQkFBSCxFQUF5QixFQUFFMEIsUUFBRixFQUFPRSxLQUFLLEVBQVosRUFBekIsQ0FIRyxDQUFQO0FBS0g7O0FBRUQsU0FBU3BCLFVBQVQsR0FBc0I7QUFDbEIsUUFBTXFCLFdBQVc3QixHQUNiLGVBRGEsRUFFYixJQUZhLEVBR2JBLEdBQUcsOEJBQUgsRUFBbUMsSUFBbkMsRUFBeUMsU0FBekMsQ0FIYSxDQUFqQjs7QUFNQSxXQUFPQSxHQUNILGdDQURHLEVBRUgsSUFGRyxFQUdINkIsWUFBWTdCLEdBQUcsS0FBSCxFQUFVLEVBQUVnQixPQUFPLHVCQUFULEVBQVYsRUFBOENhLFFBQTlDLENBSFQsQ0FBUDtBQUtIOztBQUVEQyxPQUFPQyxPQUFQLEdBQWlCN0IsWUFBakIiLCJmaWxlIjoibmF0aXZlLWFkLWl0ZW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGVsID0gcmVxdWlyZSgnQGZpbm4tbm8vY3JlYXRlLWVsZW1lbnQnKTtcblxuY29uc3QgbmF0aXZlQWRJdGVtID0gKHsgYWQsIGhhbmRsZUFkQ2xpY2sgfSkgPT4ge1xuICAgIGNvbnN0IGltYWdlRWxlID0gZ2V0SW1hZ2UoYWQpO1xuICAgIGNvbnN0IHRhZ0VsZSA9IGdldEl0ZW1UYWcoYWQpO1xuXG4gICAgLy8gVE9ETzogZml4IG5hdGl2ZSBhZCB0cmFja2luZyAoY2xpY2spXG4gICAgY29uc3QgbGlua09wdGlvbnMgPSB7XG4gICAgICAgIGhyZWY6IGFkLnVybCxcbiAgICAgICAgb25jbGljazogaGFuZGxlQWRDbGljayxcbiAgICAgICAgJ2RhdGEtdmVyc2lvbic6IGFkLnZlcnNpb24sXG4gICAgICAgICdkYXRhLXNjb3JlJzogYWQuc2NvcmUsXG4gICAgICAgICdkYXRhLXV1aWQnOiBhZC51dWlkLFxuICAgICAgICBzdHlsZTogJ3dpZHRoOiAxMDAlJyxcbiAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJyxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0SXRlbSA9IGVsKFxuICAgICAgICAnZGl2LnJlYy1pdGVtLmZsZXguYWxpZ24taXRlbXMtY2VudGVyJyxcbiAgICAgICAgeyAnZGF0YS1yZWMtaXRlbSc6IHRydWUgfSxcbiAgICAgICAgZWwoXG4gICAgICAgICAgICAnYS5saW5rYmxvY2subGljb3JpY2UuZmxleCcsXG4gICAgICAgICAgICBsaW5rT3B0aW9ucyxcbiAgICAgICAgICAgIGVsKCdoMy5zY3JlZW4tcmVhZGVyLW9ubHknLCBudWxsLCBhZC5oZWFkaW5nKSxcbiAgICAgICAgICAgIGVsKCdkaXYucmVjLW1lZGlhJywgbnVsbCwgaW1hZ2VFbGUpLFxuICAgICAgICAgICAgZWwoJ2Rpdi5yZWMtaXRlbV9fdGFnJywgbnVsbCwgdGFnRWxlKVxuICAgICAgICApXG4gICAgKTtcbiAgICByZXN1bHRJdGVtLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAuNnMnO1xuICAgIHJlc3VsdEl0ZW0uc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgIGltYWdlRWxlLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgIHJlc3VsdEl0ZW0uY2xhc3NMaXN0LmFkZCgnYmctbWlsaycpO1xuICAgICAgICByZXN1bHRJdGVtLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0SXRlbTtcbn07XG5cbmZ1bmN0aW9uIGdldEltYWdlKGFkKSB7XG4gICAgY29uc3Qgc3JjID0gYWQuaW1hZ2UudXJsO1xuICAgIHJldHVybiBlbChcbiAgICAgICAgJ2Rpdi5mb3JtYXQzYnk0LmJnLW1pbGsnLFxuICAgICAgICBudWxsLFxuICAgICAgICBlbCgnaW1nLmNlbnRlcmVkLWltYWdlJywgeyBzcmMsIGFsdDogJycgfSlcbiAgICApO1xufVxuXG5mdW5jdGlvbiBnZXRJdGVtVGFnKCkge1xuICAgIGNvbnN0IGxhYmVsRWxlID0gZWwoXG4gICAgICAgICdkaXYucmVjLWxhYmVsJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZWwoJ2Rpdi5yZWMtZGVzY3JpcHRpb24udHJ1bmNhdGUnLCBudWxsLCAnQW5ub25zZScpXG4gICAgKTtcblxuICAgIHJldHVybiBlbChcbiAgICAgICAgJ2Rpdi5yZWMtdGFnLm1pbGsudW5vdmVyZmxvd2lmeScsXG4gICAgICAgIG51bGwsXG4gICAgICAgIGxhYmVsRWxlICYmIGVsKCdkaXYnLCB7IHN0eWxlOiAnbWFyZ2luOiA0cHggNHB4IDAgNHB4JyB9LCBsYWJlbEVsZSlcbiAgICApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUFkSXRlbTtcbiJdfQ==","deps":{"@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/native-ad-item.js","index":14,"indexDeps":{"@finn-no/create-element":3}}
,
{"id":"e724227fdf7a8f35910f96734310a3f2127ff7978331d4ece6455f7f63dc77c6","source":"'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar el = require('@finn-no/create-element');\n\nvar RecommendationsStream = function () {\n    function RecommendationsStream(fetchItems, itemTemplate) {\n        _classCallCheck(this, RecommendationsStream);\n\n        this._fetchItems = fetchItems;\n        this._itemTemplate = itemTemplate;\n        this._spinnerEle = RecommendationsStream.createSpinnerEle();\n    }\n\n    _createClass(RecommendationsStream, [{\n        key: 'render',\n        value: function render() {\n            this._scrollListEle = el('div', { id: 'scrollList' });\n            this._element = el('div', null, this._scrollListEle);\n            this.scrollHandler();\n            return this._element;\n        }\n    }, {\n        key: 'scrollHandler',\n        value: function scrollHandler() {\n            var _this = this;\n\n            this._scrollListEle.appendChild(this._spinnerEle);\n\n            this._fetchItems().then(function (_ref) {\n                var items = _ref.items,\n                    uuid = _ref.uuid,\n                    version = _ref.version;\n\n                _this._spinnerEle.remove();\n                if (items.length === 0) {\n                    return;\n                }\n                var itemsEle = el('div', { style: 'opacity: 0; transition: opacity 0.6s;' }, el('h2', { id: 'recommendations-label' }, 'Anbefalinger'), _this.renderItems(items, uuid, version));\n                window.setTimeout(function () {\n                    itemsEle.style.opacity = '1';\n                }, 20);\n                _this._scrollListEle.appendChild(itemsEle);\n            }).catch(function () {\n                _this._spinnerEle.remove();\n            });\n        }\n    }, {\n        key: 'renderItems',\n        value: function renderItems(items, uuid, version) {\n            var _this2 = this;\n\n            return el('div.line.flex.wrap.align-items-stretch.cols2upto640.cols3upto990.cols3from990.rec-list', null, items.map(function (item) {\n                return _this2.renderItem(item, uuid, version);\n            }));\n        }\n    }, {\n        key: 'renderItem',\n        value: function renderItem(item, uuid, version) {\n            return el('div.unit.rec-list__item.flex.bg-ice.bat.border-milk', null, this._itemTemplate(item, uuid, version));\n        }\n    }], [{\n        key: 'createSpinnerEle',\n        value: function createSpinnerEle() {\n            return el('div.centered.pvm', null, el('div.spinner'));\n        }\n    }]);\n\n    return RecommendationsStream;\n}();\n\nmodule.exports = RecommendationsStream;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYy1zdHJlYW0uanMiXSwibmFtZXMiOlsiZWwiLCJyZXF1aXJlIiwiUmVjb21tZW5kYXRpb25zU3RyZWFtIiwiZmV0Y2hJdGVtcyIsIml0ZW1UZW1wbGF0ZSIsIl9mZXRjaEl0ZW1zIiwiX2l0ZW1UZW1wbGF0ZSIsIl9zcGlubmVyRWxlIiwiY3JlYXRlU3Bpbm5lckVsZSIsIl9zY3JvbGxMaXN0RWxlIiwiaWQiLCJfZWxlbWVudCIsInNjcm9sbEhhbmRsZXIiLCJhcHBlbmRDaGlsZCIsInRoZW4iLCJpdGVtcyIsInV1aWQiLCJ2ZXJzaW9uIiwicmVtb3ZlIiwibGVuZ3RoIiwiaXRlbXNFbGUiLCJzdHlsZSIsInJlbmRlckl0ZW1zIiwid2luZG93Iiwic2V0VGltZW91dCIsIm9wYWNpdHkiLCJjYXRjaCIsIm1hcCIsInJlbmRlckl0ZW0iLCJpdGVtIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQUVBLElBQU1BLEtBQUtDLFFBQVEseUJBQVIsQ0FBWDs7SUFFTUMscUI7QUFDRixtQ0FBWUMsVUFBWixFQUF3QkMsWUFBeEIsRUFBc0M7QUFBQTs7QUFDbEMsYUFBS0MsV0FBTCxHQUFtQkYsVUFBbkI7QUFDQSxhQUFLRyxhQUFMLEdBQXFCRixZQUFyQjtBQUNBLGFBQUtHLFdBQUwsR0FBbUJMLHNCQUFzQk0sZ0JBQXRCLEVBQW5CO0FBQ0g7Ozs7aUNBRVE7QUFDTCxpQkFBS0MsY0FBTCxHQUFzQlQsR0FBRyxLQUFILEVBQVUsRUFBRVUsSUFBSSxZQUFOLEVBQVYsQ0FBdEI7QUFDQSxpQkFBS0MsUUFBTCxHQUFnQlgsR0FBRyxLQUFILEVBQVUsSUFBVixFQUFnQixLQUFLUyxjQUFyQixDQUFoQjtBQUNBLGlCQUFLRyxhQUFMO0FBQ0EsbUJBQU8sS0FBS0QsUUFBWjtBQUNIOzs7d0NBRWU7QUFBQTs7QUFDWixpQkFBS0YsY0FBTCxDQUFvQkksV0FBcEIsQ0FBZ0MsS0FBS04sV0FBckM7O0FBRUEsaUJBQUtGLFdBQUwsR0FDS1MsSUFETCxDQUNVLGdCQUE4QjtBQUFBLG9CQUEzQkMsS0FBMkIsUUFBM0JBLEtBQTJCO0FBQUEsb0JBQXBCQyxJQUFvQixRQUFwQkEsSUFBb0I7QUFBQSxvQkFBZEMsT0FBYyxRQUFkQSxPQUFjOztBQUNoQyxzQkFBS1YsV0FBTCxDQUFpQlcsTUFBakI7QUFDQSxvQkFBSUgsTUFBTUksTUFBTixLQUFpQixDQUFyQixFQUF3QjtBQUNwQjtBQUNIO0FBQ0Qsb0JBQU1DLFdBQVdwQixHQUNiLEtBRGEsRUFFYixFQUFFcUIsT0FBTyx1Q0FBVCxFQUZhLEVBR2JyQixHQUFHLElBQUgsRUFBUyxFQUFFVSxJQUFJLHVCQUFOLEVBQVQsRUFBMEMsY0FBMUMsQ0FIYSxFQUliLE1BQUtZLFdBQUwsQ0FBaUJQLEtBQWpCLEVBQXdCQyxJQUF4QixFQUE4QkMsT0FBOUIsQ0FKYSxDQUFqQjtBQU1BTSx1QkFBT0MsVUFBUCxDQUFrQixZQUFNO0FBQ3BCSiw2QkFBU0MsS0FBVCxDQUFlSSxPQUFmLEdBQXlCLEdBQXpCO0FBQ0gsaUJBRkQsRUFFRyxFQUZIO0FBR0Esc0JBQUtoQixjQUFMLENBQW9CSSxXQUFwQixDQUFnQ08sUUFBaEM7QUFDSCxhQWhCTCxFQWlCS00sS0FqQkwsQ0FpQlcsWUFBTTtBQUNULHNCQUFLbkIsV0FBTCxDQUFpQlcsTUFBakI7QUFDSCxhQW5CTDtBQW9CSDs7O29DQUVXSCxLLEVBQU9DLEksRUFBTUMsTyxFQUFTO0FBQUE7O0FBQzlCLG1CQUFPakIsR0FDSCx3RkFERyxFQUVILElBRkcsRUFHSGUsTUFBTVksR0FBTixDQUFVO0FBQUEsdUJBQVEsT0FBS0MsVUFBTCxDQUFnQkMsSUFBaEIsRUFBc0JiLElBQXRCLEVBQTRCQyxPQUE1QixDQUFSO0FBQUEsYUFBVixDQUhHLENBQVA7QUFLSDs7O21DQUVVWSxJLEVBQU1iLEksRUFBTUMsTyxFQUFTO0FBQzVCLG1CQUFPakIsR0FDSCxxREFERyxFQUVILElBRkcsRUFHSCxLQUFLTSxhQUFMLENBQW1CdUIsSUFBbkIsRUFBeUJiLElBQXpCLEVBQStCQyxPQUEvQixDQUhHLENBQVA7QUFLSDs7OzJDQUV5QjtBQUN0QixtQkFBT2pCLEdBQUcsa0JBQUgsRUFBdUIsSUFBdkIsRUFBNkJBLEdBQUcsYUFBSCxDQUE3QixDQUFQO0FBQ0g7Ozs7OztBQUdMOEIsT0FBT0MsT0FBUCxHQUFpQjdCLHFCQUFqQiIsImZpbGUiOiJyZWMtc3RyZWFtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBlbCA9IHJlcXVpcmUoJ0BmaW5uLW5vL2NyZWF0ZS1lbGVtZW50Jyk7XG5cbmNsYXNzIFJlY29tbWVuZGF0aW9uc1N0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZmV0Y2hJdGVtcywgaXRlbVRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoSXRlbXMgPSBmZXRjaEl0ZW1zO1xuICAgICAgICB0aGlzLl9pdGVtVGVtcGxhdGUgPSBpdGVtVGVtcGxhdGU7XG4gICAgICAgIHRoaXMuX3NwaW5uZXJFbGUgPSBSZWNvbW1lbmRhdGlvbnNTdHJlYW0uY3JlYXRlU3Bpbm5lckVsZSgpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5fc2Nyb2xsTGlzdEVsZSA9IGVsKCdkaXYnLCB7IGlkOiAnc2Nyb2xsTGlzdCcgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbCgnZGl2JywgbnVsbCwgdGhpcy5fc2Nyb2xsTGlzdEVsZSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBzY3JvbGxIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLl9zY3JvbGxMaXN0RWxlLmFwcGVuZENoaWxkKHRoaXMuX3NwaW5uZXJFbGUpO1xuXG4gICAgICAgIHRoaXMuX2ZldGNoSXRlbXMoKVxuICAgICAgICAgICAgLnRoZW4oKHsgaXRlbXMsIHV1aWQsIHZlcnNpb24gfSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NwaW5uZXJFbGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zRWxlID0gZWwoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAnb3BhY2l0eTogMDsgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjZzOycgfSxcbiAgICAgICAgICAgICAgICAgICAgZWwoJ2gyJywgeyBpZDogJ3JlY29tbWVuZGF0aW9ucy1sYWJlbCcgfSwgJ0FuYmVmYWxpbmdlcicpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckl0ZW1zKGl0ZW1zLCB1dWlkLCB2ZXJzaW9uKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtc0VsZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIH0sIDIwKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxMaXN0RWxlLmFwcGVuZENoaWxkKGl0ZW1zRWxlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NwaW5uZXJFbGUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcywgdXVpZCwgdmVyc2lvbikge1xuICAgICAgICByZXR1cm4gZWwoXG4gICAgICAgICAgICAnZGl2LmxpbmUuZmxleC53cmFwLmFsaWduLWl0ZW1zLXN0cmV0Y2guY29sczJ1cHRvNjQwLmNvbHMzdXB0bzk5MC5jb2xzM2Zyb205OTAucmVjLWxpc3QnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGl0ZW1zLm1hcChpdGVtID0+IHRoaXMucmVuZGVySXRlbShpdGVtLCB1dWlkLCB2ZXJzaW9uKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtKGl0ZW0sIHV1aWQsIHZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIGVsKFxuICAgICAgICAgICAgJ2Rpdi51bml0LnJlYy1saXN0X19pdGVtLmZsZXguYmctaWNlLmJhdC5ib3JkZXItbWlsaycsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgdGhpcy5faXRlbVRlbXBsYXRlKGl0ZW0sIHV1aWQsIHZlcnNpb24pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZVNwaW5uZXJFbGUoKSB7XG4gICAgICAgIHJldHVybiBlbCgnZGl2LmNlbnRlcmVkLnB2bScsIG51bGwsIGVsKCdkaXYuc3Bpbm5lcicpKTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjb21tZW5kYXRpb25zU3RyZWFtO1xuIl19","deps":{"@finn-no/create-element":"763e82e214e1d0d167e05fa0d8e4eb878f45f1fcfc22ca65d5990ceaf4eed61a"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/rec-stream.js","index":15,"indexDeps":{"@finn-no/create-element":3}}
,
{"id":"c4bd7692d3daea2ee6d89ef62e41de7c5fba69fd6389136059a94da17e6b5730","source":"'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar tracking = require('@finn-no/analytics');\nvar InscreenObserver = require('@finn-no/inscreen-observer').default;\n\nvar Tracking = function () {\n    function Tracking(position) {\n        _classCallCheck(this, Tracking);\n\n        this.position = position;\n    }\n\n    _createClass(Tracking, [{\n        key: 'trackRendered',\n        value: function trackRendered(recommendations) {\n            if (!this.position) {\n                return;\n            }\n            var adverts = recommendations.items;\n\n            adverts.filter(function (ad) {\n                return ad.trackingCode;\n            }).forEach(function (ad) {\n                tracking.trackEvent({\n                    ecType: 'AD',\n                    ecCategory: 'LOG_PROFILED_ADS_FRONT_VIEW',\n                    eventData: {\n                        'recsys.trackingcode': ad.trackingCode,\n                        'recsys.score': ad.score,\n                        'recsys.uuid': recommendations.uuid\n                    },\n                    context: {\n                        finnkode: ad.itemId\n                    }\n                });\n            });\n\n            var adIds = adverts.filter(function (ad) {\n                return ad.type !== 'NATIVE';\n            }) // Avoid tracking native ad test\n            .map(function (ad) {\n                return ad.itemId;\n            }).join(',');\n\n            tracking.trackEvent({\n                ecType: 'USER',\n                ecCategory: 'recommendationEvents',\n                eventData: {\n                    adIds: adIds,\n                    version: recommendations.version,\n                    'recsys.uuid': recommendations.uuid,\n                    'recsys.position': 'recommend.m-' + this.position + '.show'\n                }\n            });\n\n            adverts.filter(function (ad) {\n                return ad.type === 'NATIVE';\n            }).forEach(function (ad) {\n                tracking.trackEvent({\n                    ecType: 'USER',\n                    ecCategory: 'recommendationEvents',\n                    eventData: {\n                        adIds: [ad.itemId, ad.score, ad.version].join(':'),\n                        version: ad.version,\n                        'recsys.uuid': ad.uuid,\n                        'recsys.position': 'recommend.m-frontpage_awesome-lendoBapNativeAdTest.recommended'\n                    }\n                });\n                tracking.trackEvent({\n                    ecType: 'USER',\n                    ecCategory: 'recommendationEvents',\n                    eventData: {\n                        adIds: ad.itemId,\n                        version: ad.version,\n                        'recsys.uuid': ad.uuid,\n                        'recsys.position': 'recommend.m-frontpage_awesome-lendoBapNativeAdTest.show'\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'trackInscreenOnce',\n        value: function trackInscreenOnce(view, recommendations) {\n            var _this = this;\n\n            var observer = new InscreenObserver(function () {\n                _this.sendIncreenTrackEvent(recommendations);\n            }, {\n                once: true\n            });\n            observer.observe(view);\n        }\n    }, {\n        key: 'sendIncreenTrackEvent',\n        value: function sendIncreenTrackEvent(recommendations) {\n            if (!this.position) {\n                return;\n            }\n            var adIds = recommendations.items.filter(function (ad) {\n                return ad.type !== 'NATIVE';\n            }) // Avoid tracking native ad test\n            .map(function (ad) {\n                return ad.itemId;\n            }).join(',');\n\n            tracking.trackEvent({\n                ecType: 'USER',\n                ecCategory: 'recommendationEvents',\n                eventData: {\n                    adIds: adIds,\n                    version: recommendations.version,\n                    'recsys.uuid': recommendations.uuid,\n                    'recsys.position': 'recommend.m-' + this.position + '.inscreen'\n                }\n            });\n\n            recommendations.items.filter(function (ad) {\n                return ad.type === 'NATIVE';\n            }).forEach(function (ad) {\n                tracking.trackEvent({\n                    ecType: 'USER',\n                    ecCategory: 'recommendationEvents',\n                    eventData: {\n                        adIds: ad.itemId,\n                        version: ad.version,\n                        'recsys.uuid': ad.uuid,\n                        'recsys.position': 'recommend.m-frontpage_awesome-lendoBapNativeAdTest.inscreen'\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'trackEmpty',\n        value: function trackEmpty(recommendations) {\n            if (!this.position) {\n                return;\n            }\n            tracking.trackEvent({\n                ecType: 'USER',\n                ecCategory: 'recommendationEvents',\n                eventData: {\n                    version: recommendations.version,\n                    'recsys.position': 'recommend.m-' + this.position + '.empty'\n                }\n            });\n        }\n    }, {\n        key: 'createAdClickTracker',\n        value: function createAdClickTracker(ad, uuid, version) {\n            var _this2 = this;\n\n            var adId = ad.itemId;\n            return function () {\n                if (ad.type === 'NATIVE') {\n                    tracking.trackEvent({\n                        ecType: 'USER',\n                        ecCategory: 'recommendationEvents',\n                        eventData: {\n                            version: ad.version,\n                            'recsys.uuid': ad.uuid,\n                            'recsys.position': 'recommend.m-frontpage_awesome-lendoBapNativeAdTest.click'\n                        },\n                        context: {\n                            finnkode: adId\n                        }\n                    });\n                    // Early return to avoid further tracking for native ad test\n                    return;\n                }\n\n                tracking.trackEventLater({\n                    ecType: 'USER',\n                    ecCategory: 'recommendationEvents',\n                    eventData: {\n                        version: version,\n                        'recsys.uuid': uuid,\n                        'recsys.position': 'recommend.m-' + _this2.position + '.click'\n                    },\n                    context: {\n                        finnkode: adId\n                    }\n                });\n\n                if (_this2.position && ad.trackingCode) {\n                    tracking.trackEventLater({\n                        analyticsName: 'recommend.m-' + _this2.position + '-' + ad.trackingCode + '.click'\n                    });\n                }\n\n                if (ad.trackingCode) {\n                    tracking.trackEventLater({\n                        ecType: 'AD',\n                        ecCategory: 'LOG_PROFILED_ADS_FRONT_CLICK',\n                        eventData: {\n                            'recsys.trackingcode': ad.trackingCode,\n                            'recsys.score': ad.score,\n                            'recsys.uuid': uuid\n                        },\n                        context: {\n                            finnkode: adId\n                        }\n                    });\n                }\n            };\n        }\n    }, {\n        key: 'createRemoveClickTracker',\n        value: function createRemoveClickTracker(ad, uuid, version) {\n            var _this3 = this;\n\n            var adId = ad.itemId;\n            return function (event) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.target.closest('button').disabled = true;\n\n                var itemEle = event.target.closest('[data-rec-item]');\n                if (itemEle) {\n                    itemEle.style.transition = 'opacity .2s';\n                    itemEle.style.opacity = '.15';\n\n                    var linkEle = itemEle.querySelector('a');\n                    if (linkEle) {\n                        linkEle.removeAttribute('href');\n                    }\n                }\n\n                tracking.trackEvent({\n                    ecType: 'USER',\n                    ecCategory: 'recommend.block',\n                    eventData: {\n                        version: version,\n                        'recsys.position': _this3.position,\n                        'recsys.uuid': uuid\n                    },\n                    context: {\n                        finnkode: adId\n                    }\n                });\n            };\n        }\n    }]);\n\n    return Tracking;\n}();\n\nmodule.exports = Tracking;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWNraW5nLmpzIl0sIm5hbWVzIjpbInRyYWNraW5nIiwicmVxdWlyZSIsIkluc2NyZWVuT2JzZXJ2ZXIiLCJkZWZhdWx0IiwiVHJhY2tpbmciLCJwb3NpdGlvbiIsInJlY29tbWVuZGF0aW9ucyIsImFkdmVydHMiLCJpdGVtcyIsImZpbHRlciIsImFkIiwidHJhY2tpbmdDb2RlIiwiZm9yRWFjaCIsInRyYWNrRXZlbnQiLCJlY1R5cGUiLCJlY0NhdGVnb3J5IiwiZXZlbnREYXRhIiwic2NvcmUiLCJ1dWlkIiwiY29udGV4dCIsImZpbm5rb2RlIiwiaXRlbUlkIiwiYWRJZHMiLCJ0eXBlIiwibWFwIiwiam9pbiIsInZlcnNpb24iLCJ2aWV3Iiwib2JzZXJ2ZXIiLCJzZW5kSW5jcmVlblRyYWNrRXZlbnQiLCJvbmNlIiwib2JzZXJ2ZSIsImFkSWQiLCJ0cmFja0V2ZW50TGF0ZXIiLCJhbmFseXRpY3NOYW1lIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRhcmdldCIsImNsb3Nlc3QiLCJkaXNhYmxlZCIsIml0ZW1FbGUiLCJzdHlsZSIsInRyYW5zaXRpb24iLCJvcGFjaXR5IiwibGlua0VsZSIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmVBdHRyaWJ1dGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUEsSUFBTUEsV0FBV0MsUUFBUSxvQkFBUixDQUFqQjtBQUNBLElBQU1DLG1CQUFtQkQsUUFBUSw0QkFBUixFQUFzQ0UsT0FBL0Q7O0lBRU1DLFE7QUFDRixzQkFBWUMsUUFBWixFQUFzQjtBQUFBOztBQUNsQixhQUFLQSxRQUFMLEdBQWdCQSxRQUFoQjtBQUNIOzs7O3NDQUVhQyxlLEVBQWlCO0FBQzNCLGdCQUFJLENBQUMsS0FBS0QsUUFBVixFQUFvQjtBQUNoQjtBQUNIO0FBQ0QsZ0JBQU1FLFVBQVVELGdCQUFnQkUsS0FBaEM7O0FBRUFELG9CQUFRRSxNQUFSLENBQWU7QUFBQSx1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Q0FBd0IsTUFBeEI7QUFDSDtBQUNKOztBQUVEL0MseUJBQVNhLFVBQVQsQ0FBb0I7QUFDaEJDLDRCQUFRLE1BRFE7QUFFaEJDLGdDQUFZLGlCQUZJO0FBR2hCQywrQkFBVztBQUNQVSx3Q0FETztBQUVQLDJDQUFtQixPQUFLckIsUUFGakI7QUFHUCx1Q0FBZWE7QUFIUixxQkFISztBQVFoQkMsNkJBQVM7QUFDTEMsa0NBQVVZO0FBREw7QUFSTyxpQkFBcEI7QUFZSCxhQTVCRDtBQTZCSDs7Ozs7O0FBR0xnQixPQUFPQyxPQUFQLEdBQWlCN0MsUUFBakIiLCJmaWxlIjoidHJhY2tpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHRyYWNraW5nID0gcmVxdWlyZSgnQGZpbm4tbm8vYW5hbHl0aWNzJyk7XG5jb25zdCBJbnNjcmVlbk9ic2VydmVyID0gcmVxdWlyZSgnQGZpbm4tbm8vaW5zY3JlZW4tb2JzZXJ2ZXInKS5kZWZhdWx0O1xuXG5jbGFzcyBUcmFja2luZyB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cblxuICAgIHRyYWNrUmVuZGVyZWQocmVjb21tZW5kYXRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkdmVydHMgPSByZWNvbW1lbmRhdGlvbnMuaXRlbXM7XG5cbiAgICAgICAgYWR2ZXJ0cy5maWx0ZXIoYWQgPT4gYWQudHJhY2tpbmdDb2RlKS5mb3JFYWNoKGFkID0+IHtcbiAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgICAgIGVjVHlwZTogJ0FEJyxcbiAgICAgICAgICAgICAgICBlY0NhdGVnb3J5OiAnTE9HX1BST0ZJTEVEX0FEU19GUk9OVF9WSUVXJyxcbiAgICAgICAgICAgICAgICBldmVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy50cmFja2luZ2NvZGUnOiBhZC50cmFja2luZ0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICdyZWNzeXMuc2NvcmUnOiBhZC5zY29yZSxcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy51dWlkJzogcmVjb21tZW5kYXRpb25zLnV1aWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbm5rb2RlOiBhZC5pdGVtSWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhZElkcyA9IGFkdmVydHNcbiAgICAgICAgICAgIC5maWx0ZXIoYWQgPT4gYWQudHlwZSAhPT0gJ05BVElWRScpIC8vIEF2b2lkIHRyYWNraW5nIG5hdGl2ZSBhZCB0ZXN0XG4gICAgICAgICAgICAubWFwKGFkID0+IGFkLml0ZW1JZClcbiAgICAgICAgICAgIC5qb2luKCcsJyk7XG5cbiAgICAgICAgdHJhY2tpbmcudHJhY2tFdmVudCh7XG4gICAgICAgICAgICBlY1R5cGU6ICdVU0VSJyxcbiAgICAgICAgICAgIGVjQ2F0ZWdvcnk6ICdyZWNvbW1lbmRhdGlvbkV2ZW50cycsXG4gICAgICAgICAgICBldmVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBhZElkcyxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiByZWNvbW1lbmRhdGlvbnMudmVyc2lvbixcbiAgICAgICAgICAgICAgICAncmVjc3lzLnV1aWQnOiByZWNvbW1lbmRhdGlvbnMudXVpZCxcbiAgICAgICAgICAgICAgICAncmVjc3lzLnBvc2l0aW9uJzogYHJlY29tbWVuZC5tLSR7dGhpcy5wb3NpdGlvbn0uc2hvd2AsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBhZHZlcnRzLmZpbHRlcihhZCA9PiBhZC50eXBlID09PSAnTkFUSVZFJykuZm9yRWFjaChhZCA9PiB7XG4gICAgICAgICAgICB0cmFja2luZy50cmFja0V2ZW50KHtcbiAgICAgICAgICAgICAgICBlY1R5cGU6ICdVU0VSJyxcbiAgICAgICAgICAgICAgICBlY0NhdGVnb3J5OiAncmVjb21tZW5kYXRpb25FdmVudHMnLFxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBhZElkczogW2FkLml0ZW1JZCwgYWQuc2NvcmUsIGFkLnZlcnNpb25dLmpvaW4oJzonKSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogYWQudmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy51dWlkJzogYWQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy5wb3NpdGlvbic6IGByZWNvbW1lbmQubS1mcm9udHBhZ2VfYXdlc29tZS1sZW5kb0JhcE5hdGl2ZUFkVGVzdC5yZWNvbW1lbmRlZGAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJhY2tpbmcudHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgZWNUeXBlOiAnVVNFUicsXG4gICAgICAgICAgICAgICAgZWNDYXRlZ29yeTogJ3JlY29tbWVuZGF0aW9uRXZlbnRzJyxcbiAgICAgICAgICAgICAgICBldmVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRJZHM6IGFkLml0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogYWQudmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy51dWlkJzogYWQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy5wb3NpdGlvbic6IGByZWNvbW1lbmQubS1mcm9udHBhZ2VfYXdlc29tZS1sZW5kb0JhcE5hdGl2ZUFkVGVzdC5zaG93YCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRyYWNrSW5zY3JlZW5PbmNlKHZpZXcsIHJlY29tbWVuZGF0aW9ucykge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnNjcmVlbk9ic2VydmVyKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEluY3JlZW5UcmFja0V2ZW50KHJlY29tbWVuZGF0aW9ucyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodmlldyk7XG4gICAgfVxuXG4gICAgc2VuZEluY3JlZW5UcmFja0V2ZW50KHJlY29tbWVuZGF0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZElkcyA9IHJlY29tbWVuZGF0aW9ucy5pdGVtc1xuICAgICAgICAgICAgLmZpbHRlcihhZCA9PiBhZC50eXBlICE9PSAnTkFUSVZFJykgLy8gQXZvaWQgdHJhY2tpbmcgbmF0aXZlIGFkIHRlc3RcbiAgICAgICAgICAgIC5tYXAoYWQgPT4gYWQuaXRlbUlkKVxuICAgICAgICAgICAgLmpvaW4oJywnKTtcblxuICAgICAgICB0cmFja2luZy50cmFja0V2ZW50KHtcbiAgICAgICAgICAgIGVjVHlwZTogJ1VTRVInLFxuICAgICAgICAgICAgZWNDYXRlZ29yeTogJ3JlY29tbWVuZGF0aW9uRXZlbnRzJyxcbiAgICAgICAgICAgIGV2ZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGFkSWRzLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHJlY29tbWVuZGF0aW9ucy52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICdyZWNzeXMudXVpZCc6IHJlY29tbWVuZGF0aW9ucy51dWlkLFxuICAgICAgICAgICAgICAgICdyZWNzeXMucG9zaXRpb24nOiBgcmVjb21tZW5kLm0tJHt0aGlzLnBvc2l0aW9ufS5pbnNjcmVlbmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICByZWNvbW1lbmRhdGlvbnMuaXRlbXMuZmlsdGVyKGFkID0+IGFkLnR5cGUgPT09ICdOQVRJVkUnKS5mb3JFYWNoKGFkID0+IHtcbiAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgICAgIGVjVHlwZTogJ1VTRVInLFxuICAgICAgICAgICAgICAgIGVjQ2F0ZWdvcnk6ICdyZWNvbW1lbmRhdGlvbkV2ZW50cycsXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkSWRzOiBhZC5pdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGFkLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgICdyZWNzeXMudXVpZCc6IGFkLnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICdyZWNzeXMucG9zaXRpb24nOiBgcmVjb21tZW5kLm0tZnJvbnRwYWdlX2F3ZXNvbWUtbGVuZG9CYXBOYXRpdmVBZFRlc3QuaW5zY3JlZW5gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJhY2tFbXB0eShyZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2tpbmcudHJhY2tFdmVudCh7XG4gICAgICAgICAgICBlY1R5cGU6ICdVU0VSJyxcbiAgICAgICAgICAgIGVjQ2F0ZWdvcnk6ICdyZWNvbW1lbmRhdGlvbkV2ZW50cycsXG4gICAgICAgICAgICBldmVudERhdGE6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiByZWNvbW1lbmRhdGlvbnMudmVyc2lvbixcbiAgICAgICAgICAgICAgICAncmVjc3lzLnBvc2l0aW9uJzogYHJlY29tbWVuZC5tLSR7dGhpcy5wb3NpdGlvbn0uZW1wdHlgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlQWRDbGlja1RyYWNrZXIoYWQsIHV1aWQsIHZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgYWRJZCA9IGFkLml0ZW1JZDtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChhZC50eXBlID09PSAnTkFUSVZFJykge1xuICAgICAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICBlY1R5cGU6ICdVU0VSJyxcbiAgICAgICAgICAgICAgICAgICAgZWNDYXRlZ29yeTogJ3JlY29tbWVuZGF0aW9uRXZlbnRzJyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBhZC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy51dWlkJzogYWQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZWNzeXMucG9zaXRpb24nOiBgcmVjb21tZW5kLm0tZnJvbnRwYWdlX2F3ZXNvbWUtbGVuZG9CYXBOYXRpdmVBZFRlc3QuY2xpY2tgLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5ua29kZTogYWRJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBFYXJseSByZXR1cm4gdG8gYXZvaWQgZnVydGhlciB0cmFja2luZyBmb3IgbmF0aXZlIGFkIHRlc3RcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYWNraW5nLnRyYWNrRXZlbnRMYXRlcih7XG4gICAgICAgICAgICAgICAgZWNUeXBlOiAnVVNFUicsXG4gICAgICAgICAgICAgICAgZWNDYXRlZ29yeTogJ3JlY29tbWVuZGF0aW9uRXZlbnRzJyxcbiAgICAgICAgICAgICAgICBldmVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy51dWlkJzogdXVpZCxcbiAgICAgICAgICAgICAgICAgICAgJ3JlY3N5cy5wb3NpdGlvbic6IGByZWNvbW1lbmQubS0ke3RoaXMucG9zaXRpb259LmNsaWNrYCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlubmtvZGU6IGFkSWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiAmJiBhZC50cmFja2luZ0NvZGUpIHtcbiAgICAgICAgICAgICAgICB0cmFja2luZy50cmFja0V2ZW50TGF0ZXIoe1xuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3NOYW1lOiBgcmVjb21tZW5kLm0tJHt0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb259LSR7YWQudHJhY2tpbmdDb2RlfS5jbGlja2AsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhZC50cmFja2luZ0NvZGUpIHtcbiAgICAgICAgICAgICAgICB0cmFja2luZy50cmFja0V2ZW50TGF0ZXIoe1xuICAgICAgICAgICAgICAgICAgICBlY1R5cGU6ICdBRCcsXG4gICAgICAgICAgICAgICAgICAgIGVjQ2F0ZWdvcnk6ICdMT0dfUFJPRklMRURfQURTX0ZST05UX0NMSUNLJyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAncmVjc3lzLnRyYWNraW5nY29kZSc6IGFkLnRyYWNraW5nQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZWNzeXMuc2NvcmUnOiBhZC5zY29yZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZWNzeXMudXVpZCc6IHV1aWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbm5rb2RlOiBhZElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNyZWF0ZVJlbW92ZUNsaWNrVHJhY2tlcihhZCwgdXVpZCwgdmVyc2lvbikge1xuICAgICAgICBjb25zdCBhZElkID0gYWQuaXRlbUlkO1xuICAgICAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgY29uc3QgaXRlbUVsZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdbZGF0YS1yZWMtaXRlbV0nKTtcbiAgICAgICAgICAgIGlmIChpdGVtRWxlKSB7XG4gICAgICAgICAgICAgICAgaXRlbUVsZS5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgLjJzJztcbiAgICAgICAgICAgICAgICBpdGVtRWxlLnN0eWxlLm9wYWNpdHkgPSAnLjE1JztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtFbGUgPSBpdGVtRWxlLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua0VsZSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5rRWxlLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhY2tpbmcudHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgZWNUeXBlOiAnVVNFUicsXG4gICAgICAgICAgICAgICAgZWNDYXRlZ29yeTogJ3JlY29tbWVuZC5ibG9jaycsXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgICdyZWNzeXMucG9zaXRpb24nOiB0aGlzLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAncmVjc3lzLnV1aWQnOiB1dWlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBmaW5ua29kZTogYWRJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYWNraW5nO1xuIl19","deps":{"@finn-no/inscreen-observer":"f6ee56709d11090f8d91d50b54de34a3111ddf247ae24c74f74e1aaabbf752af","@finn-no/analytics":"1892a34e5d6b4ed6f915a394a6edd0a10cae9cfcc462d96105af4532898b7521"},"file":"/home/node/src/routes/podlet-recommendations/lib/client/tracking.js","index":16,"indexDeps":{"@finn-no/inscreen-observer":4,"@finn-no/analytics":1}}
,
{"id":"da99622d8821b3c48c27ecb2a60c964c9c0e465f6581b25cc8da3aa98756f935","source":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction trackJsIfAvailable(err) {\n    if (typeof window !== 'undefined' && _typeof(window.trackJs) === 'object') {\n        window.trackJs.track(err);\n    } else {\n        // FIXME: This is SUPER noisy during tests. See https://github.schibsted.io/finn/frontpage/issues/65#issuecomment-209585\n        console.error(err);\n    }\n    return err;\n}\n\nmodule.exports = trackJsIfAvailable;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWNranMtd3JhcHBlci5qcyJdLCJuYW1lcyI6WyJ0cmFja0pzSWZBdmFpbGFibGUiLCJlcnIiLCJ3aW5kb3ciLCJ0cmFja0pzIiwidHJhY2siLCJjb25zb2xlIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUVBLFNBQVNBLGtCQUFULENBQTRCQyxHQUE1QixFQUFpQztBQUM3QixRQUFJLE9BQU9DLE1BQVAsS0FBa0IsV0FBbEIsSUFBaUMsUUFBT0EsT0FBT0MsT0FBZCxNQUEwQixRQUEvRCxFQUF5RTtBQUNyRUQsZUFBT0MsT0FBUCxDQUFlQyxLQUFmLENBQXFCSCxHQUFyQjtBQUNILEtBRkQsTUFFTztBQUNIO0FBQ0FJLGdCQUFRQyxLQUFSLENBQWNMLEdBQWQ7QUFDSDtBQUNELFdBQU9BLEdBQVA7QUFDSDs7QUFFRE0sT0FBT0MsT0FBUCxHQUFpQlIsa0JBQWpCIiwiZmlsZSI6InRyYWNranMtd3JhcHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gdHJhY2tKc0lmQXZhaWxhYmxlKGVycikge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LnRyYWNrSnMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHdpbmRvdy50cmFja0pzLnRyYWNrKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRklYTUU6IFRoaXMgaXMgU1VQRVIgbm9pc3kgZHVyaW5nIHRlc3RzLiBTZWUgaHR0cHM6Ly9naXRodWIuc2NoaWJzdGVkLmlvL2Zpbm4vZnJvbnRwYWdlL2lzc3Vlcy82NSNpc3N1ZWNvbW1lbnQtMjA5NTg1XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIGVycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFja0pzSWZBdmFpbGFibGU7XG4iXX0=","deps":{},"file":"/home/node/src/routes/podlet-recommendations/lib/client/trackjs-wrapper.js","index":17,"indexDeps":{}}
]
